<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Django后端框架学习 | XiaoHuiHuiBlog</title><meta name="keywords" content="Django"><meta name="author" content="xiaohuihui,904036925@qq.com"><meta name="copyright" content="xiaohuihui"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Django后端框架学习"><meta name="application-name" content="Django后端框架学习"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Django后端框架学习"><meta property="og:url" content="https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/index.html"><meta property="og:site_name" content="XiaoHuiHuiBlog"><meta property="og:description" content="python容器入门一般python数据容器分为5类，列表list，元组tuple，字符串str，集合set，字典dict list列表列表语法定义 123JavaScripta&amp;#x3D;[1,2,3,4,&amp;quot;iteheima&amp;quot;,true]a&amp;#x3D;list(1,2,4)  注意：list表中的"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://tse3-mm.cn.bing.net/th/id/OIP-C.q-lqnbLL5Q7-geuBhnjXJAHaEK?w=331&amp;h=186&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.9&amp;pid=1.7&amp;_r_=974c732c-0d44-8a84-8d27-93def5c587ad"><meta property="article:author" content="xiaohuihui"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tse3-mm.cn.bing.net/th/id/OIP-C.q-lqnbLL5Q7-geuBhnjXJAHaEK?w=331&amp;h=186&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.9&amp;pid=1.7&amp;_r_=974c732c-0d44-8a84-8d27-93def5c587ad"><meta name="description" content="python容器入门一般python数据容器分为5类，列表list，元组tuple，字符串str，集合set，字典dict list列表列表语法定义 123JavaScripta&amp;#x3D;[1,2,3,4,&amp;quot;iteheima&amp;quot;,true]a&amp;#x3D;list(1,2,4)  注意：list表中的"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":"365*2","position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: xiaohuihui","link":"链接: ","source":"来源: XiaoHuiHuiBlog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XiaoHuiHuiBlog',
  title: 'Django后端框架学习',
  postAI: '',
  pageFillDescription: 'python容器入门, list列表, tuple元组, str字符串, set集合, dict字典映射, 数据容器特点对比, 补充知识：序列, python函数进阶, 函数多个返回值, 函数多种传参方式, 匿名函数, Python 文件操作, 文件编码, 文件读取, 文件写入, 文件追加, python异常模块与包, 捕获异常, 异常传递, python模块, 自定义模块, Python 包, 第三方包, python可视化, python对象, 类定义, 类成员变量和成员方法, 类对象, 构造方法, 其他内置方法, 封装, 私有成员变量和私有成员方法, 继承, 类型注解, 多态, Python SQL入门实战, DDL, DML, DQL, pythonMysql实战, PySpark基础入门, 基础准备, RDD对象, 数据计算, python高级技巧, 闭包, 装饰器, 设计模式, 多线程, 网络编程, Django框架, 教程文档, 安装环境, 创建项目, 创建应用, Python前后端分离开发, 设计符合标准的RESTful接口, Python DjangoMysql数据库设置, 模型, 模型类查询方法, 路由, 类视图, 中间件, Django自带认证系统, 权限校验, ORM事务开启, 跨域问题, Django REST Framwork, 接口开发步骤, 创建模型类, 序列化操作, 反序列化操作, 模型序列化器, 序列化器自定义校验方法, 请求和响应, API视图装饰器, GenericAPIView类视图, Mixin视图类, 拓展视图类, 视图集, 路由, 认证和权限, 权限隔离, 限流, 过滤, 自定义过滤器类实现复杂过滤, 自动生成接口文档, 排序, 分页, 异常处理, 文件上传, 跨域配置, DRF JWT, DRF后端项目实战, 项目开发配置, 创建模型类, 配置token刷新视图, 配置   检验token, 开发问题, 短信验证码, python项目开发常用目录结构说明, 实战项目2, 商业模式介绍, 开发流程, 项目架构, 安装拓展, 安装跨域配置, 短信验证码, celery分布式异步消息队列系统, session和JWT, 邮件发送, QQ配置邮箱发送, FastDFS分布式文件系统, Docker, Django开发问题, Django生成Mysql表字段注释, Django 出现 RuntimeError Conflicting ‘userinfo_groups’ models in application ‘users’ ltclass ‘users.models.UserInfo_groups’gt and ltclass ‘apps.users.models.UserInfo_groups’gt.报错问题, Pycharm debug一直进入不到断点中直接跳出结果, Pycharm debug一直显示正在搜集数据, Flask框架, 数据库, 运维与部署, 数据处理与分析, 人工智能容器入门一般数据容器分为类列表元组字符串集合字典列表列表语法定义注意表中的元素可以是不同的列表相关函数查找某元素的下标如果找不到就报错下标为在指定下标位置插入指定元素追加到尾部元素追加元素方式将其他数据容器内容取出依次追加到列表尾部注意这个会修改原删除元素删除和删除删除某元素在列表中的第一个匹配项清空列表统计某一个元素在列表中的数量计算全部元素数量长度元组由于列表是可以进行修改的如果想要的信息不被修改列表就不合适此时就是使用元组元组同列表一样都是可以封装多个不同类型的元素在内但是最大的不同在于一旦元组定义完成就不可修改相当于一个只读的所以当我们需要在程序内封装数据又不希望封装的数据被篡改那么元组就非常合适注意定义单个元素要往后面添加逗号定义单个元素下标索引取出内容字符串注意字符串同元组一样也是一个无法修改的数据容器字符串的常用操作查找特定字符串的下标索引值字符串的替换其本质并不是修改原字符串本身而是得到一个新字符串字符串分割按照分隔符划分多个字符串并存入列表对象中字符串本身不会改变而是直接得到一个新的列表对象字符串规整操作去除前后字符传入的是按照和移除的统计字符串中某字符串出现的次数统计字符串长度拓展字符串比较大小注意字符串的比较就是不管长度是否一样一位位进行对比如果有其中一位比别人大那么整体就大比较相同长度不同大小比较不同长度相同大小比较不同长度不同大小比较相同长度不同大小比较不同长度相同大小比较不同长度不同大小集合主要特点筛选删除重复元素保证集合内部元素的唯一性且元素之间无序性因此集合不支持下标索引访问添加新元素移除元素从集合中随机取出元素清空集合取两个集合的差集这里是取出集合有但是没有的元素消除个集合的差集这里是在内删除和相同的元素结果是被修改不变消除后的消除后的合并集合统计集合数量字典映射字典虽然和集合一样都是使用来存储元素但是字典元素是一个个键值对同样也是没有下标索引的意味着同样是元素之间具有无序性但是字典可以通过值来取得对应的字典新增元素注意不可以重复否则就是更新操作更新元素删除元素清空字典获取全部的统计数量长度数据容器特点对比注意这类容器都是可以互相转换的如字典转列表字符串转列表字典转列表字符串转列表字典转元组字符串转元组字典转集合字符串转集合字典转列表字符串转列表字典转元组字符串转元组字典转集合字符串转集合类容器排序使用排序会将排序完的结果放入列表中最后返回值是一个列表列表排序结果元组排序结果字符串排序结果集合排序结果字典排序结果列表反向排序结果元组反向排序结果字符串反向排序结果集合反向排序结果字典反向排序结果列表排序结果元组排序结果字符串排序结果集合排序结果字典排序结果列表反向排序结果元组反向排序结果字符串反向排序结果集合反向排序结果字典反向排序结果补充知识序列序列支持切片即列表元组字符串均支持进行切片操作从一个序列中取出一个子序列语法序列起始下标结束下标步长函数进阶函数多个返回值按照多个返回值的顺序写对应顺序的多个变量接收即可支持不同类型的数据的函数多种传参方式函数中有种常见参数使用方式位置参数调用函数时根据函数定义的参数位来传递参数传递的参数和定义的参数顺序和个数必须一致关键字参数可以让函数更加清晰容易使用同时也避免了参数的传入的顺序需求但是如果有位置参数则位置参数必须在关键字参数前面男女男女缺省参数缺省参数也叫默认参数主要是给参数提供默认值注意所有位置参数必须出现在默认参数前包括函数定义和调用这里就是位置参数必须出现在默认参数前男女男女不定长参数这个比较有意思不定长参数也叫可变参数用于不确定调用时传递多少个参数位置传递的不定长所有传入的参数都会被变量收集并且合并为一个元组是元组类型这就是位置传递参数类型内容为男参数类型内容为男参数类型内容为关键字传递的不定长参数是键值键值对形式来传递的都会被接受并合并转化字典参数类型内容为男女参数类型内容为男参数类型内容为女匿名函数注意这个函数可以作为另一个函数的参数进行传递也就是说函数传入的作用在于本质上是传递计算逻辑而非传递计算数据可以是乘法计算逻辑减法计算逻辑等参数的类型是计算结果参数的类型是计算结果利用函数定义匿名函数在函数定义中关键字可以定义带有名称的匿名函数关键字可以定义匿名函数也就是无名称函数有名称的函数可以基于名称重复使用但是无名称的匿名函数只可临时使用一次匿名函数定义语法传入参数函数体一行代码注意匿名函数只能写一行代码无法写多行代码同时不用写语句默认就是参数的类型是计算结果参数的类型是计算结果文件操作文件编码是目前全球通用的编码格式除非有特殊需求否则一律使用的格式进行文件编码即可文件读取最后需要文件关闭如果没有进行文件关闭操作就会导致这个文件一直被程序占用语法通过语法可以在操作完成后自动关闭文件避免遗忘掉方法文件写入在文件写入过程中方法带有刷新功能将写入缓存区的内容刷新写入到硬盘中我是小文件追加基本和文件写入同理除了需要改变模式外基本就不需要修改什么异常模块与包捕获异常对进行提醒不至于因为产生而导致程序崩溃捕获异常的作用在于提前假设某处会出现异常做好提前准备当真的出现异常的时候可以有后续手段可能发生错误的代码如果出现异常执行的代码指定异常捕获在于由于一个程序的异常可能会出现多种多样对于出现其他的异常将不会捕获而是直接捕获指定的异常并进行处理捕获异常出现名字异常出现文件异常捕获多个异常捕获异常出现名字异常出现名字异常捕获全部异常捕获异常出现名字异常出现名字异常表示无论是否异常都要执行的代码例如关闭文件等异常传递异常具有传递性的模块自定义模块测试模块在实际开发中当一个开发人员编写完一个模块后为了让模块能够在项目中达到想要的效果那么就会在文件中添加一些测试信息但是如果调用这个模块的时候就会打印出这样的信息这是不行的解决方案是可以在测试模块中添加测试模块添加下面语句意味着只有执行当前文件时候才会打印对应信息包包的作用当我们模块文件越来越多时包可以帮助我们管理这些模块包的作用就是包含多个模块但是包的本质依然是模块注意相当于标识如果文件夹中有说明该文件夹就是一个包如果没有就是一个普通文件夹第三方包可视化转化成字符串还是相当容易得创建折线图对象添加轴数据新加坡密西西比添加轴数据生成图像设置全局配置处理美国日本印度数据数据预处理处理文件数据文件不存在数据文件路径美国日本印度生成图表格美国确证人数日本确证人数印度确证人数年美日印确证人数对比折线图北京上海湖南台湾广东中国地图设置全局属性进阶版读取疫情数据文件不存在转化数据疫情创建地图实例各省份确证人数设置全局属性全国疫情地图人人人人人绘制地图全国疫情自制地图基础柱状图绘制全球数据读取数据定义字典创建时间对象排序年份去除前名国家构建柱状图亿反转轴和轴设置时间线自动播放绘制图全球数据文件不存在对象类定义类名称类属性类行为创建类对象的语法对象类名称类属性定义在类中的成员变量类方法定义在类中的函数成员方法举例广东省中山市类成员变量和成员方法广东省中山市这里的本质上就是类对象本身的意思只有通过成员方法才能访问类的成员变量出现在形参列表中但是不占用参数位置无需理会类对象构造方法类可以使用方法称之为构造方法可以实现在创建类对象构造类的时候会自动执行传入参数时会自动将其传递给方法使用闹钟价格为闹钟价格为其他内置方法构造方法是类内置的方法之一这些内置的类方法各自有各自特殊的功能这些内置方法我们称之为魔术方法注意在类中如果是以前面下划线和后面下划线包裹起来的方法都是魔术方法魔术方法将类对象转化成字符串如果没有魔术方法直接打印输出则返回对象地址具有魔术方法则将其转化为字符串我是闹钟价格为我是闹钟价格为魔术方法用于两个对象属性之间的比较小于符号比较大小其中的表示传入另一个对象我是闹钟价格为魔术方法用于两种比较运算符上比较对象中的某个属性我是闹钟价格为魔术方法魔术方法比较两个对象中的某个属性是否相等我是闹钟价格为魔术方法封装私有成员变量和私有成员方法私有成员变量定义变量名以开头两个下划线私有成员方法定义方法名同样以开头两个下划线注意私有成员无法被类对象使用个但是可以被其他的成员使用已开启已经关闭使用网络正在通话中继承单继承定义一个子类继承一个父类类名父类名类内容体多继承定义一个子类继承多个父类类名父类父类类内容体注意在多继承中多个父类如果有同名的成员那么默认继承顺序从左到右为优先级也就是先继承的保留并且覆盖后面继承的同名方法或者同名变量复写和使用父类成员复写子类继承父类方法和成员后如果对父类方法不满意可以在子类中进行重新定义一旦复写父类成员那么类对象调用成员的时候就会调用复写后的新成员类型注解类型注解在代码中涉及数据交互的地方提供数据类型的注解显示说明主要功能帮助第三方工具对代码进行类型推断协助做代码提示帮助开发者自身对变量进行类型注解注意类型注解本质上就是备注就算标记做了也不会使程序报错影响运行类型注解用来描述混合的类型多态制冷制热左右摇摆美的空调美的空调制冷美的空调制热美的空调左右摇摆格力空调格力空调制冷格力空调制热格力空调左右摇摆美的空调制冷格力空调制冷入门实战语句语法特征语言不区分大小写可以单行或多行书写最后必须以结束支持注释单行注释注释内容单行注释注释内容多行注释注释内容分组聚合一般根据具体需求按列进行分组然后在组里面进行统计查询等相关操作排序和分页实战安装第三方库操作数据库主机名端口号账户密码获取游标对象用于操作数据库语句选择数据库操作数据库广东省深圳市广东省深圳市袁詩涵严睿郑子韬曹睿插入数据库在执行数据插入或其他产生数据更改的语句时候默认是需要提交更改的即通过代码确认这种更改行为主机名端口号账户密码设置自动提交数据库实战演练设计一个类可以完成数据的封装设计一个抽象类定义文件读取的相关功能并使用类实现具体功能读取文件生产数据对象进行数据需求逻辑计算计算每天的销售额通过可视化出来年月销售数据年月销售数据插入数据库设置自动提交设置游标对象创建数据库检查是否创建成功创建数据库成功选择当前数据库检查表是否存在并删除表已存在已删除创建表创建表成功插入数据完成插入请检查数据库取出数据库数据创建表失败创建数据库失败关闭数据库基础入门基础准备安装第三方库构建执行环境入口对象对象数据计算高级技巧闭包闭包在函数嵌套的前提下内部函数使用了外部函数的变量并且外部函数返回了内部函数我们把这个使用外部函数变量的内部函数称为闭包装饰器装饰器本质上就是一个闭包但是主要目的是在不破坏原有函数结构上给原函数增加功能设计模式一般单例模式是构建一个类的实例对象然后重复使用即可防止重复构建实例对象导致内存问题但是一般是用在工具类的场景多线程多线程构建线程创建线程程序我想要唱歌我在跳湖嘿嘿黑启动线程网络编程进程之间想要通信就需要通过来进行创建对象绑定到指定和地址服务端开始监听端口接收客户端连接获得连接对象客户端连接后通过方法接受客户端发送的消息通过客户端当次连接对象调用方法可以回复消息客户端当次连接对象和对象调用方法关闭连接客户端程序创建对象连接端口发送消息请求请输入要发送的消息接收返回来的消息接收到的消息是关闭连接服务端程序服务端程序创建对象绑定地址和监听端口确定监听客户端数量正在监听端口等待客户端连接为阻塞态接收到客户端的请求消息客户端的信息为接收客户端消息接收到客户端的请求消息发送消息给客户端发送消息结束关闭连接框架教程文档创建网站的地基学习开发入门与实践第章环境搭建入门与实践教程书栈网框架官方文档注意这个是的版本学习资源安装环境由于的版本比较多与之间存在兼容性比如有些应用需要在环境下开发如果在一台主机上需要同时安装两套应用则繁琐且容易出错此时可以使用虚拟环境来解决虚拟环境可以让每一个应用单独使用一个环境好处每个应用拥有自己的开发环境不会影响其他应用的环境而且一旦删除虚拟环境就可以单独删除干净不会影响到其他应用的环境与之间的关系从功能上来说结合了和的功能但是一般是给数据科学的人使用的而虚拟环境一般是给开发人员使用安装虚拟环境创建虚拟环境创建对应目录解释器目录激活和退出虚拟环境激活环境进入对应目录的目录下退出虚拟环境在目录下创建项目项目名称创建应用应用名称创建完应用需手工注册手工注册应用注册设置框架以后和项目交互基本上都是基于这个文件一般都是终端输入子命令一般情况下不应该编辑这个文件本项目的设置项以后和项目相关配置都是放在这个里面这个文件是用来配置路由的比如是访问新闻列表页这些东西需要再这个文件中完成的项目与协议兼容的服务器入口部署的时候需要用的一般情况下也是不需要修改的前后端分离开发设计符合标准的接口后端接口需要满足某些规范这样大家都遵循一定的规范标准会减少很多不必要的问题数据库设置创建数据库框架只能生产数据表不会自动帮我们生成数据库所以需要自己在数据库中创建配置使用数据库数据库配置文件使用的数据库引擎修改为连接的数据库名数据库登录账号数据库登录密码主机地址主机端口设置日志安装依赖框架使用需要安装客户端模型参考官网使用模型类直接就可以在数据库建立对应的表建立表之后可以生成迁移文件常用模型字段使用时需要引入包字段选项通过选项实现对字段的约束关系字段类型元选项模型类查询方法比较查询使用对象逻辑与多个条件同时成立如查询阅读数量大于评论数量大于的数据方法方法逻辑或多个条件符合一个即可查询阅读数量等于或者评论数量等于的数据逻辑非查找不符合条件的数据查询不为的数据方法方法聚合函数查询最高数据字段名称查询最低数据字段名称查询求和字段名称查询平均数据字段名称统计字段中一共有多少新闻字段名称关联查询增删查改路由类视图中间件自带认证系统权限校验事务开启跨域问题接口开发步骤创建模型类文件定义模型类执行数据迁移命令在数据库中形成对应的数据表创建序列化文件关联模型类注意基本就在序列化文件中操作创建视图类定义接口配置视图类的路由规则创建模型类创建模型类这里测试序列化和反序列化定义模型类用户名不设置字段显示名称邮箱年龄这里会在数据库的表中创建对应的数据表名称用户表用户信息执行迁移命令检查数据库此时数据库就会产生新建的数据表进入命令模式插入部分数据进入交互环境导入类插入条数据张收纳序列化操作序列化将对象转化为格式对象反序列化将格式的字符串转化为对象定义好类后如果要通过序列化器类进行序列化需要创建对象的参数为用于序列化时将模型类对象传入参数中如果是用于反序列化时将需要被反序列化的数据传入到参数中单个数据序列化查询的数据将对象序列化输出查询集序列化查询全部数据将所有数据序列化张收纳注意表示对多个查询集多个数据进行序列化的操作注意序列化器中定义了多少个字段那么输出就会有多少个字段将序列化得到的数据转化为查询用户对象创建序列化对象转化嵌套数据序列化反序列化操作反序列化将格式数据转化为对象在进行反序列化操作过程中需要先对对象数据进行验证验证通过情况下再进行保存反序列化时初始化序列化器对象将要反序列化的数据传入参数中先数据验证校验数据调用方法进行验证验证成功返回否则返回如果验证成功通过序列化器对象属性获取数据常用校验字段说明校验字段的长度校验字段的长度不需要校验字段是否为空控制序列化和反序列化的字段只参与序列化返回不参与反序列化校验只参与反序列化校验不参与序列化返回验证通过后如需保存数据直接调用序列化器对象方法其会自动触发序列化器中对应的方法来保存数据反序列化校验数据保存数据注意会根据序列化器中字段对应的约束来进行校验如果是插入新数据会调用序列化器中定义的方法如果是更新数据会调用序列化其中定义的方法通过校验成功后就会进行下面的或者方法了不设置字段显示名称自定义一个序列化器保存数据方法给方法使用自定义数据更新方法给方法使用模型序列化器为了方便我们快速定义序列化器为提供了模型类序列化器来帮助我们快速创建一个类与常规的相同但是优势在于提供了基于模型类自动生成一系列字段基于模型类自动为生产校验器比如包含默认的和的实现定义模型序列化器类定义模型序列化器类指明参造的模型类为所有的字段生成序列化也可以指定具体需要序列化的字段使用可以明确排除掉哪些字段字段不参与序列化指定哪些参与序列化并且不粗安于反序列化的字段更改对应字段的校验规则接口案例定义视图接口函数请求返回所有用户信息请求修改更新对应的信息创建序列化器校验请求参数返回校验失败的提示服务器不支持该类的请求总结一旦定义模型类数据表这个序列化器就像是中间商用来间接操作和查询数据表中的数据间接对数据增删查改而不需要直接对模型类进行操作可能是避免直接修改数据表的缘故同时只要模型类没有修改改变那么序列化器随便修改和定义序列化器自定义校验方法如果需要在序列化器中自己自定义校验规则那么就需要使用自定义校验方法方式一需要定义校验方法名规范字段名定义序列化器类用户序列化器映射模型类将全部字段序列化自定义校验逻辑规则密码长度需要在到位之间方式二自定义校验用户名称的方法用户名需要在到之间定义序列化器类用户序列化器传入自定义校验规则不设置字段显示名称请求和响应框架提供对应的更加简便的视图接口类简化接口的开发提高效率传入视图的对象不再是默认的对象而是提供的拓展了类的类对象无论前端发送的哪种格式数据我们都可以统一的方式读取数据获取请求体数据支持等方法传递的请求体参数不仅支持表单类型数据也支持数据还支持文件数据的获取获取查询字符串参数与的作用一样还提供了一个响应类使用该类构造响应对象时响应的具体数据内容会被转换渲染成符合前端需求的数据类型注意参数不能是复杂结构的数据如的模型类对象对于这样的数据可以使用序列化器序列化后转化为字典类型再传递给参数案例导入模块请求视图装饰器框架提供两个可用于编写视图的包装器用于处理基于函数的视图装饰器用于处理基于类的视图装饰器对的类视图做了更好的封装在的的基础上做了很多的功能拓展与的区别传入到视图方法中的是的对象视图方法可以返回的对象任何异常都会被捕获到并且处理成合适的响应信息扩展了身份认证权限检查流量控制这三功能拓展功能扩展了身份认证权限检查流量控制这三功能定义类视图定义类视图设置模型类请求类视图指定当前类视图使用的查询集类视图使用的序列化器获取查询集获取序列化器获取指定的单一对象定义类视图导入对应类的包定义类视图设置模型类请求视图类这个代码更加简洁导包设置模型类使用视图类简化代码这个也不用实现逻辑内部已经写好了使用视图类简化代码这个也不用实现逻辑内部已经写好了获取单个资源使用视图类简化代码这个也不用实现逻辑内部已经写好了更新单个资源使用视图类简化代码这个也不用实现逻辑内部已经写好了删除单个资源使用视图类简化代码这个也不用实现逻辑内部已经写好了拓展视图类这个就究极简化了代码对上面的代码继续进行了封装基本实现了增删查改的功能设置模型类指定序列器类视图集视图集类不再实现等方法而是实现动作如等将一系列逻辑相关的动作放到一个类中提供一组数据提供单个数据创建数据保存数据删除数据常用视图集定义视图集类指定模型类查询集指定序列化器注意继承里面没有实现任何动作和方法继承没有实现增删查改的动作和方法和一样只提供三个方法同时也提供了两个类属性和只提供了两个方法不支持修改等方法后续可以根据自己的需求合理继承方法即可也可以重写方法实现复杂的增删查改的逻辑路由对于视图集我们除了可以自己手动指明请求方式与动作之间的对应关系外还可以使用来帮助我们快速实现路由信息提供了两个推荐不推荐和的区别是会多附带一个默认的根视图返回一个包含所有列表视图创建对象并注册中的路由注册只支持视图集该视图集的路由前缀视图集路由名称前缀添加路由数据认证和权限全局配置全局权限配置设置身份认证的方式认证认证单个视图配置权限隔离用户只能操作自己的不允许操作别人的数据限流对接口访问频次进行限制以减轻服务器压力反爬虫的一种手段限流类型限制所有匿名未认证用户使用区分用户使用来设置频次限制认证用户使用来区分使用来设置频次限制用户对于具体视图的访问频次通过或全局配置设置限流类型设置限流频次全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次频率周期每秒每分钟每小时每天局部配置可以在具体视图中通过属性来指定限流类型定义视图集类指定模型类查询集指定序列化器设置局部限流过滤对于列表数据可能需要根据字段进行过滤我们可以通过添加拓展来增强支持安装依赖插件注册过滤器注册过滤器设置过滤器全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器在视图中添加属性执行可以过滤的字段指定模型类查询集指定序列化器设置局部限流设置过滤字段自定义过滤器类实现复杂过滤创建专门用于写过滤规则定义过滤规则配置过滤规则自定义过滤器类过滤字段使用过滤器类定义视图集类指定模型类查询集指定序列化器设置局部限流设置过滤字段使用过滤器类自动生成接口文档通过第三方库可以自动生成网页版的接口文档自动接口文档能生成的是继承自及其子类安装依赖生成接口文档需要库的支持注册注册设置接口文档访问路径在项目路由中添加接口文档的路由浏览器访问即可看到自动生成的接口配置自动生成接口文档接口文档同时需要加上配置全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器设置自动生成接口文档排序对于列表数据提供了过滤器来快速指明数据按照字段进行排序指定排序过滤器指定排序的可选字段会在请求的查询字符串参数中检查是否包含了参数如果包含了参数则按照参数指明的排序字段对数据集进行排序定义视图集类指定模型类查询集指定序列化器设置局部限流设置过滤字段使用过滤器类设置排序指定排序的过滤器指定排序的字段当然也可以放在全局配置中这样就无需导入了对应包了全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器设置全局排序设置自动生成接口文档分页提供了分页的支持全局配置在配置文件中设置全局的分页方式全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器设置全局排序设置全局分页设置每页数据量设置自动生成接口文档局部配置在不同视图中通过属性来指定不同的的分页器自定义分页器自定义用户信息分页器指定页码查询参数指定每页数据量的查询参数每页默认数据条数每页最多数据条数使用创建自定义好的分页器导入自定义分页器定义视图集类指定模型类查询集指定序列化器设置局部限流设置过滤字段使用过滤器类设置排序指定排序的过滤器指定排序的字段使用自定义分页器异常处理提供了异常处理如果没有自定义默认会采用默认的处理方式全局权限配置设置身份认证的方式认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器设置全局排序设置全局分页设置每页数据量设置自动生成接口文档默认处理方法使用自定义异常的处理方法自定义异常处理方法自定义异常处理函数服务器出错文件上传跨域配置安装依赖注册注册跨域中间件设置设置跨域中间件添加白名单跨域支持允许所有的跨域请求是目前前后端分离项目中最流行的跨域身份验证解决方案使用添加配置注册配置鉴权方式全局权限配置设置身份认证的方式认证认证认证设置限流类型设置限流频次未认证用户每天次认证用户每分钟次设置过滤器设置全局排序设置全局分页设置每页数据量设置自动生成接口文档自定义异常处理路由中添加登录认证配置鉴权配置访问官方文档自定义配置鉴权配置后端项目实战项目开发配置安装依赖安装基本框架一般可以安装安装框架安装数据库操作安装图像处理库用于图片上传操作安装富文本编辑器安装过滤器安装跨域安装自动生成接口文档安装鉴权配置文件设置跨域设置富文本编辑器注册应用注释掉设置跨域中间件支持跨域请求删除原有的配置支持前后端分离更改数据库为设置语言时区允许所有用户跨域访问指定自定义用户类模型创建模型类中自带的用户认证模型类用户表手机号头像用户是否禁用用户表收获地址表与上面的模型类进行关联删除所属用户其所有地址记录都被删除所属用户联系人手机号码省份城市区县详细地址是否为默认地址收获地址表省市区县地址表上级地区名区域等级省市区县地址表验证码表手机号码验证码创建时间验证码表配置刷新视图使用中提供的刷新视图配置一下路由即可实现刷新配置检验刷新校验开发问题导入路由的包引发的问题修改后在的配置中使用函数会自动根据提供的字符串路径来加载相应的模块帮助简化配置功能这样就无需手动导入太多的包了同时字符串路径是一种懒加载的方式只有当请求匹配到时才会去导入对应的模块示例对比显示写法不推荐字符串路径写法推荐短信验证码短信服务听雨危楼博客园容联云短信错误码短信错误码项目开发常用目录结构说明通常用于存放项目的启动脚本存放主程序业务逻辑源代码通常用于存放项目的接口文件使得项目能够在启动后外部通信存放操作数据库相关文件主要用于与数据库交互存放程序中常用的自定义模块存放项目所需要的配置文件存放项目运行时所产生的日志文件存放项目的详细说明文档存放项目中所需要的第三方插件存放项目中大部分需要都能使用到的功能相当于公共插件存放项目测试代码存放项目中所需要的静态文件存放项目中所需要的模版文件模型中的视图存放项目中的主流算法模型中的控制存放项目中与数据库打交道的脚本模型中的模型项目启动脚本在项目的根目录下或目录下也叫安装部署打包的脚本一键安装所需要的所有依赖环境文件夹下项目配置文件有的是脚本而有的是存放所有项目的第三方依赖库模块的名字及版本避免在安装依赖时漏掉软件包项目整体描述信息设计思路设计目标等描述项目每个版本的更新信息说明版本号更新内容修复了哪些问题等保存网站信息和网站建设者信息项目基于的许可协议规定爬虫程序能够获取本网站的哪些信息实战项目商业模式介绍开发流程项目架构安装拓展安装跨域配置同源协议域名端口都需要一致才同源否则就得使用跨域配置安装跨域注册注册框架注册跨域注册应用配置中间件跨域配置放在第一位添加白名单允许哪些主机域名访问后端配置白名单跨域时允许携带短信验证码目的防止恶意用户暴力测试短信接口频繁发送短信解决方案每次发送短信验证码时再数据库中记录一个值并设置该值创建管道把多次操作装入管道中将来一次性执行减少连接操作分布式异步消息队列系统搭建好服务启动在下如果组件只是收到任务但不执行也就是说不会有任务执行结果出来安装启动官方解释参考解决方方案注意不支持所以想要上运行就需要额外安装而在和中是支持的但是推荐使用这个文档会完善很多并且一直在维护和邮件发送参考资料使用邮箱发送邮件邮箱的设置官网使用内置邮件功能发邮件听雨危楼博客园配置邮箱发送进入邮箱设置获取授权码在第三方客户端也就是中配置对应的授权码和端口号发送邮箱配置邮箱是否使用安全传输协议用于在两个通信应用程序之间提供保密性和数据完整性是否使用加密企业邮箱要求使用发送邮件的邮箱的服务器这里用了邮箱发件箱的服务器端口发送邮件的邮箱地址发送邮件的邮箱密码这里使用的是授权码此字段是可选的用来配置收件人列表发送邮件小灰灰的邮件我是小灰灰特地来给你发送邮件啦陈斌邮箱邮件发送成功发送邮箱分布式文件系统开发问题生成表字段注释参考出现报错问题详细问题出现项目根目录根目录下的子目录有查了好多的网上资料结果发现是路径问题很奇怪似乎不能使用绝对路径只能使用相对路径才能运行成功使用绝对路径报错使用相对路径运行成功一直进入不到断点中直接跳出结果的时候一直进入不到断点中甚至直接跳出运行结果最后直接运行结束解决方案一直显示正在搜集数据使用请求数据来对后端进行调试结果过程一直在显示搜集数据解决方案重新运行就有数据了框架数据库数据库进阶数据库运维与部署数据处理与分析人工智能',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-01 10:07:49',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://ts1.cn.mm.bing.net/th/id/R-C.de65fd6b710b4904061b3637649bf062?rik=Hy2PjLeVDNNbYg&amp;riu=http%3a%2f%2fecyacg.net%2fwp-content%2fuploads%2f2019%2f09%2f63-1Z305143K2963.jpg&amp;ehk=%2buit7eUiGsSP8qbWyrb%2bbzslSmkS1C5Cm%2b71EtFpJiQ%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="个人博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">XiaoHuiHuiBlog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 项目</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/moyun/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 墨运</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/lintu/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 灵途</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/lingyi/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 凌医</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 小工具</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 飞书转md</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Django/" style="font-size: 1.05rem;">Django<sup>1</sup></a><a href="/tags/git%E9%85%8D%E7%BD%AE/" style="font-size: 1.05rem;">git配置<sup>1</sup></a><a href="/tags/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/" style="font-size: 1.05rem;">产品经理<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Django/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Django</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Django后端框架学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-09-01T02:07:49.359Z" title="更新于 2024-09-01 10:07:49">2024-09-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">21k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>92分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Django后端框架学习"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为中山"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>中山</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://tse3-mm.cn.bing.net/th/id/OIP-C.q-lqnbLL5Q7-geuBhnjXJAHaEK?w=331&amp;h=186&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.9&amp;pid=1.7&amp;_r_=974c732c-0d44-8a84-8d27-93def5c587ad"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/"><header><a href="/tags/Django/" tabindex="-1" itemprop="url">Django</a><h1 id="CrawlerTitle" itemprop="name headline">Django后端框架学习</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">xiaohuihui</span><time itemprop="dateCreated datePublished" datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time><time itemprop="dateCreated datePublished" datetime="2024-09-01T02:07:49.359Z" title="更新于 2024-09-01 10:07:49">2024-09-01</time></header><h1 id="python容器入门"><a href="#python容器入门" class="headerlink" title="python容器入门"></a>python容器入门</h1><p>一般python数据容器分为5类，列表list，元组tuple，字符串str，集合set，字典dict</p>
<h2 id="list列表"><a href="#list列表" class="headerlink" title="list列表"></a>list列表</h2><p>列表语法定义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="string">&quot;iteheima&quot;</span>,<span class="literal">true</span>]</span><br><span class="line">a=<span class="title function_">list</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>注意：list表中的元素可以是不同的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image1.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image2.png" alt="Image"></p>
<p>列表相关函数</p>
<p>I. 查找某元素的下标，如果找不到就报错ValueError</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title function_">print</span>(a.<span class="title function_">index</span>(<span class="number">2</span>)) <span class="comment">//下标为1</span></span><br></pre></td></tr></table></figure>

<p>II.在指定下标位置，插入指定元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">a.<span class="title function_">insert</span>(<span class="number">2</span>,[<span class="string">&quot;itheima&quot;</span>,<span class="number">12313</span>])</span><br><span class="line"><span class="title function_">print</span>(a)<span class="comment">// [1, 2, [&#x27;itheima&#x27;, 12313], 4]</span></span><br></pre></td></tr></table></figure>

<p>III. 追加到尾部元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">a.<span class="title function_">append</span>([<span class="string">&quot;itheima&quot;</span>,<span class="number">12</span>])</span><br><span class="line"><span class="title function_">print</span>(a) <span class="comment">//[1, 2, 4, [&#x27;itheima&#x27;, 12]]</span></span><br></pre></td></tr></table></figure>

<p>IV. 追加元素方式extend，将其他数据容器内容取出，依次追加到列表尾部,注意这个会修改原list</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">b=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="string">&quot;3123&quot;</span>]</span><br><span class="line">a.<span class="title function_">extend</span>(b)</span><br><span class="line"><span class="title function_">print</span>(a) <span class="comment">//[1, 3, 4, 5, 1, 3, 4, 5, &#x27;3123&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>V.删除元素，del 删除和pop删除</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">del a[<span class="number">2</span>]</span><br><span class="line"><span class="title function_">print</span>(a)</span><br><span class="line">element=a.<span class="title function_">pop</span>(<span class="number">1</span>)</span><br><span class="line"><span class="title function_">print</span>(a,element)</span><br><span class="line"><span class="comment">//[1, 3, 5]</span></span><br><span class="line"><span class="comment">//[1, 5] 3</span></span><br></pre></td></tr></table></figure>

<p>VI. 删除某元素在列表中的第一个匹配项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="string">&quot;11&quot;</span>,<span class="string">&quot;12&quot;</span>,<span class="string">&quot;11&quot;</span>,<span class="string">&quot;123&quot;</span>]</span><br><span class="line">a.<span class="title function_">remove</span>(<span class="string">&quot;11&quot;</span>)</span><br><span class="line"><span class="title function_">print</span>(a)<span class="comment">//[&#x27;12&#x27;, &#x27;11&#x27;, &#x27;123&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>VII. 清空列表 clear()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="string">&quot;11&quot;</span>,<span class="string">&quot;12&quot;</span>,<span class="string">&quot;11&quot;</span>,<span class="string">&quot;123&quot;</span>]</span><br><span class="line">a.<span class="title function_">clear</span>()</span><br><span class="line"><span class="title function_">print</span>(a)<span class="comment">//[]</span></span><br></pre></td></tr></table></figure>

<p>VIII. 统计某一个元素在列表中的数量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">56</span>]</span><br><span class="line"><span class="title function_">print</span>(a.<span class="title function_">count</span>(<span class="number">3</span>)) <span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<p>VIIII. 计算全部元素数量长度 len</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JavaScript</span></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">56</span>]</span><br><span class="line"><span class="title function_">print</span>(<span class="title function_">len</span>(a)) <span class="comment">//8</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image3.png" alt="Image"></p>
<h2 id="tuple元组"><a href="#tuple元组" class="headerlink" title="tuple元组"></a>tuple元组</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">由于列表是可以进行修改的，如果想要的信息，不被修改，列表就不合适，此时就是使用元组。</span><br><span class="line">元组同列表一样，都是可以封装多个，不同类型的元素在内，但是最大的不同在于，一旦元组定义完成，就不可修改，相当于一个只读的list</span><br><span class="line">所以当我们需要在程序内封装数据，又不希望封装的数据被篡改，那么元组就非常合适</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image4.png" alt="Image"></p>
<p>注意定义单个元素要往后面添加逗号，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 定义单个元素</span></span><br><span class="line">t=(<span class="string">&quot;helloword&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(t)) <span class="comment">#&lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line">t1=(<span class="string">&quot;hellow&quot;</span>,)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(t1)) <span class="comment">#&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line">t2=(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(t2)) <span class="comment">#&lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p>下标索引取出内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">t=((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>))</span><br><span class="line"><span class="built_in">print</span>(t[<span class="number">1</span>][<span class="number">2</span>])<span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image5.png" alt="Image"></p>
<h2 id="str字符串"><a href="#str字符串" class="headerlink" title="str字符串"></a>str字符串</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image6.png" alt="Image"></p>
<p>注意：字符串同元组一样，也是一个无法修改的数据容器</p>
<p>字符串的常用操作：</p>
<p>查找特定字符串的下标索引值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;itecast and iteherma&quot;</span></span><br><span class="line"><span class="built_in">print</span>(myStr.index(<span class="string">&quot;and&quot;</span>))  <span class="comment"># 8</span></span><br></pre></td></tr></table></figure>

<p>字符串的替换，其本质并不是修改原字符串本身而是得到一个新字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;itecast and iteherma&quot;</span></span><br><span class="line">newMyStr=myStr.replace(<span class="string">&quot;it&quot;</span>,<span class="string">&quot;xiaohuihui&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(newMyStr) <span class="comment">#xiaohuihuiecast and xiaohuihuieherma</span></span><br></pre></td></tr></table></figure>

<p>字符串分割，按照分隔符划分多个字符串，并存入列表对象中，字符串本身不会改变，而是直接得到一个新的列表对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;this is my first python&quot;</span></span><br><span class="line">newMyStrList=myStr.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(newMyStrList) <span class="comment"># [&#x27;this&#x27;, &#x27;is&#x27;, &#x27;my&#x27;, &#x27;first&#x27;, &#x27;python&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>字符串规整操作（去除前后字符），传入的“12”，是按照“1”和“2”移除的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;  12this is my first python12  &quot;</span></span><br><span class="line">newStr=myStr.strip()</span><br><span class="line"><span class="built_in">print</span>(newStr)</span><br><span class="line"></span><br><span class="line">myStr1=<span class="string">&quot;12this is my first python12&quot;</span></span><br><span class="line">newStr1=myStr1.strip(<span class="string">&quot;12&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(newStr1)</span><br><span class="line"><span class="comment"># 12this is my first python12</span></span><br><span class="line"><span class="comment"># this is my first python</span></span><br></pre></td></tr></table></figure>

<p>统计字符串中某字符串出现的次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;itheima and itcast&quot;</span></span><br><span class="line"><span class="built_in">print</span>(myStr.count(<span class="string">&quot;and&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(myStr.count(<span class="string">&quot; &quot;</span>))</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<p>统计字符串长度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myStr=<span class="string">&quot;itheima and itcast&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(myStr))</span><br></pre></td></tr></table></figure>

<p>拓展：字符串比较大小</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image7.png" alt="Image"></p>
<p>注意：字符串的比较就是，不管长度是否一样，一位位进行对比，如果有其中一位比别人大，那么整体就大</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;比较相同长度，不同大小:<span class="subst">&#123;<span class="string">&#x27;a&#x27;</span>&gt;<span class="string">&#x27;A&#x27;</span>&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;比较不同长度，相同大小：<span class="subst">&#123;<span class="string">&#x27;aaa&#x27;</span>&gt;<span class="string">&#x27;aa&#x27;</span>&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;比较不同长度，不同大小:<span class="subst">&#123;<span class="string">&#x27;abc&#x27;</span>&gt;=<span class="string">&#x27;bcde&#x27;</span>&#125;</span>&quot;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">比较相同长度，不同大小:True</span></span><br><span class="line"><span class="string">比较不同长度，相同大小：True</span></span><br><span class="line"><span class="string">比较不同长度，不同大小:False</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="set集合"><a href="#set集合" class="headerlink" title="set集合"></a>set集合</h2><p>主要特点，筛选删除重复元素，保证集合内部元素的唯一性，且元素之间无序性，因此集合不支持下标索引访问</p>
<p>添加新元素add</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;1231&quot;</span>,<span class="number">23</span>&#125;</span><br><span class="line">set1.add(<span class="number">34</span>)</span><br><span class="line"><span class="built_in">print</span>(set1) <span class="comment"># &#123;34, &#x27;hello&#x27;, &#x27;1231&#x27;, 23&#125;</span></span><br></pre></td></tr></table></figure>

<p>移除元素remove</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;1231&quot;</span>,<span class="number">23</span>&#125;</span><br><span class="line">set1.add(<span class="number">34</span>)</span><br><span class="line"><span class="built_in">print</span>(set1) <span class="comment"># &#123;&#x27;hello&#x27;, &#x27;1231&#x27;, 34, 23&#125;</span></span><br><span class="line">set1.remove(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(set1) <span class="comment"># &#123;&#x27;1231&#x27;, 34, 23&#125;</span></span><br></pre></td></tr></table></figure>

<p>从集合中随机取出元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;1231&quot;</span>,<span class="number">23</span>&#125;</span><br><span class="line">set1.add(<span class="number">34</span>)</span><br><span class="line"><span class="built_in">print</span>(set1)</span><br><span class="line">element=set1.pop()</span><br><span class="line"><span class="built_in">print</span>(element)</span><br><span class="line"><span class="built_in">print</span>(set1)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;34, &#x27;hello&#x27;, &#x27;1231&#x27;, 23&#125;</span></span><br><span class="line"><span class="string">34</span></span><br><span class="line"><span class="string">&#123;&#x27;hello&#x27;, &#x27;1231&#x27;, 23&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>清空集合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;1231&quot;</span>,<span class="number">23</span>&#125;</span><br><span class="line">set1.clear()</span><br><span class="line"><span class="built_in">print</span>(set1) <span class="comment"># set()</span></span><br></pre></td></tr></table></figure>

<p>取两个集合的差集difference</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 这里是取出集合set1有但是set2没有的元素</span></span><br><span class="line">set1=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">set2=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">set3=set1.difference(set2)</span><br><span class="line"><span class="built_in">print</span>(set3) <span class="comment"># &#123;1&#125;</span></span><br></pre></td></tr></table></figure>

<p>消除2个集合的差集difference_update</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 这里是在set1内，删除和set2相同的元素，结果是set1被修改，set2不变</span></span><br><span class="line">set1=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">set2=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">set1.difference_update(set2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;消除后的set1&quot;</span>,set1) <span class="comment"># 消除后的set1 &#123;1&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>合并集合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">set2=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">set3=set1.union(set2)</span><br><span class="line"><span class="built_in">print</span>(set3) <span class="comment">#&#123;1, 2, 3, 4, 5, 6&#125;</span></span><br></pre></td></tr></table></figure>

<p>统计集合数量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">set1=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">set2=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">set3=set1.union(set2)</span><br><span class="line"><span class="built_in">print</span>(set3) <span class="comment">#&#123;1, 2, 3, 4, 5, 6&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(set3)) <span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<h2 id="dict字典，映射"><a href="#dict字典，映射" class="headerlink" title="dict字典，映射"></a>dict字典，映射</h2><p> 字典虽然和集合一样都是使用{}来存储元素，但是字典元素是一个个键值对，同样也是没有下标索引的，意味着同样是元素之间具有无序性，但是字典可以通过key值来取得对应的Value</p>
<p>字典新增元素，注意key不可以重复，否则就是更新操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;&#125;</span><br><span class="line">dic1[<span class="string">&quot;xiaohuihui&quot;</span>]=<span class="number">123</span></span><br><span class="line"><span class="built_in">print</span>(dic1) <span class="comment"># &#123;&#x27;xiaohuihui&#x27;: 123&#125;</span></span><br></pre></td></tr></table></figure>

<p>更新元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;&#125;</span><br><span class="line">dic1[<span class="string">&quot;xiaohuihui&quot;</span>]=<span class="number">123</span></span><br><span class="line"><span class="built_in">print</span>(dic1)</span><br><span class="line">dic1[<span class="string">&quot;xiaohuihui&quot;</span>]=<span class="number">12313131</span></span><br><span class="line"><span class="built_in">print</span>(dic1)</span><br><span class="line"><span class="comment"># &#123;&#x27;xiaohuihui&#x27;: 123&#125;</span></span><br><span class="line"><span class="comment"># &#123;&#x27;xiaohuihui&#x27;: 12313131&#125;</span></span><br></pre></td></tr></table></figure>

<p>删除元素pop</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;&#125;</span><br><span class="line">dic1[<span class="string">&quot;xiaohuihui&quot;</span>]=<span class="number">123</span></span><br><span class="line"><span class="built_in">print</span>(dic1)</span><br><span class="line">dic1[<span class="string">&quot;xiaohuihui&quot;</span>]=<span class="number">12313131</span></span><br><span class="line"><span class="built_in">print</span>(dic1)</span><br><span class="line">dic1[<span class="string">&quot;Time&quot;</span>]=<span class="number">2008</span></span><br><span class="line"><span class="built_in">print</span>(dic1)</span><br><span class="line">element=dic1.pop(<span class="string">&quot;Time&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dic1,element)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;&#x27;xiaohuihui&#x27;: 12313131, &#x27;Time&#x27;: 2008&#125;</span></span><br><span class="line"><span class="string">&#123;&#x27;xiaohuihui&#x27;: 12313131&#125; 2008</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>清空字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dict1.clear()</span><br></pre></td></tr></table></figure>

<p>获取全部的key</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;</span><br><span class="line">    <span class="string">&quot;xioahuihui&quot;</span>:<span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;Hack&quot;</span>:<span class="number">33</span>,</span><br><span class="line">    <span class="string">&quot;Tom&quot;</span>:<span class="number">222</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(dic1.keys()) <span class="comment"># dict_keys([&#x27;xioahuihui&#x27;, &#x27;Hack&#x27;, &#x27;Tom&#x27;])</span></span><br></pre></td></tr></table></figure>

<p>统计数量长度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;</span><br><span class="line">    <span class="string">&quot;xioahuihui&quot;</span>:<span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;Hack&quot;</span>:<span class="number">33</span>,</span><br><span class="line">    <span class="string">&quot;Tom&quot;</span>:<span class="number">222</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(dic1))</span><br></pre></td></tr></table></figure>

<h2 id="数据容器特点对比"><a href="#数据容器特点对比" class="headerlink" title="数据容器特点对比"></a>数据容器特点对比</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image8.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image9.png" alt="Image"></p>
<p> 注意这5类容器都是可以互相转换的，如字典转列表，字符串转列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">dic1=&#123;</span><br><span class="line">    <span class="string">&quot;xioahuihui&quot;</span>:<span class="number">123</span>,</span><br><span class="line">    <span class="string">&quot;Hack&quot;</span>:<span class="number">33</span>,</span><br><span class="line">    <span class="string">&quot;Tom&quot;</span>:<span class="number">222</span>,</span><br><span class="line">&#125;</span><br><span class="line">str1=<span class="string">&quot;xiaohuihui&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字典转列表&quot;</span>,<span class="built_in">list</span>(dic1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串转列表&quot;</span>,<span class="built_in">list</span>(str1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字典转元组&quot;</span>,<span class="built_in">tuple</span>(dic1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串转元组&quot;</span>,<span class="built_in">tuple</span>(str1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字典转集合&quot;</span>,<span class="built_in">set</span>(dic1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;字符串转集合&quot;</span>,<span class="built_in">set</span>(str1))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">字典转列表 [&#x27;xioahuihui&#x27;, &#x27;Hack&#x27;, &#x27;Tom&#x27;]</span></span><br><span class="line"><span class="string">字符串转列表 [&#x27;x&#x27;, &#x27;i&#x27;, &#x27;a&#x27;, &#x27;o&#x27;, &#x27;h&#x27;, &#x27;u&#x27;, &#x27;i&#x27;, &#x27;h&#x27;, &#x27;u&#x27;, &#x27;i&#x27;]</span></span><br><span class="line"><span class="string">字典转元组 (&#x27;xioahuihui&#x27;, &#x27;Hack&#x27;, &#x27;Tom&#x27;)</span></span><br><span class="line"><span class="string">字符串转元组 (&#x27;x&#x27;, &#x27;i&#x27;, &#x27;a&#x27;, &#x27;o&#x27;, &#x27;h&#x27;, &#x27;u&#x27;, &#x27;i&#x27;, &#x27;h&#x27;, &#x27;u&#x27;, &#x27;i&#x27;)</span></span><br><span class="line"><span class="string">字典转集合 &#123;&#x27;Tom&#x27;, &#x27;Hack&#x27;, &#x27;xioahuihui&#x27;&#125;</span></span><br><span class="line"><span class="string">字符串转集合 &#123;&#x27;o&#x27;, &#x27;x&#x27;, &#x27;u&#x27;, &#x27;i&#x27;, &#x27;a&#x27;, &#x27;h&#x27;&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>5类容器sorted排序, 使用sorted排序会将排序完的结果放入列表中，最后返回值是一个列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">list1=[<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">4</span>]</span><br><span class="line">tuple1=(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">4</span>)</span><br><span class="line">str1=<span class="string">&quot;xiaohuihui123&quot;</span></span><br><span class="line">set1=&#123;<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">4</span>&#125;</span><br><span class="line">dict1=&#123;<span class="string">&quot;key3&quot;</span>:<span class="number">3</span>,<span class="string">&quot;key1&quot;</span>:<span class="number">1</span>,<span class="string">&quot;key2&quot;</span>:<span class="number">2</span>,<span class="string">&quot;key7&quot;</span>:<span class="number">7</span>,<span class="string">&quot;key5&quot;</span>:<span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;列表排序结果&quot;</span>,<span class="built_in">sorted</span>(list1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;元组排序结果&quot;</span>,<span class="built_in">sorted</span>(tuple1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字符串排序结果&quot;</span>,<span class="built_in">sorted</span>(str1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;集合排序结果&quot;</span>,<span class="built_in">sorted</span>(set1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字典排序结果&quot;</span>,<span class="built_in">sorted</span>(dict1))</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;列表反向排序结果&quot;</span>,<span class="built_in">sorted</span>(list1,reverse=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;元组反向排序结果&quot;</span>,<span class="built_in">sorted</span>(tuple1,reverse=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字符串反向排序结果&quot;</span>,<span class="built_in">sorted</span>(str1,reverse=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;集合反向排序结果&quot;</span>,<span class="built_in">sorted</span>(set1,reverse=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字典反向排序结果&quot;</span>,<span class="built_in">sorted</span>(dict1,reverse=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">列表排序结果 [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string">元组排序结果 [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string">字符串排序结果 [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;a&#x27;, &#x27;h&#x27;, &#x27;h&#x27;, &#x27;i&#x27;, &#x27;i&#x27;, &#x27;i&#x27;, &#x27;o&#x27;, &#x27;u&#x27;, &#x27;u&#x27;, &#x27;x&#x27;]</span></span><br><span class="line"><span class="string">集合排序结果 [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string">字典排序结果 [&#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;, &#x27;key5&#x27;, &#x27;key7&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">列表反向排序结果 [5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="string">元组反向排序结果 [5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="string">字符串反向排序结果 [&#x27;x&#x27;, &#x27;u&#x27;, &#x27;u&#x27;, &#x27;o&#x27;, &#x27;i&#x27;, &#x27;i&#x27;, &#x27;i&#x27;, &#x27;h&#x27;, &#x27;h&#x27;, &#x27;a&#x27;, &#x27;3&#x27;, &#x27;2&#x27;, &#x27;1&#x27;]</span></span><br><span class="line"><span class="string">集合反向排序结果 [5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="string">字典反向排序结果 [&#x27;key7&#x27;, &#x27;key5&#x27;, &#x27;key3&#x27;, &#x27;key2&#x27;, &#x27;key1&#x27;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="补充知识：序列"><a href="#补充知识：序列" class="headerlink" title="补充知识：序列"></a>补充知识：序列</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image10.png" alt="Image"></p>
<p>序列支持切片：即列表，元组，字符串，均支持进行切片操作，从一个序列中，取出一个子序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">语法：序列[起始下标：结束下标：步长]</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image11.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">myList=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">45</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="built_in">print</span>(myList[::])</span><br><span class="line"><span class="built_in">print</span>(myList[::<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(myList[::-<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">tuple1=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">33</span>)</span><br><span class="line"><span class="built_in">print</span>(tuple1[::])</span><br><span class="line"><span class="built_in">print</span>(tuple1[::-<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">str1=<span class="string">&quot;itheima and itcast&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1[:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(str1[::-<span class="number">2</span>])</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[1, 2, 3, 4, 45, 5, 6]</span></span><br><span class="line"><span class="string">[1, 3, 45, 6]</span></span><br><span class="line"><span class="string">[6, 45, 3, 1]</span></span><br><span class="line"><span class="string">(1, 2, 4, 5, 6, 7, 33)</span></span><br><span class="line"><span class="string">(33, 6, 4, 1)</span></span><br><span class="line"><span class="string">ithei</span></span><br><span class="line"><span class="string">tat n met</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="python函数进阶"><a href="#python函数进阶" class="headerlink" title="python函数进阶"></a>python函数进阶</h1><h2 id="函数多个返回值"><a href="#函数多个返回值" class="headerlink" title="函数多个返回值"></a>函数多个返回值</h2><p>按照多个返回值的顺序，写对应顺序的多个变量接收即可，支持不同类型的数据的return</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    a=&#123;<span class="string">&quot;Tom&quot;</span>:<span class="number">1231</span>,<span class="string">&quot;xaiohuihiu&quot;</span>:<span class="number">231</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line">    <span class="keyword">return</span> f1(),f2() </span><br><span class="line"></span><br><span class="line">x,y=test()</span><br><span class="line"><span class="built_in">print</span>(x,y) <span class="comment">#[1, 2, 3, 4] &#123;&#x27;Tom&#x27;: 1231, &#x27;xaiohuihiu&#x27;: 231&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="函数多种传参方式"><a href="#函数多种传参方式" class="headerlink" title="函数多种传参方式"></a>函数多种传参方式</h2><p>函数中有4种常见参数使用方式</p>
<p>位置参数</p>
<p>调用函数时，根据函数定义的参数位来传递参数，传递的参数和定义的参数顺序和个数必须一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image12.png" alt="Image"></p>
<p>关键字参数</p>
<p>可以让函数更加清晰，容易使用，同时也避免了参数的传入的顺序需求,但是如果有位置参数，则位置参数必须在关键字参数前面</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_info</span>(<span class="params">name,age,gender</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;name<span class="subst">&#123;name&#125;</span>,age<span class="subst">&#123;age&#125;</span>,gender<span class="subst">&#123;gender&#125;</span>,&quot;</span>)</span><br><span class="line">user_info(name=<span class="string">&quot;xiaohuhui&quot;</span>,age=<span class="number">18</span>,gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line">user_info(age=<span class="number">10</span>,name=<span class="string">&quot;Tom&quot;</span>,gender=<span class="string">&quot;女&quot;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">namexiaohuhui,age18,gender男,</span></span><br><span class="line"><span class="string">nameTom,age10,gender女,</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>缺省参数</p>
<p>缺省参数也叫默认参数，主要是给参数提供默认值，注意所有位置参数必须出现在默认参数前，包括函数定义和调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 这里就是位置参数必须出现在默认参数前</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_info</span>(<span class="params">age,gender,name=<span class="string">&quot;xiaohuihui&quot;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;name<span class="subst">&#123;name&#125;</span>,age<span class="subst">&#123;age&#125;</span>,gender<span class="subst">&#123;gender&#125;</span>,&quot;</span>)</span><br><span class="line">user_info(name=<span class="string">&quot;Lihua&quot;</span>,age=<span class="number">18</span>,gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line">user_info(age=<span class="number">10</span>,gender=<span class="string">&quot;女&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">nameLihua,age18,gender男,</span></span><br><span class="line"><span class="string">namexiaohuihui,age10,gender女,</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>不定长参数</p>
<p>这个比较有意思，不定长参数也叫可变参数，用于不确定调用时，传递多少个参数</p>
<p>I.位置传递的不定长</p>
<p>所有传入的参数都会被args变量收集，并且合并为一个元组，args是元组类型，这就是位置传递</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_info</span>(<span class="params">*args</span>):</span><br><span class="line">       <span class="built_in">print</span>(<span class="string">f&quot;args参数类型：<span class="subst">&#123;<span class="built_in">type</span>(args)&#125;</span>,内容为:<span class="subst">&#123;args&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">user_info(<span class="string">&quot;Lihua&quot;</span>,<span class="number">18</span>,<span class="string">&quot;男&quot;</span>)</span><br><span class="line">user_info(<span class="string">&quot;xiaohuihui&quot;</span>,&#123;<span class="number">12</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>&#125;)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">args参数类型：&lt;class &#x27;tuple&#x27;&gt;,内容为:(&#x27;Lihua&#x27;, 18, &#x27;男&#x27;)</span></span><br><span class="line"><span class="string">args参数类型：&lt;class &#x27;tuple&#x27;&gt;,内容为:(&#x27;xiaohuihui&#x27;, &#123;4, 12, 5&#125;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>II. 关键字传递的不定长</p>
<p>参数是“键&#x3D;值”键值对形式来传递的，都会被kwargs接受并合并转化字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_info</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;kwargs参数类型：<span class="subst">&#123;<span class="built_in">type</span>(kwargs)&#125;</span>,内容为:<span class="subst">&#123;kwargs&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">user_info(name=<span class="string">&quot;Lihua&quot;</span>,age=<span class="number">18</span>,gender=<span class="string">&quot;男&quot;</span>)</span><br><span class="line">user_info(age=<span class="number">10</span>,gender=<span class="string">&quot;女&quot;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">kwargs参数类型：&lt;class &#x27;dict&#x27;&gt;,内容为:&#123;&#x27;name&#x27;: &#x27;Lihua&#x27;, &#x27;age&#x27;: 18, &#x27;gender&#x27;: &#x27;男&#x27;&#125;</span></span><br><span class="line"><span class="string">kwargs参数类型：&lt;class &#x27;dict&#x27;&gt;,内容为:&#123;&#x27;age&#x27;: 10, &#x27;gender&#x27;: &#x27;女&#x27;&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image13.png" alt="Image"></p>
<p>注意这个函数可以作为另一个函数的参数进行传递，也就是说函数传入的作用在于，本质上是传递计算逻辑，而非传递计算数据，可以是乘法计算逻辑，减法计算逻辑等</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_func</span>(<span class="params">compute</span>):</span><br><span class="line">    result=compute(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;compute参数的类型是<span class="subst">&#123;<span class="built_in">type</span>(compute)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;计算结果：<span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">x,y</span>):</span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line">test_func(compute)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">compute参数的类型是&lt;class &#x27;function&#x27;&gt;</span></span><br><span class="line"><span class="string">计算结果：4</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>利用lamba函数定义匿名函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在函数定义中</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">关键字可以定义带有名称的匿名函数</span></span><br><span class="line"><span class="keyword">lambda</span>关键字可以定义匿名函数，也就是无名称函数</span><br><span class="line">有名称的<span class="keyword">def</span>函数，可以基于名称重复使用</span><br><span class="line">但是无名称的匿名函数，只可临时使用一次</span><br></pre></td></tr></table></figure>

<p>匿名函数定义语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lambda 传入参数： 函数体（一行代码）</span><br></pre></td></tr></table></figure>

<p>注意，匿名函数只能写一行代码，无法写多行代码，同时不用写return语句，默认就是return</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_func</span>(<span class="params">compute,a=<span class="number">0</span>,b=<span class="number">0</span></span>):</span><br><span class="line">    result=compute(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;compute参数的类型是<span class="subst">&#123;<span class="built_in">type</span>(compute)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;计算结果：<span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">test_func(<span class="keyword">lambda</span> x,y:x+y,<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">compute参数的类型是&lt;class &#x27;function&#x27;&gt;</span></span><br><span class="line"><span class="string">计算结果：6</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="Python-文件操作"><a href="#Python-文件操作" class="headerlink" title="Python 文件操作"></a>Python 文件操作</h1><h2 id="文件编码"><a href="#文件编码" class="headerlink" title="文件编码"></a>文件编码</h2><p>UTF-8是目前全球通用的编码格式，除非有特殊需求，否则一律使用UTF-8的格式进行文件编码即可</p>
<h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image14.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image15.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image16.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image17.png" alt="Image"></p>
<p>最后需要文件关闭，如果没有进行文件关闭操作，就会导致这个文件一直被python程序占用</p>
<p>With open 语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;python.txt&quot;</span>,<span class="string">&quot;r&quot;</span>，encoding=<span class="string">&quot;UTF-8&quot;</span>)<span class="keyword">as</span> f:</span><br><span class="line">    f.readline()</span><br></pre></td></tr></table></figure>

<p>通过with open语法可以在操作完成后自动关闭close文件，避免遗忘掉close方法</p>
<h2 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h2><p>在文件写入过程中，f.close()方法，带有flush刷新功能，将写入缓存区的内容刷新写入到硬盘中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&#x27;writer.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;我是小huihui12313131jack&quot;</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="文件追加"><a href="#文件追加" class="headerlink" title="文件追加"></a>文件追加</h2><p>基本和文件写入同理，除了需要改变模式model&#x3D;‘a’外基本就不需要修改什么</p>
<h1 id="python异常，模块与包"><a href="#python异常，模块与包" class="headerlink" title="python异常，模块与包"></a>python异常，模块与包</h1><h2 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h2><p>对bug进行提醒，不至于因为产生bug而导致程序崩溃</p>
<p>捕获异常的作用在于：提前假设某处会出现异常，做好提前准备，当真的出现异常的时候，可以有后续手段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    可能发生错误的代码</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    如果出现异常执行的代码</span><br></pre></td></tr></table></figure>

<p>指定异常捕获在于，由于一个程序的异常可能会出现多种多样，对于出现其他的异常，将不会捕获，而是直接捕获指定的异常，并进行处理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 捕获异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"><span class="keyword">except</span> NameError <span class="keyword">as</span> e: </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现名字异常&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f=<span class="built_in">open</span>(<span class="string">&#x27;11.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现文件异常&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>捕获多个异常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 捕获异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">    f=<span class="built_in">open</span>(<span class="string">&#x27;11.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> (NameError,ZeroDivisionError,FileNotFoundError) <span class="keyword">as</span> e: </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现名字异常&quot;</span>,e) <span class="comment"># 出现名字异常 name &#x27;name&#x27; is not defined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>捕获全部异常Exception：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 捕获异常</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">    f=<span class="built_in">open</span>(<span class="string">&#x27;11.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e: </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;出现名字异常&quot;</span>,e) <span class="comment"># 出现名字异常 name &#x27;name&#x27; is not defined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>finally表示无论是否异常都要执行的代码，例如关闭文件等</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image18.png" alt="Image"></p>
<h2 id="异常传递"><a href="#异常传递" class="headerlink" title="异常传递"></a>异常传递</h2><p>异常具有传递性的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image19.png" alt="Image"></p>
<h1 id="python模块"><a href="#python模块" class="headerlink" title="python模块"></a>python模块</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image20.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image21.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image22.png" alt="Image"></p>
<h2 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h2><p>测试模块</p>
<p>在实际开发中，当一个开发人员编写完一个模块后，为了让模块能够在项目中达到想要的效果，那么就会在py文件中添加一些测试信息，但是如果调用这个模块的时候，就会打印出这样的信息，这是不行的，解决方案是，可以在测试模块中添加if__name&#x3D;&#x3D;’<strong>mian</strong>‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 测试模块</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> (a+b)</span><br><span class="line"><span class="comment"># 添加下面语句意味着只有执行当前文件时候才会打印对应信息</span></span><br><span class="line">if__name==<span class="string">&#x27;__mian__&#x27;</span>：</span><br><span class="line">    test(<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image23.png" alt="Image"></p>
<h2 id="Python-包"><a href="#Python-包" class="headerlink" title="Python 包"></a>Python 包</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image24.png" alt="Image"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">包的作用：当我们模块文件越来越多时，包可以帮助我们管理这些模块，包的作用就是包含多个模块，但是包的本质依然是模块</span><br></pre></td></tr></table></figure>

<p>注意：<strong>init</strong>.py相当于标识，如果文件夹中有__init__.py 说明该文件夹就是一个python包，如果没有就是一个普通文件夹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image25.png" alt="Image"></p>
<h2 id="第三方包"><a href="#第三方包" class="headerlink" title="第三方包"></a>第三方包</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image26.png" alt="Image"></p>
<h2 id="python可视化"><a href="#python可视化" class="headerlink" title="python可视化"></a>python可视化</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image27.png" alt="Image"></p>
<p>python转化成JSON字符串还是相当容易得</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image28.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Line</span><br><span class="line"><span class="comment"># 创建折线图对象</span></span><br><span class="line"></span><br><span class="line">line=Line()</span><br><span class="line"><span class="comment"># 添加X轴数据</span></span><br><span class="line">line.add_xaxis([<span class="string">&quot;China&quot;</span>,<span class="string">&quot;America&quot;</span>,<span class="string">&quot;English&quot;</span>,<span class="string">&quot;新加坡&quot;</span>,<span class="string">&quot;密西西比&quot;</span>])</span><br><span class="line"><span class="comment"># 添加y轴数据</span></span><br><span class="line">line.add_yaxis(<span class="string">&quot;GDP&quot;</span>,[<span class="number">30</span>,<span class="number">20</span>,<span class="number">10</span>,<span class="number">40</span>,<span class="number">20</span>])</span><br><span class="line"><span class="comment"># 生成图像</span></span><br><span class="line">line.render()</span><br><span class="line"><span class="comment"># 设置全局配置</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image29.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image30.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image31.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 处理美国，日本，印度数据</span></span><br><span class="line"><span class="comment"># 数据预处理</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Line </span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> LabelOpts,TitleOpts</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">to_change_data</span>(<span class="params">file_name,head_string,country_string,line</span>):</span><br><span class="line">    data=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>)<span class="keyword">as</span> f:</span><br><span class="line">            <span class="comment"># 处理文件数据</span></span><br><span class="line">            data=f.read().replace(head_string,<span class="string">&quot;&quot;</span>)</span><br><span class="line">            data=data[:-<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;文件不存在&quot;</span>)</span><br><span class="line">    data=json.loads(data)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">    trend_data=data[<span class="string">&#x27;data&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;trend&#x27;</span>]</span><br><span class="line">    x_data=trend_data[<span class="string">&#x27;updateDate&#x27;</span>][:<span class="number">314</span>]</span><br><span class="line">    y_data=trend_data[<span class="string">&#x27;list&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;data&#x27;</span>][:<span class="number">314</span>]</span><br><span class="line">    line.add_xaxis(x_data)</span><br><span class="line">    line.add_yaxis(country_string,y_data,label_opts=LabelOpts(is_show=<span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x_data,y_data</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    current_file_path=os.path.dirname(__file__)</span><br><span class="line">    <span class="built_in">print</span>(current_file_path)</span><br><span class="line">    <span class="comment"># 数据文件路径</span></span><br><span class="line">    American_data_file=current_file_path+<span class="string">&#x27;\美国.txt&#x27;</span></span><br><span class="line">    Japanese_data_file=current_file_path+<span class="string">&#x27;\日本.txt&#x27;</span></span><br><span class="line">    India_data_file=current_file_path+<span class="string">&#x27;\印度.txt&#x27;</span></span><br><span class="line">     <span class="comment"># 生成图表格</span></span><br><span class="line">    line=Line()</span><br><span class="line">    to_change_data(American_data_file,head_string=<span class="string">&quot;jsonp_1629344292311_69436(&quot;</span>,country_string=<span class="string">&quot;美国确证人数&quot;</span>,line=line)</span><br><span class="line">    to_change_data(Japanese_data_file,head_string=<span class="string">&quot;jsonp_1629350871167_29498(&quot;</span>,line=line,country_string=<span class="string">&quot;日本确证人数&quot;</span>)</span><br><span class="line">    to_change_data( India_data_file,head_string=<span class="string">&quot;jsonp_1629350745930_63180(&quot;</span>,line=line,country_string=<span class="string">&quot;印度确证人数&quot;</span>)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    line.set_global_opts(title_opts=TitleOpts(title=<span class="string">&quot;2020年美日印确证人数对比折线图&quot;</span>,pos_left=<span class="string">&quot;center&quot;</span>,pos_bottom=<span class="string">&quot;1%&quot;</span>))</span><br><span class="line">    line.render()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image32.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> VisualMapOpts</span><br><span class="line"><span class="built_in">map</span>=Map()</span><br><span class="line">data=[</span><br><span class="line">    (<span class="string">&quot;北京&quot;</span>,<span class="number">99</span>),</span><br><span class="line">    (<span class="string">&quot;上海&quot;</span>,<span class="number">199</span>),</span><br><span class="line"></span><br><span class="line">    (<span class="string">&quot;湖南&quot;</span>,<span class="number">299</span>),</span><br><span class="line"></span><br><span class="line">    (<span class="string">&quot;台湾&quot;</span>,<span class="number">399</span>),</span><br><span class="line">    (<span class="string">&quot;广东&quot;</span>,<span class="number">499</span>),</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>.add(<span class="string">&quot;中国地图&quot;</span>,data,<span class="string">&quot;china&quot;</span>)</span><br><span class="line"><span class="comment"># 设置全局属性</span></span><br><span class="line"><span class="built_in">map</span>.set_global_opts(</span><br><span class="line">    visualmap_opts=VisualMapOpts(</span><br><span class="line">        is_show=<span class="literal">True</span>,</span><br><span class="line">        is_piecewise=<span class="literal">True</span>,</span><br><span class="line">        pieces=[</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">1</span>,<span class="string">&quot;max&quot;</span>:<span class="number">9</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;1-9&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#CCFFFF&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">10</span>,<span class="string">&quot;max&quot;</span>:<span class="number">99</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;10-99&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#FF6666&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">100</span>,<span class="string">&quot;max&quot;</span>:<span class="number">500</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;100-500&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#9900333&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>.render()</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image33.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 进阶版</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取疫情数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_file</span>(<span class="params">file_name</span>):</span><br><span class="line">    data=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&quot;UTF-8&quot;</span>)<span class="keyword">as</span> f:</span><br><span class="line">          data=f.read()  </span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;文件不存在&quot;</span>,e)</span><br><span class="line">    <span class="keyword">return</span> json.loads(data)</span><br><span class="line"><span class="comment"># 转化数据</span></span><br><span class="line">file_name=<span class="string">&#x27;./疫情.txt&#x27;</span></span><br><span class="line">data=read_file(file_name=file_name)</span><br><span class="line">province_data_list=data[<span class="string">&#x27;areaTree&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;children&#x27;</span>]</span><br><span class="line">map_data=[]</span><br><span class="line"><span class="keyword">for</span> province_data <span class="keyword">in</span> province_data_list:</span><br><span class="line">    province_data_name=province_data[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    province_data_confirm=province_data[<span class="string">&#x27;total&#x27;</span>][<span class="string">&#x27;confirm&#x27;</span>]</span><br><span class="line">    map_data.append((province_data_name,province_data_confirm))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建地图实例</span></span><br><span class="line"><span class="built_in">map</span>=Map()</span><br><span class="line"><span class="built_in">map</span>.add(<span class="string">&quot;各省份确证人数&quot;</span>,map_data,<span class="string">&quot;china&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置全局属性</span></span><br><span class="line"><span class="built_in">map</span>.set_global_opts(</span><br><span class="line">    title_opts=TitleOpts(title=<span class="string">&quot;全国疫情地图&quot;</span>),</span><br><span class="line">    visualmap_opts=VisualMapOpts(</span><br><span class="line">        is_show=<span class="literal">True</span>,</span><br><span class="line">        is_piecewise=<span class="literal">True</span>,</span><br><span class="line">        pieces=[</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">1</span>,<span class="string">&quot;max&quot;</span>:<span class="number">99</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;1-99人&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#CCFFFF&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">100</span>,<span class="string">&quot;max&quot;</span>:<span class="number">999</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;100-999人&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#FFFF99&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">1000</span>,<span class="string">&quot;max&quot;</span>:<span class="number">4999</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;1000-49999人&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#FF9966&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">5000</span>,<span class="string">&quot;max&quot;</span>:<span class="number">9999</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;5000-9999人&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#FF6666&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">10000</span>,<span class="string">&quot;max&quot;</span>:<span class="number">99999</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;10000-99999人&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#CC3333&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;min&quot;</span>:<span class="number">100000</span>,<span class="string">&quot;label&quot;</span>:<span class="string">&quot;100000+&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;#990033&quot;</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"><span class="comment"># 绘制地图</span></span><br><span class="line"><span class="built_in">map</span>.render(<span class="string">&quot;xiaohuihui全国疫情自制地图.html&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>基础柱状图绘制</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image34.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar,Timeline</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> *</span><br><span class="line">file_name=<span class="string">&#x27;./1960-2019全球GDP数据.csv&#x27;</span></span><br><span class="line">data_lines=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&quot;GB2312&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data_lines=f.readlines()</span><br><span class="line">        data_lines.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># print(data_lines)</span></span><br><span class="line">        <span class="comment"># 定义字典</span></span><br><span class="line">        data_dict=&#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> data_lines:</span><br><span class="line">            year=<span class="built_in">int</span>(line.split(<span class="string">&quot;,&quot;</span>)[<span class="number">0</span>])</span><br><span class="line">            country=line.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            gdp=<span class="built_in">float</span>(line.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">2</span>])</span><br><span class="line">            <span class="keyword">try</span>: </span><br><span class="line">                data_dict[year].append([country,gdp])</span><br><span class="line">            <span class="keyword">except</span> KeyError:</span><br><span class="line">                data_dict[year]=[]</span><br><span class="line">                data_dict[year].append([country,gdp])</span><br><span class="line">            <span class="comment"># 创建时间对象</span></span><br><span class="line">            timeline=Timeline()</span><br><span class="line">            <span class="comment"># 排序年份</span></span><br><span class="line">            sorted_year_list=<span class="built_in">sorted</span>(data_dict.keys())</span><br><span class="line">            <span class="keyword">for</span> year <span class="keyword">in</span> sorted_year_list:</span><br><span class="line">                data_dict[year].sort(key=<span class="keyword">lambda</span> element: element[<span class="number">1</span>],reverse=<span class="literal">True</span>)</span><br><span class="line">                <span class="comment"># 去除前8名国家</span></span><br><span class="line">                year_data=data_dict[year][:<span class="number">8</span>]</span><br><span class="line">                x_data=[]</span><br><span class="line">                y_data=[]</span><br><span class="line">                <span class="keyword">for</span> country_gdp <span class="keyword">in</span> year_data:</span><br><span class="line">                    x_data.append(country_gdp[<span class="number">0</span>])</span><br><span class="line">                    y_data.append(country_gdp[<span class="number">1</span>])</span><br><span class="line">                <span class="comment"># 构建柱状图</span></span><br><span class="line">                bar=Bar()</span><br><span class="line">                x_data.reverse()</span><br><span class="line">                y_data.reverse()</span><br><span class="line">                bar.add_xaxis(x_data)</span><br><span class="line">                bar.add_yaxis(<span class="string">&quot;GDP(亿)&quot;</span>,y_data,label_opts=LabelOpts(position=<span class="string">&quot;right&quot;</span>))</span><br><span class="line">                <span class="comment"># 反转x轴和y轴</span></span><br><span class="line">                bar.reversal_axis()</span><br><span class="line">                timeline.add(bar,<span class="built_in">str</span>(year))</span><br><span class="line">    <span class="comment"># 设置时间线自动播放</span></span><br><span class="line"></span><br><span class="line">    timeline.add_schema(</span><br><span class="line">        play_interval=<span class="number">1000</span>,</span><br><span class="line">        is_timeline_show=<span class="literal">True</span>,</span><br><span class="line">        is_auto_play=<span class="literal">True</span>,</span><br><span class="line">        is_loop_play=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 绘制图</span></span><br><span class="line">    timeline.render(<span class="string">&quot;1960-2019全球GDP数据.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;文件不存在&quot;</span>,e)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="python对象"><a href="#python对象" class="headerlink" title="python对象"></a>python对象</h1><h2 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">类名称</span>：</span><br><span class="line">    类属性</span><br><span class="line">    类行为</span><br><span class="line">    </span><br><span class="line">    创建类对象的语法：</span><br><span class="line">    对象=类名称（）</span><br></pre></td></tr></table></figure>

<p>类属性：定义在类中的成员变量</p>
<p>类方法：定义在类中的函数（成员方法）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 举例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    name:<span class="literal">None</span></span><br><span class="line">    age:<span class="literal">None</span></span><br><span class="line">    address:<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">stu1=Student()</span><br><span class="line">stu1.name=<span class="string">&quot;xiaohuihui&quot;</span></span><br><span class="line">stu1.age=<span class="number">18</span></span><br><span class="line">stu1.address=<span class="string">&quot;广东省中山市&quot;</span></span><br><span class="line"><span class="built_in">print</span>(stu1.name)</span><br><span class="line"><span class="built_in">print</span>(stu1.age)</span><br><span class="line"><span class="built_in">print</span>(stu1.address)</span><br></pre></td></tr></table></figure>

<h2 id="类成员变量和成员方法"><a href="#类成员变量和成员方法" class="headerlink" title="类成员变量和成员方法"></a>类成员变量和成员方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    name:<span class="literal">None</span></span><br><span class="line">    age:<span class="literal">None</span></span><br><span class="line">    address:<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say_hi</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;helloworld<span class="subst">&#123;self.name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">stu1=Student()</span><br><span class="line">stu1.name=<span class="string">&quot;xiaohuihui&quot;</span></span><br><span class="line">stu1.age=<span class="number">18</span></span><br><span class="line">stu1.address=<span class="string">&quot;广东省中山市&quot;</span></span><br><span class="line">stu1.say_hi()</span><br></pre></td></tr></table></figure>

<p>这里的self本质上就是类对象本身的意思，只有通过self，成员方法才能访问类的成员变量，self出现在形参列表中，但是不占用参数位置，无需理会</p>
<h2 id="类对象"><a href="#类对象" class="headerlink" title="类对象"></a>类对象</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image35.png" alt="Image"></p>
<h2 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h2><p>Python类可以使用：<strong>init</strong>()方法，称之为构造方法</p>
<p>__init__可以实现在创建类对象（构造类）的时候，会自动执行，传入参数时，会自动将其传递给__init__方法使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;闹钟ID:<span class="subst">&#123;Clock1.<span class="built_in">id</span>&#125;</span>,价格为：<span class="subst">&#123;Clock1.price&#125;</span>&quot;</span>) <span class="comment">#闹钟ID:FD10023,价格为：23.99</span></span><br><span class="line">Clock1.ring()</span><br></pre></td></tr></table></figure>

<h2 id="其他内置方法"><a href="#其他内置方法" class="headerlink" title="其他内置方法"></a>其他内置方法</h2><p>__init__构造方法是Python类内置的方法之一，这些内置的类方法，各自有各自特殊的功能，这些内置方法我们称之为：魔术方法，注意在python类中，如果是以前面下划线和后面下划线包裹起来的方法都是魔术方法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image36.png" alt="Image"></p>
<p>__str__魔术方法，将类对象转化成字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 如果没有__str__魔术方法，直接打印输出则返回对象地址</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Clock1)  <span class="comment">#  &lt;__main__.Clock object at 0x0000014CFFCB8FD0&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#----------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 具有__str__魔术方法，则将其转化为字符串</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;我是闹钟<span class="subst">&#123;self.<span class="built_in">id</span>&#125;</span>,价格为<span class="subst">&#123;self.price&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>) <span class="comment"># 我是闹钟FD10023,价格为23.99</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Clock1)</span><br></pre></td></tr></table></figure>

<p>__lt__魔术方法，用于两个对象属性之间的比较，&lt;小于符号比较大小，其中的other表示传入另一个对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;我是闹钟<span class="subst">&#123;self.<span class="built_in">id</span>&#125;</span>,价格为<span class="subst">&#123;self.price&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.price&lt;other.price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>)</span><br><span class="line">Clock2=Clock(<span class="string">&quot;FD10024&quot;</span>,<span class="number">56.98</span>)</span><br><span class="line"><span class="built_in">print</span>(Clock1&lt;Clock2) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Clock1&gt;Clock2) <span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<p>__le__魔术方法，用于&lt;&#x3D; ,&gt;&#x3D;两种比较运算符上，比较对象中的某个属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;我是闹钟<span class="subst">&#123;self.<span class="built_in">id</span>&#125;</span>,价格为<span class="subst">&#123;self.price&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.price&lt;other.price</span><br><span class="line">    <span class="comment"># __le__魔术方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__le__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.price&gt;=other.price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>)</span><br><span class="line">Clock2=Clock(<span class="string">&quot;FD10024&quot;</span>,<span class="number">56.98</span>)</span><br><span class="line"><span class="built_in">print</span>(Clock1&lt;Clock2)</span><br><span class="line"><span class="built_in">print</span>(Clock1&gt;=Clock2)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>__eq__魔术方法，比较两个对象中的某个属性是否相等</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span>:</span><br><span class="line">    <span class="built_in">id</span>=<span class="literal">None</span></span><br><span class="line">    price=<span class="literal">None</span></span><br><span class="line">    age=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,<span class="built_in">id</span>,price,age</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">id</span>=<span class="built_in">id</span></span><br><span class="line">        <span class="variable language_">self</span>.price=price</span><br><span class="line">        <span class="variable language_">self</span>.age=age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;我是闹钟<span class="subst">&#123;self.<span class="built_in">id</span>&#125;</span>,价格为<span class="subst">&#123;self.price&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.price&lt;other.price</span><br><span class="line">    <span class="comment"># __le__魔术方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__le__</span>(<span class="params">self,other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.price&gt;=other.price</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, value: <span class="built_in">object</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.age==value.age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">import</span> winsound</span><br><span class="line">        winsound.Beep(<span class="number">2000</span>,<span class="number">3000</span>)</span><br><span class="line">Clock1=Clock(<span class="string">&quot;FD10023&quot;</span>,<span class="number">23.99</span>,age=<span class="number">1</span>)</span><br><span class="line">Clock2=Clock(<span class="string">&quot;FD10024&quot;</span>,<span class="number">56.98</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(Clock1&lt;Clock2) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Clock1&gt;=Clock2) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(Clock1==Clock2) <span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image37.png" alt="Image"></p>
<h3 id="私有成员变量和私有成员方法"><a href="#私有成员变量和私有成员方法" class="headerlink" title="私有成员变量和私有成员方法"></a>私有成员变量和私有成员方法</h3><p>私有成员变量定义：变量名以__开头（两个下划线）</p>
<p>私有成员方法定义：方法名同样以__开头（两个下划线）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image38.png" alt="Image"></p>
<p>注意私有成员无法被类对象使用个，但是可以被其他的成员使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span>:</span><br><span class="line">    __is_5g_enable=<span class="literal">False</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__check_5g</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.__is_5g_enable:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;5G已开启&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;5G已经关闭，使用4G网络&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_bt_5g</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.__check_5g()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在通话中....&quot;</span>)</span><br><span class="line">phone1=Phone()</span><br><span class="line">phone1.call_bt_5g()</span><br></pre></td></tr></table></figure>

<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>单继承定义：一个子类继承一个父类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">类名</span>（父类名）：</span><br><span class="line">    类内容体</span><br></pre></td></tr></table></figure>

<p>多继承定义：一个子类继承多个父类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">类名</span>（父类<span class="number">1</span>，父类<span class="number">2.</span>..):</span><br><span class="line">    类内容体</span><br></pre></td></tr></table></figure>

<p>注意：在多继承中，多个父类，如果有同名的成员，那么默认继承顺序从左到右为优先级，也就是先继承的保留，并且覆盖后面继承的同名方法或者同名变量</p>
<p>复写和使用父类成员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">复写：子类继承父类方法和成员后，如果对父类方法不满意，可以在子类中进行重新定义</span><br><span class="line">一旦复写父类成员，那么类对象调用成员的时候，就会调用复写后的新成员</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image39.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image40.png" alt="Image"></p>
<h2 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类型注解：在代码中涉及数据交互的地方，提供数据类型的注解（显示说明）</span><br><span class="line">主要功能：</span><br><span class="line">1. 帮助第三方IDE工具对代码进行类型推断，协助做代码提示</span><br><span class="line">帮助开发者自身对变量进行类型注解</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image41.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image42.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image43.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image44.png" alt="Image"></p>
<p>注意：类型注解本质上就是备注，就算标记做了，也不会使程序报错影响运行</p>
<p>Union类型注解用来描述混合的类型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image45.png" alt="Image"></p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image46.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image47.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image48.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AC</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 制冷</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="comment"># 制热</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 左右摇摆</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 美的空调</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Medi_AC</span>(<span class="title class_ inherited__">AC</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">slef</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调制冷&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">slef</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调制热&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调左右摇摆&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 格力空调</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Geli_AC</span>(<span class="title class_ inherited__">AC</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">slef</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调制冷&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">slef</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调制热&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调左右摇摆&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_cool</span>(<span class="params">ac:AC</span>):</span><br><span class="line">    ac.cool_wind()</span><br><span class="line"></span><br><span class="line">Medi:Medi_AC=Medi_AC()</span><br><span class="line">Geli:Geli_AC=Geli_AC()</span><br><span class="line"></span><br><span class="line">make_cool(Medi)</span><br><span class="line">make_cool(Geli)</span><br><span class="line"><span class="comment"># 美的空调制冷</span></span><br><span class="line"><span class="comment"># 格力空调制冷</span></span><br></pre></td></tr></table></figure>

<h1 id="Python-SQL入门实战"><a href="#Python-SQL入门实战" class="headerlink" title="Python SQL入门实战"></a>Python SQL入门实战</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image49.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image50.png" alt="Image"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL语句语法特征：</span><br><span class="line">SQL语言不区分大小写</span><br><span class="line">SQL可以单行或多行书写，最后必须以；结束</span><br><span class="line">SQL支持注释：</span><br><span class="line">     单行注释 ----注释内容</span><br><span class="line">单行注释 # 注释内容</span><br><span class="line">多行注释 /* 注释内容*/</span><br></pre></td></tr></table></figure>

<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image50.png" alt="Image"></p>
<h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image51.png" alt="Image"></p>
<h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image52.png" alt="Image"></p>
<p>分组聚合</p>
<p>一般根据具体需求按列进行分组，然后在组里面进行统计查询等相关操作</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image53.png" alt="Image"></p>
<p>排序和分页</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image54.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">select name,age <span class="keyword">from</span> student1  order by age asc;</span><br></pre></td></tr></table></figure>

<h2 id="pythonMysql实战"><a href="#pythonMysql实战" class="headerlink" title="pythonMysql实战"></a>pythonMysql实战</h2><p>安装第三方库pymysql</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure>

<p>操作数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> pymysql <span class="keyword">import</span> Connection</span><br><span class="line">mysql=Connection(</span><br><span class="line">    host=<span class="string">&quot;localhost&quot;</span>, <span class="comment"># 主机名IP</span></span><br><span class="line">    port=<span class="number">3306</span>, <span class="comment"># 端口号</span></span><br><span class="line">    user=<span class="string">&quot;root&quot;</span>, <span class="comment"># mysql账户</span></span><br><span class="line">    password=<span class="string">&quot;root&quot;</span> <span class="comment"># mysql 密码</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"> <span class="comment"># 获取游标对象，用于操作数据库语句</span></span><br><span class="line">cursor=mysql.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择数据库</span></span><br><span class="line">mysql.select_db(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 操作数据库</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select * from student1&quot;</span>)</span><br><span class="line"></span><br><span class="line">result: <span class="built_in">tuple</span>=cursor.fetchall()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">(23, &#x27;kk&#x27;, 18, &#x27;广东省深圳市&#x27;)</span></span><br><span class="line"><span class="string">(23, &#x27;kk&#x27;, 18, &#x27;广东省深圳市&#x27;)</span></span><br><span class="line"><span class="string">(175, &#x27;Mark Ward&#x27;, 47, &#x27;135 Central Avenue&#x27;)</span></span><br><span class="line"><span class="string">(482, &#x27;Douglas Fernandez&#x27;, 13, &#x27;653 Bank Street&#x27;)</span></span><br><span class="line"><span class="string">(683, &#x27;袁詩涵&#x27;, 32, &#x27;772 Lefeng 6th Rd&#x27;)</span></span><br><span class="line"><span class="string">(514, &#x27;严睿&#x27;, 76, &#x27;913 Kengmei 15th Alley&#x27;)</span></span><br><span class="line"><span class="string">(597, &#x27;Harry Schmidt&#x27;, 18, &#x27;928 Huanqu South Street 2nd Alley&#x27;)</span></span><br><span class="line"><span class="string">(519, &#x27;Pauline Ford&#x27;, 96, &#x27;593 3rd Section Hongxing Road, Jinjiang District&#x27;)</span></span><br><span class="line"><span class="string">(199, &#x27;Josephine Thompson&#x27;, 6, &#x27;657 Osney Mead&#x27;)</span></span><br><span class="line"><span class="string">(186, &#x27;郑子韬&#x27;, 42, &#x27;679 Dong Zhi Men, Dongcheng District&#x27;)</span></span><br><span class="line"><span class="string">(227, &#x27;Clara Hill&#x27;, 73, &#x27;742 West Houston Street&#x27;)</span></span><br><span class="line"><span class="string">(157, &#x27;曹睿&#x27;, 20, &#x27;633 Shennan E Rd, Cai Wu Wei, Luohu District&#x27;)</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>插入数据库</p>
<p>pymysql在执行数据插入或其他产生数据更改的sql语句时候，默认是需要提交更改的，即，通过代码确认这种更改行为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"> mysql=Connection(</span><br><span class="line">    host=<span class="string">&quot;localhost&quot;</span>, <span class="comment"># 主机名IP</span></span><br><span class="line">    port=<span class="number">3306</span>, <span class="comment"># 端口号</span></span><br><span class="line">    user=<span class="string">&quot;root&quot;</span>, <span class="comment"># mysql账户</span></span><br><span class="line">    password=<span class="string">&quot;root&quot;</span> <span class="comment"># mysql 密码</span></span><br><span class="line">    autocommit=<span class="literal">True</span> <span class="comment"># 设置自动提交</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>数据库实战演练</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1. 设计一个类，可以完成数据的封装</span></span><br><span class="line"><span class="string">2. 设计一个抽象类，定义文件读取的相关功能，并使用类实现具体功能</span></span><br><span class="line"><span class="string">3. 读取文件，生产数据对象</span></span><br><span class="line"><span class="string">4. 进行数据需求逻辑计算，计算每天的销售额</span></span><br><span class="line"><span class="string">5. 通过Pyecharts可视化出来</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span> </span><br><span class="line"><span class="keyword">from</span> pymysql <span class="keyword">import</span> Connection</span><br><span class="line"><span class="keyword">from</span> FileReader <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar</span><br><span class="line"><span class="keyword">from</span> pyecharts.options <span class="keyword">import</span> *</span><br><span class="line">file_path1=<span class="string">&#x27;./2011年1月销售数据.txt&#x27;</span></span><br><span class="line">file_path2=<span class="string">&#x27;./2011年2月销售数据JSON.txt&#x27;</span></span><br><span class="line">first_month_data=TextReader(file_path1).read_data()</span><br><span class="line">second_month_data=JSONTextReader(file_path2).read_data()</span><br><span class="line">all_data=first_month_data+second_month_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入数据库</span></span><br><span class="line">conn=Connection(</span><br><span class="line">    host=<span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    passwd=<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    autocommit=<span class="literal">True</span> <span class="comment"># 设置自动提交</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置游标对象</span></span><br><span class="line">cursor=conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据库</span></span><br><span class="line">database_name=<span class="string">&quot;pymysql_test&quot;</span></span><br><span class="line">sql=<span class="string">f&quot;create database if not exists <span class="subst">&#123;database_name&#125;</span>&quot;</span></span><br><span class="line">cursor.execute(sql)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否创建成功</span></span><br><span class="line">cursor.execute(<span class="string">f&quot;show databases like &#x27;<span class="subst">&#123;database_name&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">is_create=cursor.fetchone()</span><br><span class="line"><span class="keyword">if</span>(is_create):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;创建数据库<span class="subst">&#123;database_name&#125;</span>成功&quot;</span>)</span><br><span class="line">    <span class="comment"># 选择当前数据库</span></span><br><span class="line">    conn.select_db(database_name)</span><br><span class="line">    table_name=<span class="string">&#x27;orders&#x27;</span></span><br><span class="line">    <span class="comment"># 检查表是否存在并删除</span></span><br><span class="line">    check_table_sql = <span class="string">f&quot;show tables like &#x27;<span class="subst">&#123;table_name&#125;</span>&#x27;&quot;</span></span><br><span class="line">    cursor.execute(check_table_sql)</span><br><span class="line">    is_table_exist = cursor.fetchone()</span><br><span class="line">    <span class="keyword">if</span> is_table_exist:</span><br><span class="line">        drop_table_sql = <span class="string">f&quot;DROP TABLE IF EXISTS <span class="subst">&#123;table_name&#125;</span>&quot;</span></span><br><span class="line">        cursor.execute(drop_table_sql)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;表 <span class="subst">&#123;table_name&#125;</span> 已存在，已删除&quot;</span>)</span><br><span class="line">    <span class="comment"># 创建表</span></span><br><span class="line">    create_table=<span class="string">f&quot;CREATE TABLE IF NOT EXISTS <span class="subst">&#123;table_name&#125;</span> (order_date date,order_id mediumtext,money int,province varchar(255))&quot;</span></span><br><span class="line">    cursor.execute(create_table)</span><br><span class="line">    cursor.execute(<span class="string">f&quot;show tables like &#x27;<span class="subst">&#123;table_name&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    is_create_table=cursor.fetchone()</span><br><span class="line">    <span class="keyword">if</span>(is_create_table): </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;创建<span class="subst">&#123;table_name&#125;</span>表成功&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> record <span class="keyword">in</span> all_data:</span><br><span class="line">            <span class="comment"># 插入数据</span></span><br><span class="line">            insert_data=<span class="string">f&quot;INSERT INTO <span class="subst">&#123;table_name&#125;</span> VALUES (&#x27;<span class="subst">&#123;record.date&#125;</span>&#x27;, &#x27;<span class="subst">&#123;record.order_id&#125;</span>&#x27;, <span class="subst">&#123;record.money&#125;</span>, &#x27;<span class="subst">&#123;record.province&#125;</span>&#x27;)&quot;</span></span><br><span class="line">            cursor.execute(insert_data)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;完成插入，请检查数据库&quot;</span>)</span><br><span class="line">        <span class="comment"># 取出数据库数据</span></span><br><span class="line">        output_data=<span class="string">f&quot;select * from <span class="subst">&#123;table_name&#125;</span>&quot;</span></span><br><span class="line">        cursor.execute(output_data)</span><br><span class="line">        result:<span class="built_in">tuple</span>=cursor.fetchall()</span><br><span class="line">        <span class="keyword">if</span>(result):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">                <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;创建<span class="subst">&#123;table_name&#125;</span>表失败&quot;</span>)</span><br><span class="line">   </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;创建数据库<span class="subst">&#123;database_name&#125;</span>失败&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭数据库</span></span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h1 id="PySpark基础入门"><a href="#PySpark基础入门" class="headerlink" title="PySpark基础入门"></a>PySpark基础入门</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image55.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image56.png" alt="Image"></p>
<h2 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h2><p>安装第三方库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install pyspark</span><br></pre></td></tr></table></figure>

<p>2、 构建pyspark执行环境入口对象</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image57.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image58.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image59.png" alt="Image"></p>
<h2 id="RDD对象"><a href="#RDD对象" class="headerlink" title="RDD对象"></a>RDD对象</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image60.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image61.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image62.png" alt="Image"></p>
<h2 id="数据计算"><a href="#数据计算" class="headerlink" title="数据计算"></a>数据计算</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image63.png" alt="Image"></p>
<h1 id="python高级技巧"><a href="#python高级技巧" class="headerlink" title="python高级技巧"></a>python高级技巧</h1><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">闭包：在函数嵌套的前提下，内部函数使用了外部函数的变量，并且外部函数返回了内部函数，我们把这个使用外部函数变量的内部函数称为闭包</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image64.png" alt="Image"></p>
<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><p>装饰器本质上就是一个闭包，但是主要目的是在不破坏原有函数结构上，给原函数增加功能</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image65.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image66.png" alt="Image"></p>
<h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image67.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image68.png" alt="Image"></p>
<p>一般单例模式是构建一个类的实例对象，然后重复使用即可，防止重复构建实例对象导致内存问题，但是一般是用在工具类的场景 </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image69.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image70.png" alt="Image"></p>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image71.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image72.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image73.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image74.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 多线程</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 构建线程</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sing</span>(<span class="params">msg,msg2</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(msg,msg2)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dance</span>(<span class="params">msg</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建线程程序</span></span><br><span class="line">    thread1=threading.Thread(target=sing,args=(<span class="string">&quot;我想要唱歌&quot;</span>,<span class="string">&quot;yingyingying ~~~&quot;</span>))</span><br><span class="line">    thread2=threading.Thread(target=dance,kwargs=&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;我在跳湖，嘿嘿黑！！！&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启动线程</span></span><br><span class="line">    thread1.start()</span><br><span class="line">    thread2.start()</span><br></pre></td></tr></table></figure>

<h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><p>进程之间想要通信，就需要通过socket来进行</p>
<p>创建sokcet对象</p>
<p>绑定socket_server到指定IP和地址</p>
<p>服务端开始监听端口</p>
<p>接收客户端连接，获得连接对象</p>
<p>客户端连接后，通过recv方法，接受客户端发送的消息</p>
<p>通过conn（客户端当次连接对象），调用send方法可以回复消息</p>
<p>conn（客户端当次连接对象）和socket_server对象调用close方法，关闭连接</p>
<p>客户端程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建socket对象</span></span><br><span class="line">socket_client=socket.socket()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接端口</span></span><br><span class="line">socket_client.connect((<span class="string">&quot;localhost&quot;</span>,<span class="number">8888</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送消息请求</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&quot;请输入要发送的消息：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> msg==<span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    socket_client.send(msg.encode(<span class="string">&quot;UTF-8&quot;</span>))</span><br><span class="line">    <span class="comment"># 接收返回来的消息</span></span><br><span class="line">    recv_data=socket_client.recv(<span class="number">1024</span>).decode(<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;接收到的消息是:<span class="subst">&#123;recv_data&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">socket_client.close()</span><br></pre></td></tr></table></figure>

<p>服务端程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 服务端程序</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建sokcet对象</span></span><br><span class="line">socket_server=socket.socket()</span><br><span class="line"><span class="comment"># 绑定IP地址和监听端口</span></span><br><span class="line">socket_server.bind((<span class="string">&quot;localhost&quot;</span>,<span class="number">8888</span>))</span><br><span class="line"><span class="comment"># 确定监听客户端数量</span></span><br><span class="line">socket_server.listen(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;正在监听端口...&quot;</span>)</span><br><span class="line"><span class="comment"># 等待客户端连接，为阻塞态</span></span><br><span class="line">conn,address=socket_server.accept()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;接收到客户端的请求消息，客户端的信息为<span class="subst">&#123;address&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 接收客户端消息</span></span><br><span class="line">    recev_data:<span class="built_in">str</span>=conn.recv(<span class="number">1024</span>).decode(<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;接收到客户端的请求消息：<span class="subst">&#123;recev_data&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment"># 发送消息</span></span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&quot;给客户端发送消息：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> msg==<span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    conn.send(msg.encode(<span class="string">&quot;UTF-8&quot;</span>))</span><br><span class="line"><span class="comment"># 结束关闭连接</span></span><br><span class="line">conn.close()</span><br><span class="line">socket_server.close()</span><br></pre></td></tr></table></figure>

<h1 id="Django框架"><a href="#Django框架" class="headerlink" title="Django框架"></a>Django框架</h1><h2 id="教程文档"><a href="#教程文档" class="headerlink" title="教程文档"></a>教程文档</h2><p>Django Tutorial Part 2: 创建网站的地基 - 学习 Web 开发 | MDN</p>
<p>Django入门与实践-第1章:环境搭建 - 《Django入门与实践教程》 - 书栈网 · BookStack</p>
<p>Django框架官方文档：<a target="_blank" rel="noopener" href="https://docs.djangoproject.com/zh-hans/4.2/">https://docs.djangoproject.com/zh-hans/4.2/</a></p>
<p>注意这个是4.2的版本</p>
<p>学习资源：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fh4y1Z7jp/?spm_id_from=333.337.search-card.all.click&vd_source=02f6fc9eb9bacc3607cf8882db740b12">https://www.bilibili.com/video/BV1fh4y1Z7jp/?spm_id_from=333.337.search-card.all.click&amp;vd_source=02f6fc9eb9bacc3607cf8882db740b12</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image75.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image76.png" alt="Image"></p>
<h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>由于Django的版本比较多，与Python之间存在兼容性。比如有些应用需要在Django3.1+python3.7环境下开发。如果在一台主机上需要同时安装两套应用，则繁琐且容易出错，此时，可以使用Python虚拟环境来解决</p>
<p>Python venv虚拟环境</p>
<p>可以让每一个python应用单独使用一个环境，好处：每个应用拥有自己的开发环境，不会影响其他应用的环境。而且一旦删除虚拟环境，就可以单独删除干净，不会影响到其他应用的环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">venv与conda之间的关系：</span><br><span class="line">从功能上来说，conda结合了pip和venv的功能，但是一般是给数据科学的人使用的，而venv虚拟环境一般是给开发人员使用</span><br></pre></td></tr></table></figure>

<p>安装venv虚拟环境</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>

<p>创建虚拟环境</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">mkdir 创建对应目录</span><br><span class="line">virtualenv -p python解释器目录</span><br></pre></td></tr></table></figure>

<p>激活和退出虚拟环境</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 激活环境，进入对应目录的Script目录下</span></span><br><span class="line">activate</span><br><span class="line"><span class="comment"># 退出虚拟环境，在Script目录下</span></span><br><span class="line">deactivate.bat</span><br></pre></td></tr></table></figure>

<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">django-admin startproject 项目名称</span><br></pre></td></tr></table></figure>

<h2 id="创建应用"><a href="#创建应用" class="headerlink" title="创建应用"></a>创建应用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">python manage.py startapp 应用名称</span><br></pre></td></tr></table></figure>

<p>创建完应用需手工注册</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment">#settigns.py</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;django.contrib.admin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.auth&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.contenttypes&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.staticfiles&quot;</span>,</span><br><span class="line">    <span class="comment"># 手工注册应用</span></span><br><span class="line">    <span class="string">&quot;app3&quot;</span></span><br><span class="line">    <span class="comment"># 注册设置drf框架</span></span><br><span class="line">    <span class="string">&quot;rest_framework&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">python=<span class="number">3.12</span></span><br><span class="line">pip install django==<span class="number">5.0</span><span class="number">.3</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image77.png" alt="Image"></p>
<p>manage.py ：以后和项目交互基本上都是基于这个文件。一般都是终端输入python manage.py 【子命令】，一般情况下不应该编辑这个文件</p>
<p>setttings.py:本项目的设置项，以后和项目相关配置都是放在这个里面</p>
<p>urls.py：这个文件是用来配置url路由的。比如：<a target="_blank" rel="noopener" href="http://128.0.0.1/news/%E6%98%AF%E8%AE%BF%E9%97%AE%E6%96%B0%E9%97%BB%E5%88%97%E8%A1%A8%E9%A1%B5%EF%BC%8C%E8%BF%99%E4%BA%9B%E4%B8%9C%E8%A5%BF%E9%9C%80%E8%A6%81%E5%86%8D%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%8C%E6%88%90%E7%9A%84">http://128.0.0.1/news/是访问新闻列表页，这些东西需要再这个文件中完成的</a></p>
<p>wsgi.py：项目与WSGI协议兼容的web服务器入口，部署的时候需要用的，一般情况下也是不需要修改的</p>
<h2 id="Python前后端分离开发"><a href="#Python前后端分离开发" class="headerlink" title="Python前后端分离开发"></a>Python前后端分离开发</h2><h3 id="设计符合标准的RESTful接口"><a href="#设计符合标准的RESTful接口" class="headerlink" title="设计符合标准的RESTful接口"></a>设计符合标准的RESTful接口</h3><p>后端接口需要满足某些规范，这样大家都遵循一定的规范标准，会减少很多不必要的问题</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image78.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image79.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image80.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image81.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image82.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image83.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image84.png" alt="Image"></p>
<h2 id="Python-DjangoMysql数据库设置"><a href="#Python-DjangoMysql数据库设置" class="headerlink" title="Python DjangoMysql数据库设置"></a>Python DjangoMysql数据库设置</h2><p>创建mysql数据库</p>
<p>django框架，只能生产数据表，不会自动帮我们生成mysql数据库，所以需要自己在mysql数据库中创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">create database test2 charset=utf8</span><br></pre></td></tr></table></figure>

<p>Django配置使用mysql数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># 数据库配置文件</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">        <span class="comment"># Django 使用的数据库引擎，修改为mysql</span></span><br><span class="line">        <span class="string">&quot;ENGINE&quot;</span>: <span class="string">&quot;django.db.backends.mysql&quot;</span>,</span><br><span class="line">        <span class="comment"># 连接的数据库名</span></span><br><span class="line">        <span class="string">&quot;NAME&quot;</span>: BASE_DIR / <span class="string">&quot;db.sqlite3&quot;</span>,</span><br><span class="line">        <span class="comment"># 数据库登录账号</span></span><br><span class="line">        <span class="string">&quot;USER&quot;</span>:<span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="comment"># 数据库登录密码</span></span><br><span class="line">        <span class="string">&quot;PASSWORD&quot;</span>:<span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="comment"># 主机IP地址</span></span><br><span class="line">        <span class="string">&quot;HOST&quot;</span>:<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">        <span class="comment"># 主机端口</span></span><br><span class="line">        <span class="string">&quot;PORT&quot;</span>:<span class="number">3306</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 设置日志</span></span><br><span class="line">LOGGING=&#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;disable_existing_loggers&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&quot;handlers&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;console&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;level&quot;</span>:<span class="string">&quot;DEBUG&quot;</span>,</span><br><span class="line">            <span class="string">&quot;class&quot;</span>:<span class="string">&quot;logging.StreamHandler&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;loggers&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;django.db.backends&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;handlers&quot;</span>:[<span class="string">&quot;console&quot;</span>],</span><br><span class="line">            <span class="string">&quot;propagate&quot;</span>:<span class="literal">True</span>,</span><br><span class="line">            <span class="string">&quot;level&quot;</span>:<span class="string">&quot;DEBUG&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>安装依赖</p>
<p>django框架使用mysql：需要安装mysqlClient客户端</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install  mysqlclient</span><br></pre></td></tr></table></figure>

<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p>参考官网：docs.djangoproject.com</p>
<p>使用模型类，直接就可以在数据库建立对应的表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"> <span class="comment"># 建立表之后可以生成迁移文件</span></span><br><span class="line"> python manage.py makemigrations</span><br><span class="line"> <span class="comment"># </span></span><br><span class="line"> python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>常用模型字段</p>
<p>使用时需要引入django.db.models包：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image85.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image86.png" alt="Image"></p>
<p>字段选项</p>
<p>通过选项实现对字段的约束： </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image87.png" alt="Image"></p>
<p>关系字段类型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image88.png" alt="Image"></p>
<p>元选项</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image89.png" alt="Image"></p>
<h3 id="模型类查询方法"><a href="#模型类查询方法" class="headerlink" title="模型类查询方法"></a>模型类查询方法</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image90.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image91.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image92.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image93.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image94.png" alt="Image"></p>
<p>比较查询</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image95.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image96.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image97.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image98.png" alt="Image"></p>
<p>2， 使用Q对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Plain Text</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line"><span class="comment"># 逻辑与：多个条件同时成立，如：查询阅读数量大于40，评论数量大于35的数据</span></span><br><span class="line"><span class="comment"># 方法1：</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">filter</span>(read__get=<span class="number">40</span>,comment__get=<span class="number">35</span>)</span><br><span class="line"><span class="comment"># 方法2：</span></span><br><span class="line">NewInfo.objects.<span class="built_in">filter</span>(Q(read__get=<span class="number">40</span>)&amp; Q(comment__get=<span class="number">35</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 逻辑或 ：多个条件符合一个即可， 查询阅读数量等于12，或者评论数量等于12的数据</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">filter</span>(Q(read=<span class="number">12</span>)|Q(comment=<span class="number">12</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 逻辑非： 查找不符合条件的数据， 查询id不为1的数据</span></span><br><span class="line"><span class="comment"># 方法1：</span></span><br><span class="line">NewsInfo.objects.exclude(<span class="built_in">id</span>=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 方法2：</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">filter</span>(~Q(<span class="built_in">id</span>=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<p>聚合函数:</p>
<p>Sum, avg, max,min,count</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Sum,Avg,Max,Min,Count</span><br><span class="line"><span class="comment"># 查询最高数据</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">all</span>().aggregate(Max(<span class="string">&#x27;字段名称&#x27;</span>))</span><br><span class="line"><span class="comment"># 查询最低数据</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">all</span>().aggregate(Min(<span class="string">&#x27;字段名称&#x27;</span>))</span><br><span class="line"><span class="comment"># 查询求和</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">all</span>().aggregate(Sum(<span class="string">&#x27;字段名称&#x27;</span>))</span><br><span class="line"><span class="comment"># 查询平均数据</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">all</span>().aggregate(Avg(<span class="string">&#x27;字段名称&#x27;</span>))</span><br><span class="line"><span class="comment"># 统计字段中一共有多少新闻</span></span><br><span class="line">NewsInfo.objects.<span class="built_in">all</span>().aggregate(Count(<span class="string">&#x27;字段名称&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>关联查询</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image99.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image100.png" alt="Image"></p>
<p>增删查改</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image101.png" alt="Image"></p>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image102.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image103.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image104.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image105.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image106.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image107.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image108.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image109.png" alt="Image"></p>
<h3 id="类视图"><a href="#类视图" class="headerlink" title="类视图"></a>类视图</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image110.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image111.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image112.png" alt="Image"></p>
<h3 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image113.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image114.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image115.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image116.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image117.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image118.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image119.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image120.png" alt="Image"></p>
<h3 id="Django自带认证系统"><a href="#Django自带认证系统" class="headerlink" title="Django自带认证系统"></a>Django自带认证系统</h3><h3 id="权限校验"><a href="#权限校验" class="headerlink" title="权限校验"></a>权限校验</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image121.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image122.png" alt="Image"></p>
<h3 id="ORM事务开启"><a href="#ORM事务开启" class="headerlink" title="ORM事务开启"></a>ORM事务开启</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image123.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image124.png" alt="Image"></p>
<h3 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image125.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image126.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image127.png" alt="Image"></p>
<h2 id="Django-REST-Framwork"><a href="#Django-REST-Framwork" class="headerlink" title="Django REST Framwork"></a>Django REST Framwork</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image128.png" alt="Image"></p>
<h3 id="接口开发步骤"><a href="#接口开发步骤" class="headerlink" title="接口开发步骤"></a>接口开发步骤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建模型类文件，定义模型类，执行数据迁移命令，在数据库中形成对应的数据表</span><br><span class="line">创建序列化文件，关联模型类，（注意：基本就在序列化文件中操作</span><br><span class="line">创建视图类，定义接口</span><br><span class="line">配置视图类的路由规则</span><br></pre></td></tr></table></figure>

<h3 id="创建模型类"><a href="#创建模型类" class="headerlink" title="创建模型类"></a>创建模型类</h3><p>创建模型类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># models.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="comment"># 这里测试序列化和反序列化</span></span><br><span class="line"><span class="comment"># 定义UserInfo模型类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name=models.CharField(max_length=<span class="number">50</span>,verbose_name=<span class="string">&quot;用户名&quot;</span>)</span><br><span class="line">    <span class="comment"># 不设置verbose_name字段显示名称</span></span><br><span class="line">    pwd=models.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    email=models.EmailField(max_length=<span class="number">50</span>,verbose_name=<span class="string">&quot;邮箱&quot;</span>)</span><br><span class="line">    age=models.IntegerField(verbose_name=<span class="string">&quot;年龄&quot;</span>,default=<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 这里会在数据库的表中创建对应的数据表名称</span></span><br><span class="line">        db_table=<span class="string">&quot;用户表userinfo&quot;</span></span><br><span class="line">        verbose_name=<span class="string">&quot;用户信息&quot;</span></span><br></pre></td></tr></table></figure>

<p>执行迁移命令</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p> 检查mysql数据库，此时数据库就会产生新建的数据表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image129.png" alt="Image"></p>
<p>进入shell命令模式，插入部分数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 进入shell，python交互环境</span></span><br><span class="line">python manage.py shell</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入类</span></span><br><span class="line"><span class="keyword">from</span> ModelClass.models <span class="keyword">import</span> UserInfo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入3条数据</span></span><br><span class="line">UserInfo.objects.create(name=<span class="string">&quot;xiaohuihui&quot;</span>,pwd=<span class="string">&quot;123huang&quot;</span>,email=<span class="string">&quot;904036925@qq.com&quot;</span>,age=<span class="number">22</span>)</span><br><span class="line">UserInfo.objects.create(name=<span class="string">&quot;Jack&quot;</span>,pwd=<span class="string">&quot;123kk&quot;</span>,email=<span class="string">&quot;123@qq.com&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line">UserInfo.objects.create(name=<span class="string">&quot;张收纳&quot;</span>,pwd=<span class="string">&quot;1238856&quot;</span>,email=<span class="string">&quot;tt@sina.com&quot;</span>,age=<span class="number">43</span>)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image130.png" alt="Image"></p>
<h3 id="序列化操作"><a href="#序列化操作" class="headerlink" title="序列化操作"></a>序列化操作</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image131.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image132.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">序列化：将Python对象转化为JSON格式对象</span><br><span class="line">反序列化：将JSON格式的字符串转化为Python对象</span><br></pre></td></tr></table></figure>

<p>定义好Serializer类后，如果要通过序列化器类进行序列化，需要创建Serializer对象</p>
<p>Serializer的参数为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">serializer（instance=<span class="literal">None</span>,data=&#123;empty&#125;,**kwarg)</span><br></pre></td></tr></table></figure>

<ol>
<li>用于序列化时，将模型类对象传入instance参数中</li>
</ol>
<p>2）如果是用于反序列化时，将需要被反序列化的数据传入到data参数中</p>
<p>单个数据序列化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> ModelClass <span class="keyword">import</span> UserInfo</span><br><span class="line"><span class="comment"># 查询id=2的数据</span></span><br><span class="line">obj=UserInfo.objects.get(<span class="built_in">id</span>=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">from</span> ModelClass <span class="keyword">import</span> UserInfoSerializer</span><br><span class="line"><span class="comment"># 将python对象序列化</span></span><br><span class="line">user=UserInfoSerializer(obj)</span><br><span class="line">user.data</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出：&#123;&#x27;name&#x27;: &#x27;Jack&#x27;, &#x27;pwd&#x27;: &#x27;123kk&#x27;, &#x27;email&#x27;: &#x27;123@qq.com&#x27;, &#x27;age&#x27;: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p>查询集序列化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> ModelClass <span class="keyword">import</span> UserInfo</span><br><span class="line"><span class="comment"># 查询全部数据</span></span><br><span class="line">obj1=UserInfo.objects.<span class="built_in">all</span>()  </span><br><span class="line"><span class="keyword">from</span> ModelClass <span class="keyword">import</span> UserInfoSerializer</span><br><span class="line"><span class="comment"># 将所有数据序列化           </span></span><br><span class="line">users=UserInfoSerializer(obj1,many=<span class="literal">True</span>) </span><br><span class="line">users.data                               </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[&#123;&#x27;name&#x27;: &#x27;xiaohuihui&#x27;, &#x27;pwd&#x27;: &#x27;123huang&#x27;, &#x27;email&#x27;: &#x27;904036925@qq.com&#x27;, &#x27;age&#x27;: 22&#125;, </span></span><br><span class="line"><span class="string">&#123;&#x27;name&#x27;: &#x27;Jack&#x27;, &#x27;pwd&#x27;: &#x27;123kk&#x27;, &#x27;email&#x27;: &#x27;123@qq.com&#x27;, &#x27;age&#x27;: 18&#125;, </span></span><br><span class="line"><span class="string">&#123;&#x27;name&#x27;: &#x27;张收纳&#x27;, &#x27;pwd&#x27;: &#x27;1238856&#x27;, &#x27;email&#x27;: &#x27;tt@sina.com&#x27;, &#x27;age&#x27;: 43&#125;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>注意：many表示对多个查询集，多个数据进行序列化的操作</p>
<p>注意：序列化器中定义了多少个字段，那么输出就会有多少个字段</p>
<p>将序列化得到的数据转化为JSON</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> rest_framework.renderers <span class="keyword">import</span> JSONRenderer</span><br><span class="line"><span class="comment"># 查询用户对象</span></span><br><span class="line">obj=UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line"><span class="comment"># 创建序列化对象</span></span><br><span class="line">user=UserInfoSerializer(obj)</span><br><span class="line"><span class="comment"># 转化JSON</span></span><br><span class="line">JSONRenderer().render(user.data)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">b&#x27;[&#123;&quot;name&quot;:&quot;xiaohuihui&quot;,&quot;pwd&quot;:&quot;123huang&quot;,&quot;email&quot;:&quot;904036925@qq.com&quot;,&quot;age&quot;:22&#125;,</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;:&quot;Jack&quot;,&quot;pwd&quot;:&quot;123kk&quot;,&quot;email&quot;:&quot;123@qq.com&quot;,&quot;age&quot;:18&#125;,</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;:&quot;\xe5\xbc\xa0\xe6\x94\xb6\xe7\xba\xb3&quot;,&quot;pwd&quot;:&quot;1238856&quot;,&quot;email&quot;:&quot;tt@sina.com&quot;,&quot;age&quot;:43&#125;]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json2))</span><br><span class="line"><span class="comment"># &lt;class &#x27;bytes&#x27;&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>嵌套数据序列化</p>
<h3 id="反序列化操作"><a href="#反序列化操作" class="headerlink" title="反序列化操作"></a>反序列化操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">反序列化：将JSON格式数据 转化为Python对象</span><br></pre></td></tr></table></figure>

<p>在进行反序列化操作过程中，需要先对对象数据进行验证，验证通过情况下再进行保存。 反序列化时，初始化序列化器对象，将要反序列化的数据传入data参数中</p>
<p>先数据验证（校验数据）</p>
<p>调用is_vaild()方法进行验证，验证成功返回True，否则返回False</p>
<p>如果验证成功，通过序列化器对象validated_data属性获取数据 </p>
<p>常用校验字段说明</p>
<p>max_length：校验字段的长度</p>
<p>min_length:校验字段的长度</p>
<p>required&#x3D;False：不需要校验字段是否为空</p>
<p>控制序列化和反序列化的字段</p>
<p>read_only&#x3D;True:只参与序列化返回，不参与反序列化校验</p>
<p>write_only&#x3D;True:只参与反序列化校验，不参与序列化返回</p>
<p>验证通过后，如需保存数据，直接调用序列化器对象save方法，其会自动触发序列化器中对应的方法来保存数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">user1=&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xiaohuihui&#x27;</span>, <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;123huang&#x27;</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;904036925@qq.com&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>&#125;</span><br><span class="line"><span class="comment"># 反序列化</span></span><br><span class="line">ser.UserInfoSerializer(data=user1)</span><br><span class="line"><span class="comment"># 校验数据</span></span><br><span class="line">ser.is_valid()</span><br><span class="line"><span class="comment"># 保存数据</span></span><br><span class="line">ser.save()</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>is_valid()会根据序列化器中字段对应的约束来进行校验</p>
<p>如果是插入新数据，，save会调用序列化器中定义的create方法</p>
<p>如果是更新数据，save会调用序列化其中定义的update方法</p>
<p>通过is_valid()校验成功后，save就会进行下面的create或者update方法了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoSerializer</span>(serializers.Serializer):</span><br><span class="line">    name=serializers.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    <span class="comment"># 不设置verbose_name字段显示名称</span></span><br><span class="line">    pwd=serializers.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    email=serializers.EmailField(max_length=<span class="number">50</span>)</span><br><span class="line">    age=serializers.IntegerField(default=<span class="number">18</span>)</span><br><span class="line">    <span class="built_in">id</span>=serializers.IntegerField(read_only=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, validated_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;自定义一个序列化器保存数据方法，给save方法使用&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> UserInfo.objects.create(**validated_data)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, instance, validated_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;自定义数据更新方法，给save方法使用&quot;&quot;&quot;</span></span><br><span class="line">        instance.name = validated_data.get(<span class="string">&#x27;name&#x27;</span>, instance.name)</span><br><span class="line">        instance.pwd = validated_data.get(<span class="string">&#x27;pwd&#x27;</span>, instance.pwd)</span><br><span class="line">        instance.email = validated_data.get(<span class="string">&#x27;email&#x27;</span>, instance.email)</span><br><span class="line">        instance.age = validated_data.get(<span class="string">&#x27;age&#x27;</span>, instance.age)</span><br><span class="line">        instance.save()</span><br><span class="line">        <span class="keyword">return</span> instance</span><br></pre></td></tr></table></figure>

<h3 id="模型序列化器"><a href="#模型序列化器" class="headerlink" title="模型序列化器"></a>模型序列化器</h3><p>为了方便我们快速定义序列化器，DRF为提供了ModelSerializer模型类序列化器来帮助我们快速创建一个Serializer类</p>
<p>ModelSerializer与常规的Serializer相同，但是优势在于提供了：</p>
<p>基于模型类自动生成一系列字段</p>
<p>基于模型类自动为Serializer生产vaildators校验器，比如unique_together</p>
<p>包含默认的create()和update（）的实现</p>
<p>定义模型序列化器类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> ModelClass.models <span class="keyword">import</span> UserInfo</span><br><span class="line"><span class="comment"># 定义模型序列化器类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 指明参造的模型类</span></span><br><span class="line">        model = UserInfo</span><br><span class="line">        <span class="comment"># 为所有的字段生成序列化</span></span><br><span class="line">        fields=<span class="string">&quot;__all__&quot;</span></span><br><span class="line">        <span class="comment"># fiels 也可以指定具体需要序列化的字段</span></span><br><span class="line">        <span class="comment"># fields=(&quot;id&quot;,&quot;age&quot;,&quot;pwd&quot;)</span></span><br><span class="line">        <span class="comment"># 使用exclude 可以明确排除掉哪些字段</span></span><br><span class="line">        <span class="comment"># exclude(&quot;id&quot;) id字段不参与序列化</span></span><br><span class="line">        <span class="comment"># read_only_fields 指定哪些参与序列化，并且不粗安于反序列化的字段</span></span><br><span class="line">        <span class="comment"># read_only_fields=(&quot;id&quot;)</span></span><br><span class="line">        <span class="comment"># 更改对应字段的校验规则</span></span><br><span class="line">        extra_kwargs = &#123;</span><br><span class="line">            <span class="string">&quot;pwd&quot;</span>: &#123;<span class="string">&quot;min_length&quot;</span>: <span class="number">5</span>, <span class="string">&quot;max_length&quot;</span>: <span class="number">50</span>,<span class="string">&quot;read_only&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>接口案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> rest_framework.parsers <span class="keyword">import</span> JSONParser</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图接口函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">responeString</span>(<span class="params">code,msg,data=[<span class="number">1</span>]</span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;code&quot;</span>:code,<span class="string">&quot;msg&quot;</span>:msg,<span class="string">&quot;data&quot;</span>:data&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method==<span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="comment"># get请求返回所有用户信息</span></span><br><span class="line">        usersInfo=UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">        serializer = UserInfoSerializer(usersInfo,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="built_in">print</span>(serializer.data)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">            <span class="string">&quot;code&quot;</span>:<span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;msg&quot;</span>:<span class="string">&quot;OK&quot;</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>:serializer.data</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="keyword">elif</span> request.method==<span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="comment"># post请求修改更新对应的信息</span></span><br><span class="line">        params=JSONParser().parse(request)</span><br><span class="line">        <span class="comment"># 创建序列化器</span></span><br><span class="line">        ser=UserInfoSerializer(data=params)</span><br><span class="line">        <span class="comment"># 校验请求参数</span></span><br><span class="line">        <span class="keyword">if</span> ser.is_valid():</span><br><span class="line">            ser.save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(responeString(<span class="number">201</span>,msg=<span class="string">&quot;OK&quot;</span>,data=ser.data))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 返回校验失败的提示</span></span><br><span class="line">            <span class="keyword">return</span> JsonResponse(responeString(<span class="number">400</span>,msg=ser.errors))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;code&quot;</span>:<span class="number">404</span>,<span class="string">&quot;msg&quot;</span>:<span class="string">f&quot;服务器不支持该类的请求<span class="subst">&#123;request.method&#125;</span>&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">总结：一旦定义模型类（数据表），这个序列化器就像是中间商，用来间接操作和查询数据表中的数据，间接对数据增删查改，而不需要直接对模型类进行操作，可能是避免直接修改数据表的缘故，同时只要模型类没有修改改变，那么序列化器随便修改和定义</span><br></pre></td></tr></table></figure>

<h3 id="序列化器自定义校验方法"><a href="#序列化器自定义校验方法" class="headerlink" title="序列化器自定义校验方法"></a>序列化器自定义校验方法</h3><p>如果需要在序列化器中自己自定义校验规则，那么就需要使用自定义校验方法</p>
<p>方式一：</p>
<p>需要定义校验方法名规范： validate_字段名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 定义序列化器类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化器&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 映射模型类</span></span><br><span class="line">        model=UserInfo</span><br><span class="line">        <span class="comment"># 将全部字段序列化</span></span><br><span class="line">        fields=<span class="string">&#x27;__all__&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">validate_pwd</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;自定义校验逻辑规则&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">10</span>&lt;<span class="built_in">len</span>(data)&lt;<span class="number">18</span>:</span><br><span class="line">            <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&quot;密码长度需要在6到18位之间&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>方式二：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">valida_name</span>(<span class="params">value</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自定义校验用户名称的方法&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">10</span>&lt;<span class="built_in">len</span>(value)&lt;<span class="number">1000</span>:</span><br><span class="line">        <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&quot;用户名需要在10到1000之间&quot;</span>)</span><br><span class="line"><span class="comment"># 定义序列化器类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoSerializer</span>(serializers.Serializer):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化器&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 传入自定义校验规则</span></span><br><span class="line">    name=serializers.CharField(validators=valida_name)</span><br><span class="line">    <span class="comment"># 不设置verbose_name字段显示名称</span></span><br><span class="line">    pwd=models.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    email=models.EmailField(max_length=<span class="number">50</span>)</span><br><span class="line">    age=models.IntegerField(default=<span class="number">18</span>)</span><br></pre></td></tr></table></figure>

<h3 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h3><p>DRF框架提供对应的更加简便的视图接口类，简化接口的开发，提高效率</p>
<p>REST framework传入视图的request对象不再是Django默认的HttpReuqest对象，而是REST framework提供的拓展了HttpRequest类的Request类对象。无论前端发送的哪种格式数据，我们都可以统一的方式读取数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、 request.data获取请求体数据</span><br><span class="line">支持POST，PUT，PATCH等方法传递的请求体参数</span><br><span class="line">不仅支持表单类型数据，也支持JSON数据，还支持文件数据的获取</span><br><span class="line">2、request.query_params获取查询字符串参数，与Django的request.GET作用一样</span><br></pre></td></tr></table></figure>

<p>REST framework还提供了一个响应类Response，使用该类构造响应对象时，响应的具体数据内容会被转换（render渲染）成符合前端需求的数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">Response(data,status=<span class="literal">None</span>,tempalte_name=<span class="literal">None</span>,headers=<span class="literal">None</span>,content_type=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>注意：data参数不能是复杂结构的数据，如Django的模型类对象，对于这样的data数据可以使用序列化器Serializer序列化后（转化为Pyhton字典类型）再传递给data参数</p>
<p>案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.decorators <span class="keyword">import</span> api_view</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"><span class="meta">@api_view(<span class="params">[<span class="string">&quot;GET&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_dat</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;get 请求&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> Response([<span class="number">111</span>,<span class="number">222</span>,<span class="number">33</span>,&#123;<span class="string">&quot;code&quot;</span>:<span class="number">12313</span>&#125;],status=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@api_view(<span class="params">[<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;PUT&quot;</span>,<span class="string">&quot;PATCH&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_dat</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="API视图装饰器"><a href="#API视图装饰器" class="headerlink" title="API视图装饰器"></a>API视图装饰器</h4><p>DRF框架提供两个可用于编写API视图的包装器</p>
<p>用于处理基于函数的视图装饰器 @api_view</p>
<p>用于处理基于类的视图装饰器 APIView</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DRF对Django的类视图做了更好的封装，在Django的View的基础上做了很多的功能拓展。</span><br><span class="line">APIView与View的区别：</span><br><span class="line">传入到视图方法中的是REST framework的Request对象</span><br><span class="line">视图方法可以返回REST framework的Response对象</span><br><span class="line">任何APIException异常都会被捕获到，并且处理成合适的响应信息 </span><br><span class="line">扩展了身份认证，权限检查，流量控制这三功能</span><br><span class="line">拓展功能</span><br><span class="line">扩展了身份认证，权限检查，流量控制这三功能</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="comment"># 定义APIView类视图</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> UserInfoSerializer</span><br><span class="line"><span class="comment"># 定义APIView类视图</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserListView</span>(<span class="title class_ inherited__">APIView</span>):</span><br><span class="line">    <span class="comment"># 设置模型类</span></span><br><span class="line">    model=UserInfo</span><br><span class="line">    serializer=UserInfoSerializer</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># get 请求</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;42242424&quot;</span>&#125;,status=status.HTTP_200_OK)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request</span>):</span><br><span class="line">       <span class="keyword">return</span>  Response(<span class="string">&quot;fuck you&quot;</span>,status=status.HTTP_200_OK)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="GenericAPIView类视图"><a href="#GenericAPIView类视图" class="headerlink" title="GenericAPIView类视图"></a>GenericAPIView类视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">queryset：指定当前类视图使用的查询集</span><br><span class="line">serializer_class:类视图使用的序列化器</span><br><span class="line">self.queryset(）：获取查询集</span><br><span class="line">self.serializer：获取序列化器</span><br><span class="line">self.get_object()：获取指定的单一对象</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="comment"># 定义APIView类视图</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> .serializers <span class="keyword">import</span> UserInfoSerializer</span><br><span class="line"><span class="comment"># 导入对应类的包</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> GenericAPIView</span><br><span class="line"><span class="comment"># 定义APIView类视图</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddrListView</span>(<span class="title class_ inherited__">GenericAPIView</span>):</span><br><span class="line">    <span class="comment"># 设置模型类</span></span><br><span class="line">    queryset=UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class=UserInfoSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># get 请求</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        users=<span class="variable language_">self</span>.get_queryset()</span><br><span class="line">        ser=<span class="variable language_">self</span>.get_serializer(users,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;42242424&quot;</span>&#125;,status=status.HTTP_200_OK)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request</span>):</span><br><span class="line">       <span class="keyword">return</span>  Response(<span class="string">&quot;fuck you&quot;</span>,status=status.HTTP_200_OK)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="Mixin视图类"><a href="#Mixin视图类" class="headerlink" title="Mixin视图类"></a>Mixin视图类</h4><p>这个代码更加简洁</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddrListView</span>(GenericAPIView</span><br><span class="line">                   ,mixins.ListModelMixin</span><br><span class="line">                   ,mixins.CreateModelMixin</span><br><span class="line">                   ,mixins.RetrieveModelMixin</span><br><span class="line">                   ,mixins.UpdateModelMixin</span><br><span class="line">                   ,mixins.DestroyModelMixin</span><br><span class="line">                   ):</span><br><span class="line">    <span class="comment"># 设置模型类</span></span><br><span class="line">    queryset=UserInfo</span><br><span class="line">    serializer_class=UserInfoSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用mixins视图类简化代码，这个也不用实现逻辑，内部已经写好了</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request,*args,**kwargs</span>):</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">self</span>.<span class="built_in">list</span>(request,*args,**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用mixins视图类简化代码,这个也不用实现逻辑，内部已经写好了</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self,request,*args,**kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.create(request,*args,**kwargs)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_detail</span>(<span class="params">self,request,*args,**kwargs</span>):</span><br><span class="line">        <span class="comment"># 获取单个资源，使用mixins视图类简化代码,这个也不用实现逻辑，内部已经写好了</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.retrieve(request,*args,**kwargs)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put_detail</span>(<span class="params">self,request,*args,**kwargs</span>):</span><br><span class="line">        <span class="comment"># 更新单个资源，使用mixins视图类简化代码,这个也不用实现逻辑，内部已经写好了</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.update(request,*args,**kwargs)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self,request,*args,**kwargs</span>):</span><br><span class="line">        <span class="comment"># 删除单个资源，使用mixins视图类简化代码,这个也不用实现逻辑，内部已经写好了</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.destroy(request,*args,**kwargs)</span><br></pre></td></tr></table></figure>

<h4 id="拓展视图类"><a href="#拓展视图类" class="headerlink" title="拓展视图类"></a>拓展视图类</h4><p>这个就究极简化了代码，对上面的代码继续进行了封装，基本实现了增删查改的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status, generics</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddrListView</span>(generics.ListCreateAPIView,</span><br><span class="line">                   generics.CreateAPIView,</span><br><span class="line">                   generics.RetrieveAPIView,</span><br><span class="line">                   generics.UpdateAPIView,</span><br><span class="line">                   generics.DestroyAPIView</span><br><span class="line">                   ):</span><br><span class="line">    <span class="comment"># 设置模型类</span></span><br><span class="line">    queryset=UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列器类</span></span><br><span class="line">    serializer_class=UserInfoSerializer</span><br></pre></td></tr></table></figure>

<h4 id="视图集"><a href="#视图集" class="headerlink" title="视图集"></a>视图集</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ViewSet视图集类不再实现get().post()等方法，而是实现动作action，如list(),create()等。将一系列逻辑相关的动作放到一个类中。</span><br><span class="line">list（）提供一组数据</span><br><span class="line">retrieve（）提供单个数据</span><br><span class="line">create() 创建数据</span><br><span class="line">update()保存数据</span><br><span class="line">destory()删除数据</span><br></pre></td></tr></table></figure>

<p>常用视图集</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image133.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="comment"># from rest_framework.authtoken.admin import User</span></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图集类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>viewsets.ViewSet:继承ApiView，里面没有实现任何动作和方法</p>
<p>viewsets.GenericViewSet：继承GenericView，没有实现增删查改的动作和方法，和GenericView一样，只提供三个方法，get_queryseet(),get_object(),get_serializer()，同时也提供了两个类属性：queryset&#x3D;UserInfo.bojects.all()和serializer_class&#x3D;UserInfoSerializer</p>
<p>viewsets.ReadOnlyModelViewSet：只提供了两个get方法，不支持修改等方法</p>
<p>后续可以根据自己的需求合理继承方法即可，也可以重写方法实现复杂的增删查改的逻辑</p>
<h4 id="路由-1"><a href="#路由-1" class="headerlink" title="路由"></a>路由</h4><p>对于视图集ViewSet，我们除了可以自己手动指明请求方式与动作action之间的对应关系外，还可以使用Routers来帮助我们快速实现路由信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REST framework 提供了两个router</span><br><span class="line">SimpleRouter（推荐）</span><br><span class="line">DefaultRouter（不推荐）</span><br><span class="line">DefaultRouter和SimpleRouter的区别是，DefaultRouter会多附带一个默认的API根视图，返回一个包含所有列表视图</span><br></pre></td></tr></table></figure>

<p>创建router对象并注册</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Plain Text</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = []</span><br><span class="line"><span class="comment"># DRF 中的路由注册 只支持视图集</span></span><br><span class="line">route=routers.SimpleRouter()</span><br><span class="line">route.registry(<span class="string">&quot;users&quot;</span>,views.UserView)</span><br><span class="line">urlpatterns += route.urls</span><br></pre></td></tr></table></figure>

<p>register（prefix,viewset,base_name)</p>
<p>Prefix 该视图集的路由前缀</p>
<p>viewset视图集</p>
<p>base_name路由名称前缀</p>
<p>添加路由数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">urlpatterns = []</span><br><span class="line">urlpatterns += route.urls</span><br></pre></td></tr></table></figure>

<h4 id="认证和权限"><a href="#认证和权限" class="headerlink" title="认证和权限"></a>认证和权限</h4><p>全局配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>单个视图配置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image134.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image135.png" alt="Image"></p>
<h4 id="权限隔离"><a href="#权限隔离" class="headerlink" title="权限隔离"></a>权限隔离</h4><p>用户只能操作自己的，不允许操作别人的数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image136.png" alt="Image"></p>
<h4 id="限流"><a href="#限流" class="headerlink" title="限流"></a>限流</h4><p>对接口访问频次进行限制，以减轻服务器压力（反爬虫的一种手段）</p>
<p>限流类型</p>
<p>AnonRateThrottle</p>
<p>限制所有匿名未认证用户，使用IP区分用户</p>
<p>使用DEFAULT_THROTTLE_RATES[‘anon’]来设置频次</p>
<p>UserRateThrottle</p>
<p>限制认证用户，使用User id来区分</p>
<p>使用DEFAULT_THROTTLE_RATES[‘user’]来设置频次</p>
<p>ScopedRateThrottle</p>
<p>限制用户对于具体视图的访问频次，通过ip或user id</p>
<p>全局配置</p>
<p>DEFAULT_THROTTLE_CLASSES 设置限流类型</p>
<p>DEFAULT_THROTTLE_RATES  设置限流频次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>频率周期：</p>
<p>Second 每秒</p>
<p>Minute 每分钟</p>
<p>Hour 每小时</p>
<p>Day 每天</p>
<p>局部配置</p>
<p>可以在具体视图中通过throttle_classes属性来指定限流类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="comment"># from rest_framework.authtoken.admin import User</span></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="keyword">from</span> rest_framework.throttling <span class="keyword">import</span> AnonRateThrottle</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图集类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    <span class="comment"># 设置局部限流</span></span><br><span class="line">    throttle_classes = (AnonRateThrottle,)</span><br></pre></td></tr></table></figure>

<h4 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h4><p>对于列表数据可能需要根据字段进行过滤，我们可以通过添加django-filter拓展来增强支持。</p>
<p> 安装依赖插件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install django-<span class="built_in">filter</span></span><br></pre></td></tr></table></figure>

<p>注册过滤器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;rest_framework&quot;</span>,</span><br><span class="line">    <span class="comment"># 注册过滤器</span></span><br><span class="line">    <span class="string">&quot;django_filters&quot;</span></span><br><span class="line">    <span class="string">&quot;Test1&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>设置过滤器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在视图中添加filterset_fields属性，执行可以过滤的字段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views,py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    <span class="comment"># 设置局部限流</span></span><br><span class="line">    throttle_classes = (AnonRateThrottle,)</span><br><span class="line">    <span class="comment"># 设置过滤字段</span></span><br><span class="line">    filterset_fields = (<span class="string">&#x27;username&#x27;</span>,)</span><br></pre></td></tr></table></figure>

<h4 id="自定义过滤器类实现复杂过滤"><a href="#自定义过滤器类实现复杂过滤" class="headerlink" title="自定义过滤器类实现复杂过滤"></a>自定义过滤器类实现复杂过滤</h4><p>创建filters.py 专门用于写过滤规则</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image137.png" alt="Image"></p>
<p>定义过滤规则</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># filters.py</span></span><br><span class="line"><span class="keyword">from</span> django_filters <span class="keyword">import</span> rest_framework <span class="keyword">as</span> filters</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># 配置过滤规则</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoFilter</span>(filters.FilterSet):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自定义过滤器类&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = UserInfo</span><br><span class="line">        <span class="comment"># 过滤字段</span></span><br><span class="line">        fields = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;gender&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>使用过滤器类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> .filters <span class="keyword">import</span> UserInfoFilter</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图集类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    <span class="comment"># 设置局部限流</span></span><br><span class="line">    throttle_classes = (AnonRateThrottle,)</span><br><span class="line">    <span class="comment"># # 设置过滤字段</span></span><br><span class="line">    <span class="comment"># filterset_fields = (&#x27;username&#x27;,)</span></span><br><span class="line">    <span class="comment"># 使用过滤器类</span></span><br><span class="line">    permission_classes = UserInfoFilter</span><br></pre></td></tr></table></figure>

<h4 id="自动生成接口文档"><a href="#自动生成接口文档" class="headerlink" title="自动生成接口文档"></a>自动生成接口文档</h4><p>REST framework通过第三方库可以自动生成网页版的接口文档，自动接口文档能生成的是继承自APIView及其子类</p>
<p>安装依赖，生成接口文档需要coreapi库的支持</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install coreapi</span><br></pre></td></tr></table></figure>

<p>注册</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;rest_framework&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django_filters&quot;</span>,</span><br><span class="line">    <span class="comment"># 注册coreapi</span></span><br><span class="line">    <span class="string">&quot;coreapi&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>设置接口文档访问路径</p>
<p>在项目路由中添加接口文档的路由</p>
<p>浏览器访问 127.0.0.1:8000&#x2F;docs&#x2F; ，即可看到自动生成的接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path,re_path,include</span><br><span class="line"><span class="keyword">from</span> rest_framework.documentation <span class="keyword">import</span> include_docs_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    <span class="comment"># 配置自动生成接口文档</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^docs/&#x27;</span>,include_docs_urls(title=<span class="string">&#x27;接口文档&#x27;</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>同时需要加上配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置自动生成接口文档</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_SCHEMA_CLASS&quot;</span>:<span class="string">&quot;rest_framework.schemas.openapi.AutoSchema&quot;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image138.png" alt="Image"></p>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><p>对于列表数据，REST framework提供了OrderingFilter过滤器来快速指明数据按照字段进行排序。</p>
<p>filter_backends: 指定排序过滤器</p>
<p>ordering_fields:指定排序的可选字段</p>
<p>REST framework会在请求的查询字符串参数中检查是否包含了ordering参数，如果包含了ordering参数，则按照ordering参数指明的排序字段对数据集进行排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> OrderingFilter</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图集类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    <span class="comment"># 设置局部限流</span></span><br><span class="line">    throttle_classes = (AnonRateThrottle,)</span><br><span class="line">    <span class="comment"># # 设置过滤字段</span></span><br><span class="line">    <span class="comment"># filterset_fields = (&#x27;username&#x27;,)</span></span><br><span class="line">    <span class="comment"># 使用过滤器类</span></span><br><span class="line">    permission_classes = UserInfoFilter</span><br><span class="line">    <span class="comment"># 设置排序</span></span><br><span class="line">    filter_backends =[OrderingFilter]  <span class="comment"># 指定排序的过滤器</span></span><br><span class="line">    ordering_fields = (<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;id&#x27;</span>) <span class="comment"># 指定排序的字段</span></span><br></pre></td></tr></table></figure>

<p>当然也可以放在全局配置中，这样就无需导入了对应包了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">        <span class="comment"># 设置全局排序</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.OrderingFilter&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置自动生成接口文档</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_SCHEMA_CLASS&quot;</span>:<span class="string">&quot;rest_framework.schemas.openapi.AutoSchema&quot;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><p>REST framework提供了分页的支持</p>
<p>全局配置</p>
<p>在配置文件中设置全局的分页方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">        <span class="comment"># 设置全局排序</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.OrderingFilter&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置全局分页</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_PAGINATION_CLASS&quot;</span>:<span class="string">&#x27;rest_framework.pagination.PageNumberPagination&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;PAGE_SIZE&quot;</span>:<span class="number">10</span>, <span class="comment"># 设置每页数据量</span></span><br><span class="line">    <span class="comment"># 设置自动生成接口文档</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_SCHEMA_CLASS&quot;</span>:<span class="string">&quot;rest_framework.schemas.openapi.AutoSchema&quot;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>局部配置</p>
<p>在不同视图中通过pagination_class属性来指定不同的的分页器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image139.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># pagination.py</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;自定义分页器&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfoPagination</span>(<span class="title class_ inherited__">PageNumberPagination</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自定义用户信息分页器&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 指定页码查询参数</span></span><br><span class="line">    page_query_param = <span class="string">&quot;page&quot;</span></span><br><span class="line">    <span class="comment"># 指定每页数据量的查询参数</span></span><br><span class="line">    page_size_query_param = <span class="string">&#x27;size&#x27;</span></span><br><span class="line">    <span class="comment"># 每页默认数据条数</span></span><br><span class="line">    page_size = <span class="number">10</span></span><br><span class="line">    <span class="comment"># 每页最多数据条数</span></span><br><span class="line">    max_page_size = <span class="number">100</span></span><br></pre></td></tr></table></figure>

<p>使用创建自定义好的分页器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="keyword">from</span> rest_framework.throttling <span class="keyword">import</span> AnonRateThrottle</span><br><span class="line"><span class="comment"># 导入自定义分页器</span></span><br><span class="line"><span class="keyword">from</span> .filters <span class="keyword">import</span> UserInfoFilter</span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> OrderingFilter</span><br><span class="line"><span class="keyword">from</span> .pagination <span class="keyword">import</span> UserInfoPagination</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="comment"># 定义视图集类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserView</span>(<span class="title class_ inherited__">ModelViewSet</span>):</span><br><span class="line">    <span class="comment"># 指定模型类查询集</span></span><br><span class="line">    queryset = User.objects.<span class="built_in">all</span>()</span><br><span class="line">    <span class="comment"># 指定序列化器</span></span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    <span class="comment"># 设置局部限流</span></span><br><span class="line">    throttle_classes = (AnonRateThrottle,)</span><br><span class="line">    <span class="comment"># # 设置过滤字段</span></span><br><span class="line">    <span class="comment"># filterset_fields = (&#x27;username&#x27;,)</span></span><br><span class="line">    <span class="comment"># 使用过滤器类</span></span><br><span class="line">    permission_classes = UserInfoFilter</span><br><span class="line">    <span class="comment"># 设置排序</span></span><br><span class="line">    filter_backends =[OrderingFilter]  <span class="comment"># 指定排序的过滤器</span></span><br><span class="line">    ordering_fields = (<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;id&#x27;</span>) <span class="comment"># 指定排序的字段</span></span><br><span class="line">    <span class="comment"># 使用自定义分页器</span></span><br><span class="line">    pagination_class = UserInfoPagination</span><br></pre></td></tr></table></figure>

<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p>REST framework提供了异常处理，如果没有自定义默认会采用默认的处理方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">        <span class="comment"># 设置全局排序</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.OrderingFilter&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置全局分页</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_PAGINATION_CLASS&quot;</span>:<span class="string">&#x27;rest_framework.pagination.PageNumberPagination&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;PAGE_SIZE&quot;</span>:<span class="number">10</span>, <span class="comment"># 设置每页数据量</span></span><br><span class="line">    <span class="comment"># 设置自动生成接口文档</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_SCHEMA_CLASS&quot;</span>:<span class="string">&quot;rest_framework.schemas.openapi.AutoSchema&quot;</span>,</span><br><span class="line">    <span class="comment"># DRF默认处理方法</span></span><br><span class="line">    <span class="string">&quot;EXCEPTION_HANDLER&quot;</span>:<span class="string">&quot;rest_framework.views.exception_handler&quot;</span>,</span><br><span class="line">    <span class="comment"># 使用自定义异常的处理方法</span></span><br><span class="line">    <span class="string">&quot;EXCEPTION_HANDLER&quot;</span>:<span class="string">&quot;common.exception.my_exception_handler&quot;</span>,</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义异常处理方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># common/exception.py</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> exception_handler</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response </span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">custom_exception_handler</span>(<span class="params">exc, context</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自定义异常处理函数&quot;&quot;&quot;</span></span><br><span class="line">    response = exception_handler(exc, context)</span><br><span class="line">    <span class="keyword">if</span> response <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        response.data[<span class="string">&#x27;code&#x27;</span>] = response.status_code</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data=&#123;<span class="string">&#x27;error&#x27;</span>:<span class="string">&quot;服务器出错&quot;</span>&#125;</span><br><span class="line">        response=Response(data,status=status.HTTP_500_INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<h4 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image140.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image141.png" alt="Image"></p>
<h4 id="跨域配置"><a href="#跨域配置" class="headerlink" title="跨域配置"></a>跨域配置</h4><p>安装依赖</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure>

<p>注册</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;rest_framework&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django_filters&quot;</span>,</span><br><span class="line">    <span class="string">&quot;coreapi&quot;</span>,</span><br><span class="line">    <span class="comment"># 注册跨域</span></span><br><span class="line">    <span class="string">&quot;corsheaders&quot;</span></span><br><span class="line">    <span class="string">&quot;Test1&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>中间件设置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">    <span class="comment"># 设置跨域中间件</span></span><br><span class="line">    <span class="string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>添加白名单</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># setting,py</span></span><br><span class="line"><span class="comment"># 跨域支持</span></span><br><span class="line">CORS_ALLOWED_ORIGINS =<span class="literal">True</span> <span class="comment"># 允许所有的跨域请求</span></span><br></pre></td></tr></table></figure>

<h4 id="DRF-JWT"><a href="#DRF-JWT" class="headerlink" title="DRF JWT"></a>DRF JWT</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSON Web Token(JWT)是目前前后端分离项目中最流行的跨域身份验证解决方案。</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image142.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image143.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image144.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image145.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image146.png" alt="Image"></p>
<ol>
<li>使用simpleJWT</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install djangorestframework-simplejwt</span><br></pre></td></tr></table></figure>

<p>添加配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment"># 注册simpleJWT</span></span><br><span class="line">    <span class="string">&#x27;rest_framework_simplejwt&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 配置DRF鉴权方式</span></span><br><span class="line"><span class="comment"># DRF全局权限配置</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># 设置身份认证的方式</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>, <span class="comment"># Basic认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,<span class="comment"># session认证</span></span><br><span class="line">        <span class="string">&#x27;rest_framework_simplejwt.authentication.JWTAuthentication&#x27;</span>, <span class="comment"># Token认证</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置限流类型</span></span><br><span class="line">    <span class="string">&#x27;DEFAULT_THROTTLE_CLASSES&#x27;</span>:[</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.AnonRateThrottle&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;rest_framework.throttling.UserRateThrottle&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 设置限流频次</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_THROTTLE_RATES&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&#x27;anon&#x27;</span>:<span class="string">&#x27;100/day&#x27;</span>, <span class="comment"># 未认证用户，每天100次</span></span><br><span class="line">        <span class="string">&#x27;user&#x27;</span>:<span class="string">&#x27;1000/day&#x27;</span>, <span class="comment"># 认证用户，每分钟100次</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 设置过滤器</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_FILTER_BACKENDS&quot;</span>:(</span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.DjangoFilterBackend&#x27;</span>,</span><br><span class="line">        <span class="comment"># 设置全局排序</span></span><br><span class="line">        <span class="string">&#x27;rest_framework.filters.OrderingFilter&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 设置全局分页</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_PAGINATION_CLASS&quot;</span>:<span class="string">&#x27;rest_framework.pagination.PageNumberPagination&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;PAGE_SIZE&quot;</span>:<span class="number">10</span>, <span class="comment"># 设置每页数据量</span></span><br><span class="line">    <span class="comment"># 设置自动生成接口文档</span></span><br><span class="line">    <span class="string">&quot;DEFAULT_SCHEMA_CLASS&quot;</span>:<span class="string">&quot;rest_framework.schemas.openapi.AutoSchema&quot;</span>,</span><br><span class="line">    <span class="comment"># 自定义异常处理</span></span><br><span class="line">    <span class="string">&quot;EXCEPTION_HANDLER&quot;</span>:<span class="string">&quot;rest_framework.views.exception_handler&quot;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>路由中添加登录认证配置</p>
<p>token鉴权配置</p>
<p>访问官方文档：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">https://django-rest-framework-simplejwt.readthedocs.io/en/latest/settings.html</span><br></pre></td></tr></table></figure>

<p>自定义配置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="comment"># token 鉴权配置</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line">SIMPLE_JWT = &#123;</span><br><span class="line">    <span class="string">&quot;ACCESS_TOKEN_LIFETIME&quot;</span>: timedelta(minutes=<span class="number">5</span>),</span><br><span class="line">    <span class="string">&quot;REFRESH_TOKEN_LIFETIME&quot;</span>: timedelta(days=<span class="number">1</span>),</span><br><span class="line">    <span class="string">&quot;ROTATE_REFRESH_TOKENS&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&quot;BLACKLIST_AFTER_ROTATION&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&quot;UPDATE_LAST_LOGIN&quot;</span>: <span class="literal">False</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;ALGORITHM&quot;</span>: <span class="string">&quot;HS256&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SIGNING_KEY&quot;</span>: settings.SECRET_KEY,</span><br><span class="line">    <span class="string">&quot;VERIFYING_KEY&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;AUDIENCE&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&quot;ISSUER&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&quot;JSON_ENCODER&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&quot;JWK_URL&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&quot;LEEWAY&quot;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;AUTH_HEADER_TYPES&quot;</span>: (<span class="string">&quot;Bearer&quot;</span>,),</span><br><span class="line">    <span class="string">&quot;AUTH_HEADER_NAME&quot;</span>: <span class="string">&quot;HTTP_AUTHORIZATION&quot;</span>,</span><br><span class="line">    <span class="string">&quot;USER_ID_FIELD&quot;</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">    <span class="string">&quot;USER_ID_CLAIM&quot;</span>: <span class="string">&quot;user_id&quot;</span>,</span><br><span class="line">    <span class="string">&quot;USER_AUTHENTICATION_RULE&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.authentication.default_user_authentication_rule&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;AUTH_TOKEN_CLASSES&quot;</span>: (<span class="string">&quot;rest_framework_simplejwt.tokens.AccessToken&quot;</span>,),</span><br><span class="line">    <span class="string">&quot;TOKEN_TYPE_CLAIM&quot;</span>: <span class="string">&quot;token_type&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TOKEN_USER_CLASS&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.models.TokenUser&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;JTI_CLAIM&quot;</span>: <span class="string">&quot;jti&quot;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;SLIDING_TOKEN_REFRESH_EXP_CLAIM&quot;</span>: <span class="string">&quot;refresh_exp&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SLIDING_TOKEN_LIFETIME&quot;</span>: timedelta(minutes=<span class="number">5</span>),</span><br><span class="line">    <span class="string">&quot;SLIDING_TOKEN_REFRESH_LIFETIME&quot;</span>: timedelta(days=<span class="number">1</span>),</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;TOKEN_OBTAIN_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenObtainPairSerializer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TOKEN_REFRESH_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenRefreshSerializer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TOKEN_VERIFY_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenVerifySerializer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TOKEN_BLACKLIST_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenBlacklistSerializer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SLIDING_TOKEN_OBTAIN_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenObtainSlidingSerializer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SLIDING_TOKEN_REFRESH_SERIALIZER&quot;</span>: <span class="string">&quot;rest_framework_simplejwt.serializers.TokenRefreshSlidingSerializer&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="DRF后端项目实战"><a href="#DRF后端项目实战" class="headerlink" title="DRF后端项目实战"></a>DRF后端项目实战</h2><h3 id="项目开发配置"><a href="#项目开发配置" class="headerlink" title="项目开发配置"></a>项目开发配置</h3><p>安装依赖</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">pip install django                  <span class="comment">#安装基本django框架，一般可以安装django5</span></span><br><span class="line">pip install djangorestframework     <span class="comment"># 安装drf框架 </span></span><br><span class="line">pip install mysqlclient             <span class="comment"># 安装数据库操作</span></span><br><span class="line">pip install Pillow                   <span class="comment"># 安装图像处理库，用于图片上传操作</span></span><br><span class="line">pip install django-ckeditor           <span class="comment"># 安装富文本编辑器</span></span><br><span class="line">pip install django-<span class="built_in">filter</span>             <span class="comment"># 安装过滤器</span></span><br><span class="line">pip install django-cors-headers        <span class="comment"># 安装跨域</span></span><br><span class="line">pip install coreapi                    <span class="comment"># 安装自动生成接口文档</span></span><br><span class="line">pip install djangorestframework-simplejwt <span class="comment"># 安装token鉴权</span></span><br></pre></td></tr></table></figure>

<p>配置文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Python</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">For more information on this file, see</span></span><br><span class="line"><span class="string">https://docs.djangoproject.com/en/5.1/topics/settings/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For the full list of settings and their values, see</span></span><br><span class="line"><span class="string">https://docs.djangoproject.com/en/5.1/ref/settings/</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> <span class="title class_">Path</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Build</span> paths inside the project like <span class="attr">this</span>: <span class="variable constant_">BASE_DIR</span> / <span class="string">&#x27;subdir&#x27;</span>.</span><br><span class="line"><span class="variable constant_">BASE_DIR</span> = <span class="title class_">Path</span>(__file__).<span class="title function_">resolve</span>().<span class="property">parent</span>.<span class="property">parent</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Quick</span>-start development settings - unsuitable <span class="keyword">for</span> production</span><br><span class="line"># <span class="title class_">See</span> <span class="attr">https</span>:<span class="comment">//docs.djangoproject.com/en/5.1/howto/deployment/checklist/</span></span><br><span class="line"></span><br><span class="line"># <span class="variable constant_">SECURITY</span> <span class="attr">WARNING</span>: keep the secret key used <span class="keyword">in</span> production secret!</span><br><span class="line"><span class="variable constant_">SECRET_KEY</span> = <span class="string">&#x27;django-insecure-kel51@9p2=m_i9kym56gg5&amp;t3)vq#j3^_zqa9_pz98*smhx-rr&#x27;</span></span><br><span class="line"></span><br><span class="line"># <span class="variable constant_">SECURITY</span> <span class="attr">WARNING</span>: don<span class="string">&#x27;t run with debug turned on in production!</span></span><br><span class="line"><span class="string">DEBUG = True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ALLOWED_HOSTS = []</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Application definition</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">INSTALLED_APPS = [</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">admin</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">contenttypes</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">sessions</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">messages</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">staticfiles</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &quot;rest_framework&quot;,</span></span><br><span class="line"><span class="string">    # 设置跨域</span></span><br><span class="line"><span class="string">    &quot;corsheaders&quot;,</span></span><br><span class="line"><span class="string">    # 设置富文本编辑器</span></span><br><span class="line"><span class="string">    &quot;ckeditor&quot;</span></span><br><span class="line"><span class="string">    # 注册应用</span></span><br><span class="line"><span class="string">    &quot;apps.users&quot;,</span></span><br><span class="line"><span class="string">    &quot;apps.cart&quot;,</span></span><br><span class="line"><span class="string">    &quot;apps.order&quot;,</span></span><br><span class="line"><span class="string">    &quot;apps.goods&quot;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MIDDLEWARE = [</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">middleware</span>.<span class="property">security</span>.<span class="property">SecurityMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">sessions</span>.<span class="property">middleware</span>.<span class="property">SessionMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">middleware</span>.<span class="property">common</span>.<span class="property">CommonMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    # 注释掉Csr</span></span><br><span class="line"><span class="string">    # &#x27;</span>django.<span class="property">middleware</span>.<span class="property">csrf</span>.<span class="property">CsrfViewMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    # 设置跨域中间件,支持跨域请求</span></span><br><span class="line"><span class="string">    &quot;corsheaders.middleware.CorsMiddleware&quot;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">middleware</span>.<span class="property">AuthenticationMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">contrib</span>.<span class="property">messages</span>.<span class="property">middleware</span>.<span class="property">MessageMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;</span>django.<span class="property">middleware</span>.<span class="property">clickjacking</span>.<span class="property">XFrameOptionsMiddleware</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ROOT_URLCONF = &#x27;</span>shopApp.<span class="property">urls</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TEMPLATES = [</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">BACKEND</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">template</span>.<span class="property">backends</span>.<span class="property">django</span>.<span class="property">DjangoTemplates</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        # 删除原有的配置，支持前后端分离</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">DIRS</span><span class="string">&#x27;: []</span></span><br><span class="line"><span class="string">        ,</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">APP_DIRS</span><span class="string">&#x27;: True,</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">OPTIONS</span><span class="string">&#x27;: &#123;</span></span><br><span class="line"><span class="string">            &#x27;</span>context_processors<span class="string">&#x27;: [</span></span><br><span class="line"><span class="string">                &#x27;</span>django.<span class="property">template</span>.<span class="property">context_processors</span>.<span class="property">debug</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">                &#x27;</span>django.<span class="property">template</span>.<span class="property">context_processors</span>.<span class="property">request</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">                &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">context_processors</span>.<span class="property">auth</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">                &#x27;</span>django.<span class="property">contrib</span>.<span class="property">messages</span>.<span class="property">context_processors</span>.<span class="property">messages</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">            ],</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WSGI_APPLICATION = &#x27;</span>shopApp.<span class="property">wsgi</span>.<span class="property">application</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Database</span></span><br><span class="line"><span class="string"># https://docs.djangoproject.com/en/5.1/ref/settings/#databases</span></span><br><span class="line"><span class="string"># 更改数据库为mysql</span></span><br><span class="line"><span class="string">DATABASES = &#123;</span></span><br><span class="line"><span class="string">    &#x27;</span><span class="keyword">default</span><span class="string">&#x27;: &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">ENGINE</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">db</span>.<span class="property">backends</span>.<span class="property">mysql</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">NAME</span><span class="string">&#x27;: &#x27;</span>showApp<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">USER</span><span class="string">&#x27;: &#x27;</span>root<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">PASSWORD</span><span class="string">&#x27;:&#x27;</span>root<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        &quot;HOST&quot;:&#x27;</span>localhost<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        &quot;PORT&quot;:3306,</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Password validation</span></span><br><span class="line"><span class="string"># https://docs.djangoproject.com/en/5.1/ref/settings/#auth-password-validators</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">AUTH_PASSWORD_VALIDATORS = [</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">NAME</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">password_validation</span>.<span class="property">UserAttributeSimilarityValidator</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">NAME</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">password_validation</span>.<span class="property">MinimumLengthValidator</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">NAME</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">password_validation</span>.<span class="property">CommonPasswordValidator</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &#x27;</span><span class="variable constant_">NAME</span><span class="string">&#x27;: &#x27;</span>django.<span class="property">contrib</span>.<span class="property">auth</span>.<span class="property">password_validation</span>.<span class="property">NumericPasswordValidator</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Internationalization</span></span><br><span class="line"><span class="string"># https://docs.djangoproject.com/en/5.1/topics/i18n/</span></span><br><span class="line"><span class="string"># 设置语言时区</span></span><br><span class="line"><span class="string">LANGUAGE_CODE = &#x27;</span>zh-hans<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TIME_ZONE = &#x27;</span><span class="title class_">Asia</span>/<span class="title class_">Shanghai</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">USE_I18N = True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">USE_TZ = True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Static files (CSS, JavaScript, Images)</span></span><br><span class="line"><span class="string"># https://docs.djangoproject.com/en/5.1/howto/static-files/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">STATIC_URL = &#x27;</span><span class="keyword">static</span>/<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Default primary key field type</span></span><br><span class="line"><span class="string"># https://docs.djangoproject.com/en/5.1/ref/settings/#default-auto-field</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">DEFAULT_AUTO_FIELD = &#x27;</span>django.<span class="property">db</span>.<span class="property">models</span>.<span class="property">BigAutoField</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string"># 允许所有用户跨域访问</span></span><br><span class="line"><span class="string">CORS_ORIGIN_ALLOW_ALL = True</span></span><br><span class="line"><span class="string"># 指定自定义用户类模型</span></span><br><span class="line"><span class="string">AUTH_USER_MODEL=&#x27;</span>users.<span class="property">User</span><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建模型类-1"><a href="#创建模型类-1" class="headerlink" title="创建模型类"></a>创建模型类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> common.db <span class="keyword">import</span> BaseModel</span><br><span class="line"><span class="comment"># django中自带的用户认证模型类</span></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(BaseModel, AbstractUser):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户表&quot;&quot;&quot;</span></span><br><span class="line">    moblie=models.CharField(max_length=<span class="number">11</span>,verbose_name=<span class="string">&quot;手机号&quot;</span>)</span><br><span class="line">    avatar=models.ImageField(verbose_name=<span class="string">&quot;头像&quot;</span>,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># is_active=models.BooleanField(default=True,verbose_name=&quot;用户是否禁用&quot;)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table=<span class="string">&#x27;users&#x27;</span></span><br><span class="line">        verbose_name=<span class="string">&quot;用户表&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Address</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;收获地址表&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 与上面的User模型类进行关联，models.CASCADE删除所属用户，其所有地址记录都被删除</span></span><br><span class="line">    user=models.ForeignKey(<span class="string">&quot;User&quot;</span>,verbose_name=<span class="string">&quot;所属用户&quot;</span>,on_delete=models.CASCADE)</span><br><span class="line">    name=models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">&quot;联系人&quot;</span>)</span><br><span class="line">    phone=models.CharField(max_length=<span class="number">11</span>,verbose_name=<span class="string">&quot;手机号码&quot;</span>)</span><br><span class="line">    province=models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">&quot;省份&quot;</span>)</span><br><span class="line">    city=models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">&quot;城市&quot;</span>)</span><br><span class="line">    country=models.CharField(max_length=<span class="number">20</span>,verbose_name=<span class="string">&quot;区县&quot;</span>)</span><br><span class="line">    address=models.CharField(max_length=<span class="number">100</span>,verbose_name=<span class="string">&quot;详细地址&quot;</span>)</span><br><span class="line">    is_default=models.BooleanField(verbose_name=<span class="string">&quot;是否为默认地址&quot;</span>,default=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table=<span class="string">&#x27;address&#x27;</span></span><br><span class="line">        verbose_name=<span class="string">&quot;收获地址表&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Area</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;省市区县地址表&quot;&quot;&quot;</span></span><br><span class="line">    area_pid=models.ImageField(verbose_name=<span class="string">&quot;上级id&quot;</span>)</span><br><span class="line">    area_name=models.CharField(verbose_name=<span class="string">&quot;地区名&quot;</span>,max_length=<span class="number">20</span>)</span><br><span class="line">    area_level=models.CharField(verbose_name=<span class="string">&quot;区域等级&quot;</span>,max_length=<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table=<span class="string">&#x27;area&#x27;</span></span><br><span class="line">        verbose_name=<span class="string">&quot;省市区县地址表&quot;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VerificationCode</span>(models.Model):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;验证码表&quot;&quot;&quot;</span></span><br><span class="line">    mobile=models.CharField(verbose_name=<span class="string">&quot;手机号码&quot;</span>,max_length=<span class="number">11</span>)</span><br><span class="line">    code=models.CharField(max_length=<span class="number">6</span>,verbose_name=<span class="string">&quot;验证码&quot;</span>)</span><br><span class="line">    create_time=models.DateTimeField(auto_now_add=<span class="literal">True</span>,verbose_name=<span class="string">&quot;创建时间&quot;</span>)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table=<span class="string">&#x27;verification_code&#x27;</span></span><br><span class="line">        verbose_name=<span class="string">&quot;验证码表&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置token刷新视图"><a href="#配置token刷新视图" class="headerlink" title="配置token刷新视图"></a>配置token刷新视图</h3><p>使用rest_framework_simplejwt中提供的token刷新视图，配置一下路由即可实现 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> rest_framework_simplejwt.views <span class="keyword">import</span> TokenRefreshView,TokenVerifyView</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 刷新token</span></span><br><span class="line">    path(<span class="string">&#x27;token/refresh/&#x27;</span>, TokenRefreshView.as_view(), name=<span class="string">&#x27;token_refresh&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="配置-检验token"><a href="#配置-检验token" class="headerlink" title="配置   检验token"></a>配置   检验token</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="keyword">from</span> rest_framework_simplejwt.views <span class="keyword">import</span> TokenRefreshView,TokenVerifyView</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 刷新token</span></span><br><span class="line">    path(<span class="string">&#x27;token/refresh/&#x27;</span>, TokenRefreshView.as_view(), name=<span class="string">&#x27;token_refresh&#x27;</span>),</span><br><span class="line">    <span class="comment"># 校验token</span></span><br><span class="line">    path(<span class="string">&#x27;token/verify/&#x27;</span>, TokenVerifyView.as_view(), name=<span class="string">&#x27;token_verify&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="开发问题"><a href="#开发问题" class="headerlink" title="开发问题"></a>开发问题</h3><p>导入路由的包引发的问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> apps <span class="keyword">import</span> users</span><br><span class="line"><span class="keyword">from</span> apps.users <span class="keyword">import</span> urls</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;api/users/&#x27;</span>,include(<span class="string">&#x27;users.urls&#x27;</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image147.png" alt="Image"></p>
<p>修改后</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;api/users/&#x27;</span>,include(<span class="string">&#x27;apps.users.urls&#x27;</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>在Django的URL配置中，使用include（）函数会自动根据提供的字符串路径来加载相应的模块，帮助简化URL配置功能，这样就无需手动导入太多的包了。同时字符串路径 ‘apps.users.urls’ 是一种懒加载的方式。只有当请求匹配到path(‘api&#x2F;users&#x2F;‘, include(…)) 时，Django 才会去导入对应的模块。</p>
<p>示例对比：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 显示写法不推荐</span></span><br><span class="line"><span class="keyword">from</span> apps.users <span class="keyword">import</span> urls</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;api/users/&#x27;</span>, include(urls)),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 字符串路径写法推荐</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;api/users/&#x27;</span>, include(<span class="string">&#x27;apps.users.urls&#x27;</span>)),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="短信验证码"><a href="#短信验证码" class="headerlink" title="短信验证码"></a>短信验证码</h4><p>1-Python - 短信服务 - 听雨危楼 - 博客园</p>
<p>容联云短信错误码:短信错误码</p>
<h4 id="python项目开发常用目录结构说明"><a href="#python项目开发常用目录结构说明" class="headerlink" title="python项目开发常用目录结构说明"></a>python项目开发常用目录结构说明</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Markdown</span><br><span class="line">bin:通常用于存放项目的启动脚本</span><br><span class="line">core:存放主程序、业务逻辑源代码</span><br><span class="line">api:通常用于存放项目的接口文件，使得项目能够在启动后外部通信</span><br><span class="line">db:存放操作数据库相关文件，主要用于与数据库交互</span><br><span class="line">lib:存放程序中常用的自定义模块</span><br><span class="line">conf:存放项目所需要的配置文件</span><br><span class="line">logs:存放项目运行时所产生的日志文件</span><br><span class="line">docs:存放项目的详细说明文档</span><br><span class="line">plugins(utils/tools/helpers):存放项目中所需要的第三方插件</span><br><span class="line">common:存放项目中大部分需要都能使用到的功能，相当于公共插件</span><br><span class="line">test:存放项目测试代码</span><br><span class="line">static:存放项目中所需要的静态文件</span><br><span class="line">views(templates):存放项目中所需要的模版文件，MVC模型中的视图</span><br><span class="line">controller:存放项目中的主流算法，MVC模型中的控制</span><br><span class="line">models:存放项目中与数据库打交道的脚本，MVC模型中的模型</span><br><span class="line">run.py:项目启动脚本，在项目的根目录下，或bin目录下。也叫start.py</span><br><span class="line">setup.py:安装、部署、打包的脚本，一键安装所需要的所有依赖环境</span><br><span class="line">settings.py:conf文件夹下，项目配置文件，有的是py脚本，而有的是ini、.conf、.yaml</span><br><span class="line">requirements.txt:存放所有项目的第三方依赖库、模块的名字及版本。避免在setup.py安装依赖时漏掉软件包</span><br><span class="line">README.md:项目整体描述信息，设计思路，设计目标等</span><br><span class="line">CHANGELOG.md:描述项目每个版本的更新信息，说明版本号、更新内容、修复了哪些问题等</span><br><span class="line">humans.txt:保存网站信息和网站建设者信息</span><br><span class="line">LICENSE.txt:项目基于的许可协议</span><br><span class="line">robots.txt:规定爬虫程序能够获取本网站的哪些信息</span><br></pre></td></tr></table></figure>

<h2 id="实战项目2"><a href="#实战项目2" class="headerlink" title="实战项目2"></a>实战项目2</h2><h3 id="商业模式介绍"><a href="#商业模式介绍" class="headerlink" title="商业模式介绍"></a>商业模式介绍</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image148.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image149.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image150.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image151.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image152.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image153.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image154.png" alt="Image"></p>
<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image155.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image156.png" alt="Image"></p>
<h3 id="项目架构"><a href="#项目架构" class="headerlink" title="项目架构"></a>项目架构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image157.png" alt="Image"></p>
<h3 id="安装拓展"><a href="#安装拓展" class="headerlink" title="安装拓展"></a>安装拓展</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># requirement.txt</span></span><br><span class="line">amqp==<span class="number">2.3</span><span class="number">.2</span></span><br><span class="line">asn1crypto==<span class="number">0.24</span><span class="number">.0</span></span><br><span class="line">billiard==<span class="number">3.5</span><span class="number">.0</span><span class="number">.4</span></span><br><span class="line">celery==<span class="number">4.2</span><span class="number">.1</span></span><br><span class="line">certifi==<span class="number">2018.10</span><span class="number">.15</span></span><br><span class="line">cffi==<span class="number">1.11</span><span class="number">.5</span></span><br><span class="line">chardet==<span class="number">3.0</span><span class="number">.4</span></span><br><span class="line">coreapi==<span class="number">2.3</span><span class="number">.3</span></span><br><span class="line">coreschema==<span class="number">0.0</span><span class="number">.4</span></span><br><span class="line">cryptography==<span class="number">2.3</span><span class="number">.1</span></span><br><span class="line">diff-<span class="keyword">match</span>-patch==<span class="number">20121119</span></span><br><span class="line">Django==<span class="number">1.11</span><span class="number">.11</span></span><br><span class="line">django-ckeditor==<span class="number">5.6</span><span class="number">.1</span></span><br><span class="line">django-cors-headers==<span class="number">2.4</span><span class="number">.0</span></span><br><span class="line">django-crispy-forms==<span class="number">1.7</span><span class="number">.2</span></span><br><span class="line">django-crontab==<span class="number">0.7</span><span class="number">.1</span></span><br><span class="line">django-<span class="built_in">filter</span>==<span class="number">2.0</span><span class="number">.0</span></span><br><span class="line">django-formtools==<span class="number">2.1</span></span><br><span class="line">django-haystack==<span class="number">2.8</span><span class="number">.1</span></span><br><span class="line">django-<span class="keyword">import</span>-export==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">django-js-asset==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">django-redis==<span class="number">4.9</span><span class="number">.0</span></span><br><span class="line">django-reversion==<span class="number">3.0</span><span class="number">.2</span></span><br><span class="line">djangorestframework==<span class="number">3.9</span><span class="number">.0</span></span><br><span class="line">djangorestframework-jwt==<span class="number">1.11</span><span class="number">.0</span></span><br><span class="line">drf-extensions==<span class="number">0.4</span><span class="number">.0</span></span><br><span class="line">drf-haystack==<span class="number">1.8</span><span class="number">.4</span></span><br><span class="line">elasticsearch==<span class="number">2.4</span><span class="number">.1</span></span><br><span class="line">et-xmlfile==<span class="number">1.0</span><span class="number">.1</span></span><br><span class="line">future==<span class="number">0.17</span><span class="number">.1</span></span><br><span class="line">httplib2==<span class="number">0.9</span><span class="number">.2</span></span><br><span class="line">idna==<span class="number">2.7</span></span><br><span class="line">itsdangerous==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">itypes==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">jdcal==<span class="number">1.4</span></span><br><span class="line">Jinja2==<span class="number">2.10</span></span><br><span class="line">kombu==<span class="number">4.2</span><span class="number">.1</span></span><br><span class="line">MarkupSafe==<span class="number">1.0</span></span><br><span class="line">mutagen==<span class="number">1.41</span><span class="number">.1</span></span><br><span class="line">odfpy==<span class="number">1.3</span><span class="number">.6</span></span><br><span class="line">openpyxl==<span class="number">2.5</span><span class="number">.9</span></span><br><span class="line">Pillow==<span class="number">5.3</span><span class="number">.0</span></span><br><span class="line">pycparser==<span class="number">2.19</span></span><br><span class="line">pycryptodomex==<span class="number">3.7</span><span class="number">.0</span></span><br><span class="line">PyJWT==<span class="number">1.6</span><span class="number">.4</span></span><br><span class="line">PyMySQL==<span class="number">0.9</span><span class="number">.2</span></span><br><span class="line">python-alipay-sdk==<span class="number">1.8</span><span class="number">.0</span></span><br><span class="line">python-dateutil==<span class="number">2.7</span><span class="number">.5</span></span><br><span class="line">pytz==<span class="number">2018.6</span></span><br><span class="line">PyYAML==<span class="number">3.13</span></span><br><span class="line">QQLoginTool==<span class="number">0.3</span><span class="number">.0</span></span><br><span class="line">redis==<span class="number">2.10</span><span class="number">.6</span></span><br><span class="line">requests==<span class="number">2.20</span><span class="number">.0</span></span><br><span class="line">six==<span class="number">1.11</span><span class="number">.0</span></span><br><span class="line">tablib==<span class="number">0.12</span><span class="number">.1</span></span><br><span class="line">unicodecsv==<span class="number">0.14</span><span class="number">.1</span></span><br><span class="line">uritemplate==<span class="number">3.0</span><span class="number">.0</span></span><br><span class="line">urllib3==<span class="number">1.24</span></span><br><span class="line">uWSGI==<span class="number">2.0</span><span class="number">.17</span><span class="number">.1</span></span><br><span class="line">vine==<span class="number">1.1</span><span class="number">.4</span></span><br><span class="line">xadmin==<span class="number">0.6</span><span class="number">.1</span></span><br><span class="line">xlrd==<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">xlwt==<span class="number">1.3</span><span class="number">.0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="安装跨域配置"><a href="#安装跨域配置" class="headerlink" title="安装跨域配置"></a>安装跨域配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">同源:协议: ip/域名+端口都需要一致才同源,否则就得使用跨域配置</span><br></pre></td></tr></table></figure>

<p>安装跨域</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Markdown</span><br><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure>

<p>注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Markdown</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &#x27;django.contrib.admin&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth&#x27;,</span><br><span class="line">    &#x27;django.contrib.contenttypes&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages&#x27;,</span><br><span class="line">    &#x27;django.contrib.staticfiles&#x27;,</span><br><span class="line">    # 注册rest_framwork框架</span><br><span class="line">    &quot;rest_framework&quot;,</span><br><span class="line">    # 注册跨域</span><br><span class="line">    &#x27;corsheaders&#x27;,</span><br><span class="line">    # 注册应用</span><br><span class="line">    &#x27;users.apps.UsersConfig&#x27;,</span><br><span class="line">    &quot;verifition.apps.VerifitionConfig&quot;,</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>配置中间件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Markdown</span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    # 跨域配置放在第一位</span><br><span class="line">    &#x27;corsheaders.middleware.CorsMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.security.SecurityMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.common.CommonMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;,</span><br><span class="line">    &#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;,</span><br><span class="line">    &#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>添加白名单</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 允许哪些主机域名访问django后端</span></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="string">&#x27;localhost&#x27;</span>]</span><br><span class="line"><span class="comment"># 配置cores白名单</span></span><br><span class="line">CORS_ORIGIN_WHITELIST = (</span><br><span class="line">    <span class="string">&#x27;http://127.0.0.1:8080&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span> <span class="comment"># 跨域时允许携带cookie</span></span><br></pre></td></tr></table></figure>

<h3 id="短信验证码-1"><a href="#短信验证码-1" class="headerlink" title="短信验证码"></a>短信验证码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">目的:防止恶意用户暴力测试短信接口,频繁发送短信</span><br><span class="line">解决方案: </span><br><span class="line">每次发送短信验证码时,再Redis数据库中记录一个值,并设置该值</span><br></pre></td></tr></table></figure>

<p>创建reids管道:把多次redis操作装入管道中,将来一次性执行,减少redis连接操作</p>
<h3 id="celery分布式异步消息队列系统"><a href="#celery分布式异步消息队列系统" class="headerlink" title="celery分布式异步消息队列系统"></a>celery分布式异步消息队列系统</h3><p>搭建好celery服务,启动</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">celery -A celery_tasks.main worker -l info</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image158.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image159.png" alt="Image"></p>
<p>在windows下，如果celery组件只是收到任务但不执行，也就是说不会有任务执行结果出来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 安装gevent</span></span><br><span class="line">pip install gevent</span><br><span class="line"><span class="comment"># 启动celery</span></span><br><span class="line">celery -A celery_tasks.main worker -P gevent -l info</span><br></pre></td></tr></table></figure>

<p>官方解释：<a target="_blank" rel="noopener" href="https://pypi.org/project/celery/">https://pypi.org/project/celery/</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image160.png" alt="Image"></p>
<p>参考解决方方案：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yoyoketang/p/16668735.html">https://www.cnblogs.com/yoyoketang/p/16668735.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yoyoketang/p/16668657.html">https://www.cnblogs.com/yoyoketang/p/16668657.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangphil/article/details/126587958">https://blog.csdn.net/zhangphil/article/details/126587958</a></p>
<p>注意：celery不支持win，所以想要win上运行，就需要额外安装eventlet,而在linux和mac中是支持的，但是推荐使用gevent，这个文档会完善很多并且一直在维护</p>
<h3 id="session和JWT"><a href="#session和JWT" class="headerlink" title="session和JWT"></a>session和JWT</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image161.png" alt="Image"></p>
<p>JWT：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image162.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image163.png" alt="Image"></p>
<h3 id="邮件发送"><a href="#邮件发送" class="headerlink" title="邮件发送"></a>邮件发送</h3><p>参考资料：使用QQ邮箱发送邮件，QQ邮箱的smtp设置 - UJCMS官网</p>
<p>1-使用Django内置邮件功能发邮件 - 听雨危楼 - 博客园</p>
<p>wx.mail.qq.com</p>
<h3 id="QQ配置邮箱发送"><a href="#QQ配置邮箱发送" class="headerlink" title="QQ配置邮箱发送"></a>QQ配置邮箱发送</h3><p>进入qq邮箱设置获取授权码</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image164.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image165.png" alt="Image"></p>
<p>在Django第三方客户端，也就是settings.py中配置对应的授权码和端口号</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image166.png" alt="Image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># 发送邮箱配置,QQ邮箱</span></span><br><span class="line">EMAIL_BACKEND = <span class="string">&#x27;django.core.mail.backends.smtp.EmailBackend&#x27;</span></span><br><span class="line">EMAIL_USE_TLS = <span class="literal">True</span>  <span class="comment"># 是否使用TLS安全传输协议(用于在两个通信应用程序之间提供保密性和数据完整性。)</span></span><br><span class="line">EMAIL_USE_SSL = <span class="literal">False</span>  <span class="comment"># 是否使用SSL加密，qq企业邮箱要求使用</span></span><br><span class="line">EMAIL_HOST = <span class="string">&#x27;smtp.163.com&#x27;</span>  <span class="comment"># 发送邮件的邮箱 的 SMTP服务器，这里用了163邮箱</span></span><br><span class="line">EMAIL_PORT = <span class="number">25</span>  <span class="comment"># 发件箱的SMTP服务器端口</span></span><br><span class="line">EMAIL_HOST_USER = <span class="string">&#x27;904036925@qq.com&#x27;</span>  <span class="comment"># 发送邮件的邮箱地址</span></span><br><span class="line">EMAIL_HOST_PASSWORD = <span class="string">&#x27;fygcqoknyrqpbcbi&#x27;</span>  <span class="comment"># 发送邮件的邮箱密码(这里使用的是授权码)</span></span><br><span class="line">EMAIL_TO_USER_LIST = [<span class="string">&#x27;904036925@qq.com&#x27;</span>,]   <span class="comment"># 此字段是可选的，用来配置收件人列表</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># views.py</span></span><br><span class="line"><span class="comment"># 发送邮件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SendEmailView</span>(<span class="title class_ inherited__">APIView</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request: Request, *args, **kwargs</span>) -&gt; Response:</span><br><span class="line">        send_mail(</span><br><span class="line">            subject=<span class="string">&#x27;小灰灰的邮件&#x27;</span>,</span><br><span class="line">            message=<span class="string">&#x27;我是小灰灰，特地来给你发送邮件啦~~~~&#x27;</span>,</span><br><span class="line">            from_email=<span class="string">&#x27;904036925@qq.com&#x27;</span>,</span><br><span class="line">            recipient_list=[<span class="string">&#x27;904036925@qq.com&#x27;</span>,],</span><br><span class="line">            fail_silently=<span class="literal">False</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># 陈斌邮箱&#x27;1456531986@qq.com&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> Response(sendJSONMessage(code=status.HTTP_200_OK,message=<span class="string">&quot;邮件发送成功&quot;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"><span class="comment"># 发送邮箱</span></span><br><span class="line">path(<span class="string">&#x27;sendEmail/&#x27;</span>,views.SendEmailView.as_view()),</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image167.png" alt="Image"></p>
<h3 id="FastDFS分布式文件系统"><a href="#FastDFS分布式文件系统" class="headerlink" title="FastDFS分布式文件系统"></a>FastDFS分布式文件系统</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image168.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image169.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image170.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image171.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image172.png" alt="Image"></p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image173.png" alt="Image"></p>
<h2 id="Django开发问题"><a href="#Django开发问题" class="headerlink" title="Django开发问题"></a>Django开发问题</h2><h3 id="Django生成Mysql表字段注释"><a href="#Django生成Mysql表字段注释" class="headerlink" title="Django生成Mysql表字段注释"></a>Django生成Mysql表字段注释</h3><p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenxdnote/p/17506092.html">https://www.cnblogs.com/chenxdnote/p/17506092.html</a></p>
<h3 id="Django-出现-RuntimeError-Conflicting-‘userinfo-groups’-models-in-application-‘users’-and-报错问题"><a href="#Django-出现-RuntimeError-Conflicting-‘userinfo-groups’-models-in-application-‘users’-and-报错问题" class="headerlink" title="Django 出现 RuntimeError: Conflicting ‘userinfo_groups’ models in application ‘users’: &lt;class ‘users.models.UserInfo_groups’&gt; and &lt;class ‘apps.users.models.UserInfo_groups’&gt;.报错问题"></a>Django 出现 RuntimeError: Conflicting ‘userinfo_groups’ models in application ‘users’: &lt;class ‘users.models.UserInfo_groups’&gt; and &lt;class ‘apps.users.models.UserInfo_groups’&gt;.报错问题</h3><p>详细问题出现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">Python</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\apps\users\urls.py changed, reloading.</span><br><span class="line"><span class="number">234242</span> D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject</span><br><span class="line">项目根目录： D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject</span><br><span class="line">根目录下的子目录有： [<span class="string">&#x27;.git&#x27;</span>, <span class="string">&#x27;.idea&#x27;</span>, <span class="string">&#x27;.venv&#x27;</span>, <span class="string">&#x27;apps&#x27;</span>, <span class="string">&#x27;common&#x27;</span>, <span class="string">&#x27;LingTuProject&#x27;</span>, <span class="string">&#x27;utils&#x27;</span>]</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\apps</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject</span><br><span class="line">D:\software\Pycharm\PyCharm <span class="number">2024.1</span><span class="number">.4</span>\plugins\python\helpers\pycharm_display</span><br><span class="line">C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\python312.<span class="built_in">zip</span></span><br><span class="line">C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\DLLs</span><br><span class="line">C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\Lib</span><br><span class="line">C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv</span><br><span class="line">D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages</span><br><span class="line">D:\software\Pycharm\PyCharm <span class="number">2024.1</span><span class="number">.4</span>\plugins\python\helpers\pycharm_matplotlib_backend</span><br><span class="line">Performing system checks...</span><br><span class="line"></span><br><span class="line">Watching <span class="keyword">for</span> file changes <span class="keyword">with</span> StatReloader</span><br><span class="line">Exception <span class="keyword">in</span> thread django-main-thread:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\Lib\threading.py&quot;</span>, line <span class="number">1073</span>, <span class="keyword">in</span> _bootstrap_inner</span><br><span class="line">    <span class="variable language_">self</span>.run()</span><br><span class="line">  File <span class="string">&quot;C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\Lib\threading.py&quot;</span>, line <span class="number">1010</span>, <span class="keyword">in</span> run</span><br><span class="line">    <span class="variable language_">self</span>._target(*<span class="variable language_">self</span>._args, **<span class="variable language_">self</span>._kwargs)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\utils\autoreload.py&quot;</span>, line <span class="number">64</span>, <span class="keyword">in</span> wrapper</span><br><span class="line">    fn(*args, **kwargs)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\core\management\commands\runserver.py&quot;</span>, line <span class="number">134</span>, <span class="keyword">in</span> inner_run</span><br><span class="line">    <span class="variable language_">self</span>.check(display_num_errors=<span class="literal">True</span>)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\core\management\base.py&quot;</span>, line <span class="number">486</span>, <span class="keyword">in</span> check</span><br><span class="line">    all_issues = checks.run_checks(</span><br><span class="line">                 ^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\core\checks\registry.py&quot;</span>, line <span class="number">88</span>, <span class="keyword">in</span> run_checks</span><br><span class="line">    new_errors = check(app_configs=app_configs, databases=databases)</span><br><span class="line">                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\core\checks\urls.py&quot;</span>, line <span class="number">136</span>, <span class="keyword">in</span> check_custom_error_handlers</span><br><span class="line">    handler = resolver.resolve_error_handler(status_code)</span><br><span class="line">              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\urls\resolvers.py&quot;</span>, line <span class="number">732</span>, <span class="keyword">in</span> resolve_error_handler</span><br><span class="line">    callback = <span class="built_in">getattr</span>(<span class="variable language_">self</span>.urlconf_module, <span class="string">&quot;handler%s&quot;</span> % view_type, <span class="literal">None</span>)</span><br><span class="line">                       ^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\utils\functional.py&quot;</span>, line <span class="number">47</span>, <span class="keyword">in</span> __get__</span><br><span class="line">    res = instance.__dict__[<span class="variable language_">self</span>.name] = <span class="variable language_">self</span>.func(instance)</span><br><span class="line">                                         ^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\urls\resolvers.py&quot;</span>, line <span class="number">711</span>, <span class="keyword">in</span> urlconf_module</span><br><span class="line">    <span class="keyword">return</span> import_module(<span class="variable language_">self</span>.urlconf_name)</span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\Lib\importlib\__init__.py&quot;</span>, line <span class="number">90</span>, <span class="keyword">in</span> import_module</span><br><span class="line">    <span class="keyword">return</span> _bootstrap._gcd_import(name[level:], package, level)</span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1387</span>, <span class="keyword">in</span> _gcd_import</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1360</span>, <span class="keyword">in</span> _find_and_load</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1331</span>, <span class="keyword">in</span> _find_and_load_unlocked</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">935</span>, <span class="keyword">in</span> _load_unlocked</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap_external&gt;&quot;</span>, line <span class="number">995</span>, <span class="keyword">in</span> exec_module</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">488</span>, <span class="keyword">in</span> _call_with_frames_removed</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\LingTuProject\urls.py&quot;</span>, line <span class="number">25</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    path(<span class="string">r&#x27;api/user/&#x27;</span>,include(<span class="string">&#x27;users.urls&#x27;</span>)),</span><br><span class="line">                      ^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\urls\conf.py&quot;</span>, line <span class="number">39</span>, <span class="keyword">in</span> include</span><br><span class="line">    urlconf_module = import_module(urlconf_module)</span><br><span class="line">                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;C:\Users\xiaohuihui\AppData\Local\Programs\Python\Python312\Lib\importlib\__init__.py&quot;</span>, line <span class="number">90</span>, <span class="keyword">in</span> import_module</span><br><span class="line">    <span class="keyword">return</span> _bootstrap._gcd_import(name[level:], package, level)</span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1387</span>, <span class="keyword">in</span> _gcd_import</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1360</span>, <span class="keyword">in</span> _find_and_load</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">1331</span>, <span class="keyword">in</span> _find_and_load_unlocked</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">935</span>, <span class="keyword">in</span> _load_unlocked</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap_external&gt;&quot;</span>, line <span class="number">995</span>, <span class="keyword">in</span> exec_module</span><br><span class="line">  File <span class="string">&quot;&lt;frozen importlib._bootstrap&gt;&quot;</span>, line <span class="number">488</span>, <span class="keyword">in</span> _call_with_frames_removed</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\apps\users\urls.py&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> apps.users <span class="keyword">import</span> views</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\apps\users\views.py&quot;</span>, line <span class="number">14</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> .models <span class="keyword">import</span> UserInfo</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\apps\users\models.py&quot;</span>, line <span class="number">8</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UserInfo</span>(AbstractUser, BaseModel):</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\db\models\base.py&quot;</span>, line <span class="number">320</span>, <span class="keyword">in</span> __new__</span><br><span class="line">    new_class.add_to_class(field.name, new_field)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\db\models\base.py&quot;</span>, line <span class="number">371</span>, <span class="keyword">in</span> add_to_class</span><br><span class="line">    value.contribute_to_class(cls, name)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\db\models\fields\related.py&quot;</span>, line <span class="number">1926</span>, <span class="keyword">in</span> contribute_to_class</span><br><span class="line">    <span class="variable language_">self</span>.remote_field.through = create_many_to_many_intermediary_model(</span><br><span class="line">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\db\models\fields\related.py&quot;</span>, line <span class="number">1293</span>, <span class="keyword">in</span> create_many_to_many_intermediary_model</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">type</span>(</span><br><span class="line">           ^^^^^</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\db\models\base.py&quot;</span>, line <span class="number">366</span>, <span class="keyword">in</span> __new__</span><br><span class="line">    new_class._meta.apps.register_model(new_class._meta.app_label, new_class)</span><br><span class="line">  File <span class="string">&quot;D:\Program_Developing\Test_Learn_Program\Python_learnning\Django\LingTuProject\.venv\Lib\site-packages\django\apps\registry.py&quot;</span>, line <span class="number">234</span>, <span class="keyword">in</span> register_model</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(</span><br><span class="line">RuntimeError: Conflicting <span class="string">&#x27;userinfo_groups&#x27;</span> models <span class="keyword">in</span> application <span class="string">&#x27;users&#x27;</span>: &lt;<span class="keyword">class</span> <span class="string">&#x27;users.models.UserInfo_groups&#x27;</span>&gt; <span class="keyword">and</span> &lt;<span class="keyword">class</span> <span class="string">&#x27;apps.users.models.UserInfo_groups&#x27;</span>&gt;.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查了好多的网上资料，结果发现是路径问题，很奇怪，似乎不能使用绝对路径，只能使用相对路径才能运行成功</p>
<p>使用绝对路径，报错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image174.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image175.png" alt="Image"></p>
<p>使用相对路径，运行成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image176.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image177.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image178.png" alt="Image"></p>
<h3 id="Pycharm-debug一直进入不到断点中，直接跳出结果"><a href="#Pycharm-debug一直进入不到断点中，直接跳出结果" class="headerlink" title="Pycharm debug一直进入不到断点中，直接跳出结果"></a>Pycharm debug一直进入不到断点中，直接跳出结果</h3><p>Pycharm debug的时候一直进入不到断点中，甚至直接跳出运行结果最后直接运行结束</p>
<p>解决方案：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image179.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image180.png" alt="Image"></p>
<h3 id="Pycharm-debug一直显示正在搜集数据"><a href="#Pycharm-debug一直显示正在搜集数据" class="headerlink" title="Pycharm debug一直显示正在搜集数据"></a>Pycharm debug一直显示正在搜集数据</h3><p>使用apifox请求数据，来对后端进行调试，结果debug过程一直在显示搜集数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image181.png" alt="Image"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image182.png" alt="Image"></p>
<p>解决方案：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image183.png" alt="Image"></p>
<p>重新运行就有数据了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/image184.png" alt="Image"></p>
<h1 id="Flask框架"><a href="#Flask框架" class="headerlink" title="Flask框架"></a>Flask框架</h1><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><p>mysql数据库进阶，redis，mongodb数据库</p>
<h1 id="运维与部署"><a href="#运维与部署" class="headerlink" title="运维与部署"></a>运维与部署</h1><h1 id="数据处理与分析"><a href="#数据处理与分析" class="headerlink" title="数据处理与分析"></a>数据处理与分析</h1><h1 id="人工智能"><a href="#人工智能" class="headerlink" title="人工智能"></a>人工智能</h1></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.de65fd6b710b4904061b3637649bf062?rik=Hy2PjLeVDNNbYg&amp;riu=http%3a%2f%2fecyacg.net%2fwp-content%2fuploads%2f2019%2f09%2f63-1Z305143K2963.jpg&amp;ehk=%2buit7eUiGsSP8qbWyrb%2bbzslSmkS1C5Cm%2b71EtFpJiQ%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.de65fd6b710b4904061b3637649bf062?rik=Hy2PjLeVDNNbYg&amp;riu=http%3a%2f%2fecyacg.net%2fwp-content%2fuploads%2f2019%2f09%2f63-1Z305143K2963.jpg&amp;ehk=%2buit7eUiGsSP8qbWyrb%2bbzslSmkS1C5Cm%2b71EtFpJiQ%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" title="头像" alt="头像"></a><div class="post-copyright__author_name">xiaohuihui</div><div class="post-copyright__author_desc">精卫衔微木，将以填沧海。刑天舞干戚，猛志固常在。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/')">Django后端框架学习</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gitee.com/huangjianhuia/blog-bed/raw/master/img/weixin_good.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Django后端框架学习&amp;url=https://xiaohuihui-web.github.io/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/&amp;pic=https://tse3-mm.cn.bing.net/th/id/OIP-C.q-lqnbLL5Q7-geuBhnjXJAHaEK?w=331&amp;h=186&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.9&amp;pid=1.7&amp;_r_=974c732c-0d44-8a84-8d27-93def5c587ad" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://xiaohuihui-web.github.io" target="_blank">XiaoHuiHuiBlog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Django/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Django<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://picx.zhimg.com/80/v2-cff04e6b31e8def14cb8a6aeec49d428_1440w.webp?source=1def8aca&amp;_r_=085c1d96-ecca-6c77-a3a4-318fa6fe0717" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/08/30/%E5%9B%A2%E9%98%9F%E7%AE%A1%E7%90%86/git%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.0e8df002a8767204167a8d701245dac9?rik=FVMSP9sQpxH%2F9w&amp;riu=http%3A%2F%2Fpic.rmb.bdstatic.com%2F0e8df002a8767204167a8d701245dac9.jpeg&amp;ehk=JSBfqXi4zc4ahbzzfBBQpr37fKdY2ye0KvAILHiZ2gY%3D&amp;risl=&amp;pid=ImgRaw&amp;r=0&amp;_r_=b1d56cd5-6504-f3df-2ae0-b85af729494c" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">git简单配置教程</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.de65fd6b710b4904061b3637649bf062?rik=Hy2PjLeVDNNbYg&amp;riu=http%3a%2f%2fecyacg.net%2fwp-content%2fuploads%2f2019%2f09%2f63-1Z305143K2963.jpg&amp;ehk=%2buit7eUiGsSP8qbWyrb%2bbzslSmkS1C5Cm%2b71EtFpJiQ%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2021/01/15/fd76b68bdb1a9.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">xiaohuihui</h1><div class="author-info__desc">精卫衔微木，将以填沧海。刑天舞干戚，猛志固常在。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Xiaohuihui-web" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/292636083?spm_id_from=333.788.0.0" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(/img/connectImg/connetImg.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://imgs.699pic.com/images/402/506/611.jpg!detail.v1) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%AE%B9%E5%99%A8%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">python容器入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#list%E5%88%97%E8%A1%A8"><span class="toc-number">1.1.</span> <span class="toc-text">list列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tuple%E5%85%83%E7%BB%84"><span class="toc-number">1.2.</span> <span class="toc-text">tuple元组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#str%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.3.</span> <span class="toc-text">str字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set%E9%9B%86%E5%90%88"><span class="toc-number">1.4.</span> <span class="toc-text">set集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dict%E5%AD%97%E5%85%B8%EF%BC%8C%E6%98%A0%E5%B0%84"><span class="toc-number">1.5.</span> <span class="toc-text">dict字典，映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%B9%E5%99%A8%E7%89%B9%E7%82%B9%E5%AF%B9%E6%AF%94"><span class="toc-number">1.6.</span> <span class="toc-text">数据容器特点对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%EF%BC%9A%E5%BA%8F%E5%88%97"><span class="toc-number">1.7.</span> <span class="toc-text">补充知识：序列</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">2.</span> <span class="toc-text">python函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">2.1.</span> <span class="toc-text">函数多个返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%A4%9A%E7%A7%8D%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">函数多种传参方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">匿名函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">Python 文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%BC%96%E7%A0%81"><span class="toc-number">3.1.</span> <span class="toc-text">文件编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.</span> <span class="toc-text">文件读取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-number">3.3.</span> <span class="toc-text">文件写入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%BF%BD%E5%8A%A0"><span class="toc-number">3.4.</span> <span class="toc-text">文件追加</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%BC%82%E5%B8%B8%EF%BC%8C%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85"><span class="toc-number">4.</span> <span class="toc-text">python异常，模块与包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-number">4.1.</span> <span class="toc-text">捕获异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E4%BC%A0%E9%80%92"><span class="toc-number">4.2.</span> <span class="toc-text">异常传递</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E6%A8%A1%E5%9D%97"><span class="toc-number">5.</span> <span class="toc-text">python模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="toc-number">5.1.</span> <span class="toc-text">自定义模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-%E5%8C%85"><span class="toc-number">5.2.</span> <span class="toc-text">Python 包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-number">5.3.</span> <span class="toc-text">第三方包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">5.4.</span> <span class="toc-text">python可视化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.</span> <span class="toc-text">python对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="toc-number">6.1.</span> <span class="toc-text">类定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text">类成员变量和成员方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.3.</span> <span class="toc-text">类对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">6.4.</span> <span class="toc-text">构造方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">6.5.</span> <span class="toc-text">其他内置方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">6.6.</span> <span class="toc-text">封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E7%A7%81%E6%9C%89%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95"><span class="toc-number">6.6.1.</span> <span class="toc-text">私有成员变量和私有成员方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">6.7.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">6.8.</span> <span class="toc-text">类型注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">6.9.</span> <span class="toc-text">多态</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-SQL%E5%85%A5%E9%97%A8%E5%AE%9E%E6%88%98"><span class="toc-number">7.</span> <span class="toc-text">Python SQL入门实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL"><span class="toc-number">7.1.</span> <span class="toc-text">DDL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML"><span class="toc-number">7.2.</span> <span class="toc-text">DML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL"><span class="toc-number">7.3.</span> <span class="toc-text">DQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pythonMysql%E5%AE%9E%E6%88%98"><span class="toc-number">7.4.</span> <span class="toc-text">pythonMysql实战</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PySpark%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8"><span class="toc-number">8.</span> <span class="toc-text">PySpark基础入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%87%86%E5%A4%87"><span class="toc-number">8.1.</span> <span class="toc-text">基础准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RDD%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.2.</span> <span class="toc-text">RDD对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AE%A1%E7%AE%97"><span class="toc-number">8.3.</span> <span class="toc-text">数据计算</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7"><span class="toc-number">9.</span> <span class="toc-text">python高级技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-number">9.1.</span> <span class="toc-text">闭包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">9.2.</span> <span class="toc-text">装饰器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">9.3.</span> <span class="toc-text">设计模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">9.4.</span> <span class="toc-text">多线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-number">9.5.</span> <span class="toc-text">网络编程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Django%E6%A1%86%E6%9E%B6"><span class="toc-number">10.</span> <span class="toc-text">Django框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E6%96%87%E6%A1%A3"><span class="toc-number">10.1.</span> <span class="toc-text">教程文档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="toc-number">10.2.</span> <span class="toc-text">安装环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">10.3.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8"><span class="toc-number">10.4.</span> <span class="toc-text">创建应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91"><span class="toc-number">10.5.</span> <span class="toc-text">Python前后端分离开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%AC%A6%E5%90%88%E6%A0%87%E5%87%86%E7%9A%84RESTful%E6%8E%A5%E5%8F%A3"><span class="toc-number">10.5.1.</span> <span class="toc-text">设计符合标准的RESTful接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-DjangoMysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE"><span class="toc-number">10.6.</span> <span class="toc-text">Python DjangoMysql数据库设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B"><span class="toc-number">10.6.1.</span> <span class="toc-text">模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B%E7%B1%BB%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><span class="toc-number">10.6.2.</span> <span class="toc-text">模型类查询方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">10.6.3.</span> <span class="toc-text">路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E8%A7%86%E5%9B%BE"><span class="toc-number">10.6.4.</span> <span class="toc-text">类视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">10.6.5.</span> <span class="toc-text">中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Django%E8%87%AA%E5%B8%A6%E8%AE%A4%E8%AF%81%E7%B3%BB%E7%BB%9F"><span class="toc-number">10.6.6.</span> <span class="toc-text">Django自带认证系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C"><span class="toc-number">10.6.7.</span> <span class="toc-text">权限校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E4%BA%8B%E5%8A%A1%E5%BC%80%E5%90%AF"><span class="toc-number">10.6.8.</span> <span class="toc-text">ORM事务开启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">10.6.9.</span> <span class="toc-text">跨域问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Django-REST-Framwork"><span class="toc-number">10.7.</span> <span class="toc-text">Django REST Framwork</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">10.7.1.</span> <span class="toc-text">接口开发步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B%E7%B1%BB"><span class="toc-number">10.7.2.</span> <span class="toc-text">创建模型类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E6%93%8D%E4%BD%9C"><span class="toc-number">10.7.3.</span> <span class="toc-text">序列化操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%93%8D%E4%BD%9C"><span class="toc-number">10.7.4.</span> <span class="toc-text">反序列化操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8"><span class="toc-number">10.7.5.</span> <span class="toc-text">模型序列化器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E6%96%B9%E6%B3%95"><span class="toc-number">10.7.6.</span> <span class="toc-text">序列化器自定义校验方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94"><span class="toc-number">10.7.7.</span> <span class="toc-text">请求和响应</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#API%E8%A7%86%E5%9B%BE%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">10.7.7.1.</span> <span class="toc-text">API视图装饰器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenericAPIView%E7%B1%BB%E8%A7%86%E5%9B%BE"><span class="toc-number">10.7.7.2.</span> <span class="toc-text">GenericAPIView类视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mixin%E8%A7%86%E5%9B%BE%E7%B1%BB"><span class="toc-number">10.7.7.3.</span> <span class="toc-text">Mixin视图类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E8%A7%86%E5%9B%BE%E7%B1%BB"><span class="toc-number">10.7.7.4.</span> <span class="toc-text">拓展视图类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E9%9B%86"><span class="toc-number">10.7.7.5.</span> <span class="toc-text">视图集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1-1"><span class="toc-number">10.7.7.6.</span> <span class="toc-text">路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E5%92%8C%E6%9D%83%E9%99%90"><span class="toc-number">10.7.7.7.</span> <span class="toc-text">认证和权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E9%9A%94%E7%A6%BB"><span class="toc-number">10.7.7.8.</span> <span class="toc-text">权限隔离</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%90%E6%B5%81"><span class="toc-number">10.7.7.9.</span> <span class="toc-text">限流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4"><span class="toc-number">10.7.7.10.</span> <span class="toc-text">过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8%E7%B1%BB%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E8%BF%87%E6%BB%A4"><span class="toc-number">10.7.7.11.</span> <span class="toc-text">自定义过滤器类实现复杂过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number">10.7.7.12.</span> <span class="toc-text">自动生成接口文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">10.7.7.13.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">10.7.7.14.</span> <span class="toc-text">分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">10.7.7.15.</span> <span class="toc-text">异常处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">10.7.7.16.</span> <span class="toc-text">文件上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">10.7.7.17.</span> <span class="toc-text">跨域配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DRF-JWT"><span class="toc-number">10.7.7.18.</span> <span class="toc-text">DRF JWT</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DRF%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="toc-number">10.8.</span> <span class="toc-text">DRF后端项目实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE"><span class="toc-number">10.8.1.</span> <span class="toc-text">项目开发配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B%E7%B1%BB-1"><span class="toc-number">10.8.2.</span> <span class="toc-text">创建模型类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEtoken%E5%88%B7%E6%96%B0%E8%A7%86%E5%9B%BE"><span class="toc-number">10.8.3.</span> <span class="toc-text">配置token刷新视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-%E6%A3%80%E9%AA%8Ctoken"><span class="toc-number">10.8.4.</span> <span class="toc-text">配置   检验token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98"><span class="toc-number">10.8.5.</span> <span class="toc-text">开发问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">10.8.5.1.</span> <span class="toc-text">短信验证码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#python%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E8%AF%B4%E6%98%8E"><span class="toc-number">10.8.5.2.</span> <span class="toc-text">python项目开发常用目录结构说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE2"><span class="toc-number">10.9.</span> <span class="toc-text">实战项目2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%86%E4%B8%9A%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">10.9.1.</span> <span class="toc-text">商业模式介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">10.9.2.</span> <span class="toc-text">开发流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84"><span class="toc-number">10.9.3.</span> <span class="toc-text">项目架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8B%93%E5%B1%95"><span class="toc-number">10.9.4.</span> <span class="toc-text">安装拓展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">10.9.5.</span> <span class="toc-text">安装跨域配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81-1"><span class="toc-number">10.9.6.</span> <span class="toc-text">短信验证码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#celery%E5%88%86%E5%B8%83%E5%BC%8F%E5%BC%82%E6%AD%A5%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%B3%BB%E7%BB%9F"><span class="toc-number">10.9.7.</span> <span class="toc-text">celery分布式异步消息队列系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session%E5%92%8CJWT"><span class="toc-number">10.9.8.</span> <span class="toc-text">session和JWT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81"><span class="toc-number">10.9.9.</span> <span class="toc-text">邮件发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QQ%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1%E5%8F%91%E9%80%81"><span class="toc-number">10.9.10.</span> <span class="toc-text">QQ配置邮箱发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FastDFS%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">10.9.11.</span> <span class="toc-text">FastDFS分布式文件系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker"><span class="toc-number">10.9.12.</span> <span class="toc-text">Docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Django%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98"><span class="toc-number">10.10.</span> <span class="toc-text">Django开发问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Django%E7%94%9F%E6%88%90Mysql%E8%A1%A8%E5%AD%97%E6%AE%B5%E6%B3%A8%E9%87%8A"><span class="toc-number">10.10.1.</span> <span class="toc-text">Django生成Mysql表字段注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Django-%E5%87%BA%E7%8E%B0-RuntimeError-Conflicting-%E2%80%98userinfo-groups%E2%80%99-models-in-application-%E2%80%98users%E2%80%99-and-%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98"><span class="toc-number">10.10.2.</span> <span class="toc-text">Django 出现 RuntimeError: Conflicting ‘userinfo_groups’ models in application ‘users’: &lt;class ‘users.models.UserInfo_groups’&gt; and &lt;class ‘apps.users.models.UserInfo_groups’&gt;.报错问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pycharm-debug%E4%B8%80%E7%9B%B4%E8%BF%9B%E5%85%A5%E4%B8%8D%E5%88%B0%E6%96%AD%E7%82%B9%E4%B8%AD%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%B7%B3%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">10.10.3.</span> <span class="toc-text">Pycharm debug一直进入不到断点中，直接跳出结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pycharm-debug%E4%B8%80%E7%9B%B4%E6%98%BE%E7%A4%BA%E6%AD%A3%E5%9C%A8%E6%90%9C%E9%9B%86%E6%95%B0%E6%8D%AE"><span class="toc-number">10.10.4.</span> <span class="toc-text">Pycharm debug一直显示正在搜集数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Flask%E6%A1%86%E6%9E%B6"><span class="toc-number">11.</span> <span class="toc-text">Flask框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">12.</span> <span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E7%BB%B4%E4%B8%8E%E9%83%A8%E7%BD%B2"><span class="toc-number">13.</span> <span class="toc-text">运维与部署</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-number">14.</span> <span class="toc-text">数据处理与分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD"><span class="toc-number">15.</span> <span class="toc-text">人工智能</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E5%85%A8%E9%9D%A2%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" title="产品经理全面基础教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://picx.zhimg.com/80/v2-cff04e6b31e8def14cb8a6aeec49d428_1440w.webp?source=1def8aca&amp;_r_=085c1d96-ecca-6c77-a3a4-318fa6fe0717" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="产品经理全面基础教程"/></a><div class="content"><a class="title" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E5%85%A8%E9%9D%A2%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" title="产品经理全面基础教程">产品经理全面基础教程</a><time datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" title="产品经理基础入门教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.netbian.com/uploads/allimg/240817/215226-1723902746b64c.jpg?_r_=7b44909f-fe35-693d-c245-58c8121b925f" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="产品经理基础入门教程"/></a><div class="content"><a class="title" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" title="产品经理基础入门教程">产品经理基础入门教程</a><time datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E9%BB%91%E9%A9%AC%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3%E6%95%99%E7%A8%8B/" title="黑马需求文档教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTGmBwn2BMfx3LGJOxiTIERd4qr2TRImDNLJQ&amp;s=&amp;_r_=7e415b51-485b-3798-50a4-97308c896222" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="黑马需求文档教程"/></a><div class="content"><a class="title" href="/2024/08/30/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/%E9%BB%91%E9%A9%AC%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3%E6%95%99%E7%A8%8B/" title="黑马需求文档教程">黑马需求文档教程</a><time datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/%E5%9B%A2%E9%98%9F%E7%AE%A1%E7%90%86/git%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/" title="git简单配置教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.0e8df002a8767204167a8d701245dac9?rik=FVMSP9sQpxH%2F9w&amp;riu=http%3A%2F%2Fpic.rmb.bdstatic.com%2F0e8df002a8767204167a8d701245dac9.jpeg&amp;ehk=JSBfqXi4zc4ahbzzfBBQpr37fKdY2ye0KvAILHiZ2gY%3D&amp;risl=&amp;pid=ImgRaw&amp;r=0&amp;_r_=b1d56cd5-6504-f3df-2ae0-b85af729494c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git简单配置教程"/></a><div class="content"><a class="title" href="/2024/08/30/%E5%9B%A2%E9%98%9F%E7%AE%A1%E7%90%86/git%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/" title="git简单配置教程">git简单配置教程</a><time datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/" title="Django后端框架学习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.q-lqnbLL5Q7-geuBhnjXJAHaEK?w=331&amp;h=186&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.9&amp;pid=1.7&amp;_r_=974c732c-0d44-8a84-8d27-93def5c587ad" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Django后端框架学习"/></a><div class="content"><a class="title" href="/2024/08/30/%E5%90%8E%E7%AB%AF/Django%E5%90%8E%E7%AB%AF/Django/" title="Django后端框架学习">Django后端框架学习</a><time datetime="2024-08-30T13:22:20.000Z" title="发表于 2024-08-30 21:22:20">2024-08-30</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 By <a class="footer-bar-link" href="/" title="xiaohuihui" target="_blank">xiaohuihui</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="个人博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="个人博客"/><span class="back-menu-item-text">个人博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 项目</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/moyun/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 墨运</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/lintu/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 灵途</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/lingyi/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 凌医</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 小工具</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 飞书转md</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Django/" style="font-size: 0.88rem;">Django<sup>1</sup></a><a href="/tags/git%E9%85%8D%E7%BD%AE/" style="font-size: 0.88rem;">git配置<sup>1</sup></a><a href="/tags/%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86/" style="font-size: 0.88rem;">产品经理<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 xiaohuihui 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>